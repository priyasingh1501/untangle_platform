{"ast":null,"code":"import _objectSpread from\"/Users/priyas/Desktop/untangle-platform/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{motion,AnimatePresence}from'framer-motion';import{Plus,Quote,Star,Tag,Trash2,Search,Filter,Edit3,Share2,Heart,BookOpen}from'lucide-react';import{useAuth}from'../contexts/AuthContext';import toast from'react-hot-toast';import{buildApiUrl}from'../config';import{Button,Input,Card,Section,Header,Badge}from'../components/ui';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Content=()=>{const{token}=useAuth();const[quotes,setQuotes]=useState([]);const[showQuoteForm,setShowQuoteForm]=useState(false);const[loading,setLoading]=useState(true);// Removed detect source and general AI suggestions state\nconst[similarLoading,setSimilarLoading]=useState(false);const[analysisLoading,setAnalysisLoading]=useState(false);const[similarBooks,setSimilarBooks]=useState([]);const[analysisText,setAnalysisText]=useState('');const[showAnalysis,setShowAnalysis]=useState(false);const[aiUnavailable,setAiUnavailable]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[filterTag,setFilterTag]=useState('');const[sortBy,setSortBy]=useState('newest');// Quote state\nconst[newQuote,setNewQuote]=useState({content:'',source:'',author:'',bookTitle:'',tags:[],isImportant:false,showInDashboard:false});const[tagInput,setTagInput]=useState('');const fetchQuotes=useCallback(async()=>{try{const response=await fetch(buildApiUrl('/api/book-documents'),{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok){const text=await response.text();console.error('Failed to fetch book documents',response.status,text);return;}const data=await response.json();const documents=Array.isArray(data)?data:data.bookDocuments||data.documents||[];const collected=[];for(const doc of documents){const notes=(doc===null||doc===void 0?void 0:doc.notes)||[];for(const note of notes){if(note!==null&&note!==void 0&&note.isQuote){collected.push({_id:note._id,content:note.content,tags:note.tags||[],isImportant:!!note.isImportant,isQuote:true,timestamp:note.timestamp||note.createdAt||note.updatedAt,location:note.location,bookTitle:doc.title,author:doc.author});}}}setQuotes(collected);}catch(error){console.error('Error fetching quotes:',error);}finally{setLoading(false);}},[token]);useEffect(()=>{fetchQuotes();},[fetchQuotes]);// Removed detect source and general AI suggestions helper\nconst handleGetSimilarBooks=async()=>{if(!newQuote.content.trim()){toast.error('Enter a quote first');return;}setSimilarLoading(true);try{const response=await fetch(buildApiUrl('/api/ai/quote-analysis'),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({quote:newQuote.content,author:newQuote.author||undefined})});if(!response.ok){const text=await response.text();console.error('Similar books failed',response.status,text);if(response.status===500&&text.includes('429')){setAiUnavailable(true);toast.error('AI quota exceeded. Try again later.');}else{toast.error('Failed to fetch similar books');}return;}const data=await response.json();const items=Array.isArray(data===null||data===void 0?void 0:data.similarBooks)?data.similarBooks:[];const normalized=items.map(b=>typeof b==='string'?b:b.title||b.name||'Unknown');setSimilarBooks(normalized);if(normalized.length===0)toast('No similar books found');}catch(e){console.error(e);toast.error('Failed to fetch similar books');}finally{setSimilarLoading(false);}};const handleGetAnalysis=async()=>{if(!newQuote.content.trim()){toast.error('Enter a quote first');return;}setAnalysisLoading(true);try{const response=await fetch(buildApiUrl('/api/ai/quote-analysis'),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({quote:newQuote.content})});if(!response.ok){const text=await response.text();console.error('Analysis failed',response.status,text);if(response.status===500&&text.includes('429')){setAiUnavailable(true);toast.error('AI quota exceeded. Try again later.');}else{toast.error('Failed to fetch analysis');}return;}const data=await response.json();const text=(data===null||data===void 0?void 0:data.analysis)||'';setAnalysisText(text);setShowAnalysis(true);if(!text)toast('No analysis available');}catch(e){console.error(e);toast.error('Failed to fetch analysis');}finally{setAnalysisLoading(false);}};const handleCreateQuote=async e=>{e.preventDefault();if(!newQuote.content.trim()){toast.error('Please enter quote content');return;}try{var _bookData$book,_bookData$bookDocumen;// Always create/find a container book to attach the quote note to\nconst fallbackTitle=newQuote.bookTitle.trim()||'Unattributed Quotes';const fallbackAuthor=newQuote.author.trim()||'Unknown';let bookId=null;const bookResponse=await fetch(buildApiUrl('/api/book-documents'),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({title:fallbackTitle,author:fallbackAuthor,category:'other',status:'completed'})});if(!bookResponse.ok){const text=await bookResponse.text();console.error('Create book failed',bookResponse.status,text);toast.error('Failed to create book for quote');return;}const bookData=await bookResponse.json();bookId=((_bookData$book=bookData.book)===null||_bookData$book===void 0?void 0:_bookData$book._id)||((_bookData$bookDocumen=bookData.bookDocument)===null||_bookData$bookDocumen===void 0?void 0:_bookData$bookDocumen._id)||bookData._id;if(!bookId){console.error('Create book returned no id',bookData);toast.error('Invalid book response');return;}// Create the quote as a note\nconst noteData={content:newQuote.content,location:newQuote.source,tags:newQuote.tags,isImportant:newQuote.isImportant,// Always mark as a quote so it appears in the Quotes page\nisQuote:true,// Optional flag the backend may ignore; used for dashboard display\nshowInDashboard:!!newQuote.showInDashboard};const response=await fetch(buildApiUrl(\"/api/book-documents/\".concat(bookId,\"/notes\")),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(noteData)});if(response.ok){setNewQuote({content:'',source:'',author:'',bookTitle:'',tags:[],isImportant:false,showInDashboard:false});setShowQuoteForm(false);fetchQuotes();toast.success('Quote added successfully!');}else{const text=await response.text();console.error('Add quote failed',response.status,text);toast.error('Failed to add quote');}}catch(error){console.error('Error creating quote:',error);toast.error('Failed to add quote');}};const addQuoteTag=()=>{if(tagInput.trim()&&!newQuote.tags.includes(tagInput.trim())){setNewQuote(_objectSpread(_objectSpread({},newQuote),{},{tags:[...newQuote.tags,tagInput.trim()]}));setTagInput('');}};const removeQuoteTag=tagToRemove=>{setNewQuote(_objectSpread(_objectSpread({},newQuote),{},{tags:newQuote.tags.filter(tag=>tag!==tagToRemove)}));};const handleDeleteQuote=async quoteId=>{if(!window.confirm('Are you sure you want to delete this quote?')){return;}try{const response=await fetch(buildApiUrl(\"/api/book-documents/notes/\".concat(quoteId)),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){setQuotes(quotes.filter(quote=>quote._id!==quoteId));toast.success('Quote deleted successfully!');}else{toast.error('Failed to delete quote');}}catch(error){console.error('Error deleting quote:',error);toast.error('Failed to delete quote');}};const handleUpdateQuote=async(quoteId,updates)=>{try{const response=await fetch(buildApiUrl(\"/api/book-documents/notes/\".concat(quoteId)),{method:'PUT',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(updates)});if(response.ok){setQuotes(quotes.map(quote=>quote._id===quoteId?_objectSpread(_objectSpread({},quote),updates):quote));toast.success('Quote updated successfully!');}else{toast.error('Failed to update quote');}}catch(error){console.error('Error updating quote:',error);toast.error('Failed to update quote');}};const handleShareQuote=quote=>{const shareText=\"\\\"\".concat(quote.content,\"\\\"\").concat(quote.bookTitle?\" - \".concat(quote.bookTitle):'').concat(quote.author?\" by \".concat(quote.author):'');navigator.clipboard.writeText(shareText);toast.success('Quote copied to clipboard!');};// Filter and sort quotes\nconst filteredQuotes=quotes.filter(quote=>{const matchesSearch=quote.content.toLowerCase().includes(searchTerm.toLowerCase())||quote.bookTitle&&quote.bookTitle.toLowerCase().includes(searchTerm.toLowerCase())||quote.author&&quote.author.toLowerCase().includes(searchTerm.toLowerCase());const matchesTag=!filterTag||quote.tags.includes(filterTag);return matchesSearch&&matchesTag;}).sort((a,b)=>{switch(sortBy){case'newest':return new Date(b.timestamp)-new Date(a.timestamp);case'oldest':return new Date(a.timestamp)-new Date(b.timestamp);case'important':return b.isImportant-a.isImportant;default:return 0;}});if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FFD200] mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-text-secondary\",children:\"Loading quotes...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-background-primary\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-[minmax(200px,auto)]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-text-primary font-jakarta mb-2\",children:\"Quote Collection\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-text-secondary\",children:\"Collect and organize your favorite quotes\"})]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>setShowQuoteForm(!showQuoteForm),variant:\"primary\",className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Quote\"})]})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Search\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Search quotes...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"pl-10\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Filter by Tag\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterTag,onChange:e=>setFilterTag(e.target.value),className:\"w-full px-3 py-2 bg-[#0A0C0F] border border-[#2A313A] rounded-lg text-[#E8EEF2] focus:border-[#FFD200] focus:outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All tags\"}),Array.from(new Set(quotes.flatMap(q=>q.tags))).map(tag=>/*#__PURE__*/_jsx(\"option\",{value:tag,children:tag},tag))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Sort by\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"w-full px-3 py-2 bg-[#0A0C0F] border border-[#2A313A] rounded-lg text-[#E8EEF2] focus:border-[#FFD200] focus:outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"Newest first\"}),/*#__PURE__*/_jsx(\"option\",{value:\"oldest\",children:\"Oldest first\"}),/*#__PURE__*/_jsx(\"option\",{value:\"important\",children:\"Important first\"})]})]})]})})})}),/*#__PURE__*/_jsx(AnimatePresence,{children:showQuoteForm&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:'auto'},exit:{opacity:0,height:0},className:\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-text-primary mb-6\",children:\"Add Inspiring Quote\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateQuote,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Quote *\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newQuote.content,onChange:e=>setNewQuote(_objectSpread(_objectSpread({},newQuote),{},{content:e.target.value})),rows:4,className:\"w-full px-3 py-2 bg-[#0A0C0F] border border-[#2A313A] rounded-lg text-[#E8EEF2] focus:border-[#FFD200] focus:outline-none\",placeholder:\"Paste or type your inspiring quote here...\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Book/Article Title\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:newQuote.bookTitle,onChange:e=>setNewQuote(_objectSpread(_objectSpread({},newQuote),{},{bookTitle:e.target.value})),placeholder:\"e.g., The Great Gatsby\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Author\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:newQuote.author,onChange:e=>setNewQuote(_objectSpread(_objectSpread({},newQuote),{},{author:e.target.value})),placeholder:\"e.g., F. Scott Fitzgerald\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Source Location (Optional)\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:newQuote.source,onChange:e=>setNewQuote(_objectSpread(_objectSpread({},newQuote),{},{source:e.target.value})),placeholder:\"e.g., Page 45, Chapter 3, or URL\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Tags\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tagInput,onChange:e=>setTagInput(e.target.value),onKeyPress:e=>e.key==='Enter'&&(e.preventDefault(),addQuoteTag()),className:\"flex-1 px-3 py-2 bg-[#0A0C0F] border border-[#2A313A] rounded-l-lg text-[#E8EEF2] focus:border-[#FFD200] focus:outline-none\",placeholder:\"Add a tag\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addQuoteTag,className:\"px-3 py-2 bg-background-tertiary border border-l-0 border-border-primary rounded-r-lg hover:bg-background-secondary text-text-primary\",children:\"Add\"})]}),newQuote.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mt-2\",children:newQuote.tags.map(tag=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 bg-[#2A313A] text-[#E8EEF2] text-xs rounded-full\",children:[tag,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeQuoteTag(tag),className:\"ml-1 text-[#C9D1D9] hover:text-[#E8EEF2]\",children:\"\\xD7\"})]},tag))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:newQuote.isImportant,onChange:e=>setNewQuote(_objectSpread(_objectSpread({},newQuote),{},{isImportant:e.target.checked})),className:\"mr-2 h-4 w-4 text-accent-primary focus:ring-accent-primary border-border-primary rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-text-secondary font-jakarta\",children:\"Mark as important\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:newQuote.showInDashboard,onChange:e=>setNewQuote(_objectSpread(_objectSpread({},newQuote),{},{showInDashboard:e.target.checked})),className:\"mr-2 h-4 w-4 text-accent-primary focus:ring-accent-primary border-border-primary rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-text-secondary font-jakarta\",children:\"Show in dashboard\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"secondary\",onClick:handleGetSimilarBooks,disabled:similarLoading||aiUnavailable,children:similarLoading?'Loading…':'Get Similar Books'}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"ghost\",onClick:handleGetAnalysis,disabled:analysisLoading||aiUnavailable,children:analysisLoading?'Analyzing…':'Deeper Analysis'})]}),similarBooks.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#1A1F2E] border border-[#2A313A] rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-text-primary mb-2\",children:\"Similar Books\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1\",children:similarBooks.map((title,index)=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setNewQuote(_objectSpread(_objectSpread({},newQuote),{},{bookTitle:title})),className:\"text-left w-full px-3 py-1 bg-[#0A0C0F] border border-[#2A313A] rounded text-[#E8EEF2] hover:border-[#FFD200] text-sm\",children:title},index))})]}),showAnalysis&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#1A1F2E] border border-[#2A313A] rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-text-primary mb-2\",children:\"Deeper Analysis\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary whitespace-pre-wrap\",children:analysisText})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:()=>{setShowQuoteForm(false);setNewQuote({content:'',source:'',author:'',bookTitle:'',tags:[],isImportant:false});},variant:\"ghost\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Add Quote\"})]})]})]})})})}),filteredQuotes.map(quote=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"col-span-1\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full hover:border-[#FFD200]/30 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-text-primary text-lg leading-relaxed italic\",children:[\"\\\"\",quote.content,\"\\\"\"]})}),(quote.bookTitle||quote.author)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 text-sm text-text-secondary\",children:[quote.bookTitle&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 mb-1\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:quote.bookTitle})]}),quote.author&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-1\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"by \",quote.author]})}),quote.location&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-text-muted mt-1\",children:quote.location})]}),quote.tags&&quote.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1 mb-4\",children:quote.tags.map(tag=>/*#__PURE__*/_jsx(Badge,{variant:\"secondary\",className:\"text-xs\",children:tag},tag))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-4 border-t border-[#2A313A]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>handleUpdateQuote(quote._id,{isImportant:!quote.isImportant}),variant:\"ghost\",size:\"sm\",className:\"p-1 \".concat(quote.isImportant?'text-accent-primary bg-accent-primary/20':'text-text-secondary hover:text-accent-primary hover:bg-accent-primary/10'),title:quote.isImportant?'Remove from important':'Mark as important',children:/*#__PURE__*/_jsx(Star,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleShareQuote(quote),variant:\"ghost\",size:\"sm\",className:\"p-1 text-text-secondary hover:text-accent-primary hover:bg-accent-primary/10\",title:\"Share quote\",children:/*#__PURE__*/_jsx(Share2,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleDeleteQuote(quote._id),variant:\"ghost\",size:\"sm\",className:\"p-1 text-text-secondary hover:text-status-error\",title:\"Delete quote\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4\"})})]})]})})},quote._id)),filteredQuotes.length===0&&!showQuoteForm&&/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Quote,{className:\"mx-auto h-12 w-12 text-text-muted mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-text-primary font-jakarta mb-2\",children:quotes.length===0?'No Quotes Yet':'No Quotes Match Your Search'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-text-secondary mb-6\",children:quotes.length===0?'Start building your collection of inspiring quotes':'Try adjusting your search or filter criteria'}),/*#__PURE__*/_jsxs(Button,{onClick:()=>setShowQuoteForm(true),variant:\"primary\",className:\"flex items-center space-x-2 mx-auto\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Your First Quote\"})]})]})})})]})})});};export default Content;","map":{"version":3,"names":["React","useState","useEffect","useCallback","motion","AnimatePresence","Plus","Quote","Star","Tag","Trash2","Search","Filter","Edit3","Share2","Heart","BookOpen","useAuth","toast","buildApiUrl","Button","Input","Card","Section","Header","Badge","jsx","_jsx","jsxs","_jsxs","Content","token","quotes","setQuotes","showQuoteForm","setShowQuoteForm","loading","setLoading","similarLoading","setSimilarLoading","analysisLoading","setAnalysisLoading","similarBooks","setSimilarBooks","analysisText","setAnalysisText","showAnalysis","setShowAnalysis","aiUnavailable","setAiUnavailable","searchTerm","setSearchTerm","filterTag","setFilterTag","sortBy","setSortBy","newQuote","setNewQuote","content","source","author","bookTitle","tags","isImportant","showInDashboard","tagInput","setTagInput","fetchQuotes","response","fetch","headers","concat","ok","text","console","error","status","data","json","documents","Array","isArray","bookDocuments","collected","doc","notes","note","isQuote","push","_id","timestamp","createdAt","updatedAt","location","title","handleGetSimilarBooks","trim","method","body","JSON","stringify","quote","undefined","includes","items","normalized","map","b","name","length","e","handleGetAnalysis","analysis","handleCreateQuote","preventDefault","_bookData$book","_bookData$bookDocumen","fallbackTitle","fallbackAuthor","bookId","bookResponse","category","bookData","book","bookDocument","noteData","success","addQuoteTag","_objectSpread","removeQuoteTag","tagToRemove","filter","tag","handleDeleteQuote","quoteId","window","confirm","handleUpdateQuote","updates","handleShareQuote","shareText","navigator","clipboard","writeText","filteredQuotes","matchesSearch","toLowerCase","matchesTag","sort","a","Date","className","children","onClick","variant","type","placeholder","value","onChange","target","from","Set","flatMap","q","div","initial","opacity","height","animate","exit","onSubmit","rows","required","onKeyPress","key","checked","disabled","index","y","size"],"sources":["/Users/priyas/Desktop/untangle-platform/src/pages/Content.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Plus, \n  Quote,\n  Star,\n  Tag,\n  Trash2,\n  Search,\n  Filter,\n  Edit3,\n  Share2,\n  Heart,\n  BookOpen\n} from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\nimport toast from 'react-hot-toast';\nimport { buildApiUrl } from '../config';\nimport { Button, Input, Card, Section, Header, Badge } from '../components/ui';\n\nconst Content = () => {\n  const { token } = useAuth();\n  const [quotes, setQuotes] = useState([]);\n  const [showQuoteForm, setShowQuoteForm] = useState(false);\n  const [loading, setLoading] = useState(true);\n  // Removed detect source and general AI suggestions state\n  const [similarLoading, setSimilarLoading] = useState(false);\n  const [analysisLoading, setAnalysisLoading] = useState(false);\n  const [similarBooks, setSimilarBooks] = useState([]);\n  const [analysisText, setAnalysisText] = useState('');\n  const [showAnalysis, setShowAnalysis] = useState(false);\n  const [aiUnavailable, setAiUnavailable] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterTag, setFilterTag] = useState('');\n  const [sortBy, setSortBy] = useState('newest');\n\n  // Quote state\n  const [newQuote, setNewQuote] = useState({\n    content: '',\n    source: '',\n    author: '',\n    bookTitle: '',\n    tags: [],\n    isImportant: false,\n    showInDashboard: false\n  });\n\n  const [tagInput, setTagInput] = useState('');\n\n  const fetchQuotes = useCallback(async () => {\n    try {\n      const response = await fetch(buildApiUrl('/api/book-documents'), {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        const text = await response.text();\n        console.error('Failed to fetch book documents', response.status, text);\n        return;\n      }\n\n      const data = await response.json();\n      const documents = Array.isArray(data) ? data : (data.bookDocuments || data.documents || []);\n\n      const collected = [];\n      for (const doc of documents) {\n        const notes = doc?.notes || [];\n        for (const note of notes) {\n          if (note?.isQuote) {\n            collected.push({\n              _id: note._id,\n              content: note.content,\n              tags: note.tags || [],\n              isImportant: !!note.isImportant,\n              isQuote: true,\n              timestamp: note.timestamp || note.createdAt || note.updatedAt,\n              location: note.location,\n              bookTitle: doc.title,\n              author: doc.author\n            });\n          }\n        }\n      }\n      setQuotes(collected);\n    } catch (error) {\n      console.error('Error fetching quotes:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [token]);\n\n  useEffect(() => {\n    fetchQuotes();\n  }, [fetchQuotes]);\n\n  // Removed detect source and general AI suggestions helper\n\n  const handleGetSimilarBooks = async () => {\n    if (!newQuote.content.trim()) {\n      toast.error('Enter a quote first');\n      return;\n    }\n    setSimilarLoading(true);\n    try {\n      const response = await fetch(buildApiUrl('/api/ai/quote-analysis'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ quote: newQuote.content, author: newQuote.author || undefined })\n      });\n      if (!response.ok) {\n        const text = await response.text();\n        console.error('Similar books failed', response.status, text);\n        if (response.status === 500 && text.includes('429')) {\n          setAiUnavailable(true);\n          toast.error('AI quota exceeded. Try again later.');\n        } else {\n          toast.error('Failed to fetch similar books');\n        }\n        return;\n      }\n      const data = await response.json();\n      const items = Array.isArray(data?.similarBooks) ? data.similarBooks : [];\n      const normalized = items.map(b => typeof b === 'string' ? b : (b.title || b.name || 'Unknown'));\n      setSimilarBooks(normalized);\n      if (normalized.length === 0) toast('No similar books found');\n    } catch (e) {\n      console.error(e);\n      toast.error('Failed to fetch similar books');\n    } finally {\n      setSimilarLoading(false);\n    }\n  };\n\n  const handleGetAnalysis = async () => {\n    if (!newQuote.content.trim()) {\n      toast.error('Enter a quote first');\n      return;\n    }\n    setAnalysisLoading(true);\n    try {\n      const response = await fetch(buildApiUrl('/api/ai/quote-analysis'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ quote: newQuote.content })\n      });\n      if (!response.ok) {\n        const text = await response.text();\n        console.error('Analysis failed', response.status, text);\n        if (response.status === 500 && text.includes('429')) {\n          setAiUnavailable(true);\n          toast.error('AI quota exceeded. Try again later.');\n      } else {\n          toast.error('Failed to fetch analysis');\n        }\n        return;\n      }\n      const data = await response.json();\n      const text = data?.analysis || '';\n      setAnalysisText(text);\n      setShowAnalysis(true);\n      if (!text) toast('No analysis available');\n    } catch (e) {\n      console.error(e);\n      toast.error('Failed to fetch analysis');\n    } finally {\n      setAnalysisLoading(false);\n    }\n  };\n\n  const handleCreateQuote = async (e) => {\n    e.preventDefault();\n    \n    if (!newQuote.content.trim()) {\n      toast.error('Please enter quote content');\n      return;\n    }\n\n    try {\n      // Always create/find a container book to attach the quote note to\n      const fallbackTitle = newQuote.bookTitle.trim() || 'Unattributed Quotes';\n      const fallbackAuthor = newQuote.author.trim() || 'Unknown';\n      let bookId = null;\n\n      const bookResponse = await fetch(buildApiUrl('/api/book-documents'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          title: fallbackTitle,\n          author: fallbackAuthor,\n          category: 'other',\n          status: 'completed'\n        })\n      });\n\n      if (!bookResponse.ok) {\n        const text = await bookResponse.text();\n        console.error('Create book failed', bookResponse.status, text);\n        toast.error('Failed to create book for quote');\n        return;\n      }\n\n      const bookData = await bookResponse.json();\n      bookId = bookData.book?._id || bookData.bookDocument?._id || bookData._id;\n      if (!bookId) {\n        console.error('Create book returned no id', bookData);\n        toast.error('Invalid book response');\n        return;\n      }\n\n      // Create the quote as a note\n      const noteData = {\n        content: newQuote.content,\n        location: newQuote.source,\n        tags: newQuote.tags,\n        isImportant: newQuote.isImportant,\n        // Always mark as a quote so it appears in the Quotes page\n        isQuote: true,\n        // Optional flag the backend may ignore; used for dashboard display\n        showInDashboard: !!newQuote.showInDashboard\n      };\n\n      const response = await fetch(buildApiUrl(`/api/book-documents/${bookId}/notes`), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(noteData)\n      });\n\n      if (response.ok) {\n        setNewQuote({\n          content: '',\n          source: '',\n          author: '',\n          bookTitle: '',\n          tags: [],\n          isImportant: false,\n          showInDashboard: false\n        });\n        setShowQuoteForm(false);\n        fetchQuotes();\n        toast.success('Quote added successfully!');\n      } else {\n        const text = await response.text();\n        console.error('Add quote failed', response.status, text);\n        toast.error('Failed to add quote');\n      }\n    } catch (error) {\n      console.error('Error creating quote:', error);\n      toast.error('Failed to add quote');\n    }\n  };\n\n  const addQuoteTag = () => {\n    if (tagInput.trim() && !newQuote.tags.includes(tagInput.trim())) {\n      setNewQuote({\n        ...newQuote,\n        tags: [...newQuote.tags, tagInput.trim()]\n      });\n      setTagInput('');\n    }\n  };\n\n  const removeQuoteTag = (tagToRemove) => {\n    setNewQuote({\n      ...newQuote,\n      tags: newQuote.tags.filter(tag => tag !== tagToRemove)\n    });\n  };\n\n  const handleDeleteQuote = async (quoteId) => {\n    if (!window.confirm('Are you sure you want to delete this quote?')) {\n      return;\n    }\n\n    try {\n      const response = await fetch(buildApiUrl(`/api/book-documents/notes/${quoteId}`), {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        setQuotes(quotes.filter(quote => quote._id !== quoteId));\n        toast.success('Quote deleted successfully!');\n      } else {\n        toast.error('Failed to delete quote');\n      }\n    } catch (error) {\n      console.error('Error deleting quote:', error);\n      toast.error('Failed to delete quote');\n    }\n  };\n\n  const handleUpdateQuote = async (quoteId, updates) => {\n    try {\n      const response = await fetch(buildApiUrl(`/api/book-documents/notes/${quoteId}`), {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(updates)\n      });\n\n      if (response.ok) {\n        setQuotes(quotes.map(quote => \n          quote._id === quoteId ? { ...quote, ...updates } : quote\n        ));\n        toast.success('Quote updated successfully!');\n      } else {\n        toast.error('Failed to update quote');\n      }\n    } catch (error) {\n      console.error('Error updating quote:', error);\n      toast.error('Failed to update quote');\n    }\n  };\n\n  const handleShareQuote = (quote) => {\n    const shareText = `\"${quote.content}\"${quote.bookTitle ? ` - ${quote.bookTitle}` : ''}${quote.author ? ` by ${quote.author}` : ''}`;\n    navigator.clipboard.writeText(shareText);\n    toast.success('Quote copied to clipboard!');\n  };\n\n  // Filter and sort quotes\n  const filteredQuotes = quotes.filter(quote => {\n    const matchesSearch = quote.content.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         (quote.bookTitle && quote.bookTitle.toLowerCase().includes(searchTerm.toLowerCase())) ||\n                         (quote.author && quote.author.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    const matchesTag = !filterTag || quote.tags.includes(filterTag);\n    \n    return matchesSearch && matchesTag;\n  }).sort((a, b) => {\n    switch (sortBy) {\n      case 'newest':\n        return new Date(b.timestamp) - new Date(a.timestamp);\n      case 'oldest':\n        return new Date(a.timestamp) - new Date(b.timestamp);\n      case 'important':\n        return b.isImportant - a.isImportant;\n      default:\n        return 0;\n    }\n  });\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FFD200] mx-auto mb-4\"></div>\n          <p className=\"text-text-secondary\">Loading quotes...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background-primary\">\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Bento Grid Layout */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-[minmax(200px,auto)]\">\n          \n          {/* Header Card */}\n          <div className=\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\">\n            <Card className=\"h-full\">\n              <div className=\"p-6\">\n                <div className=\"flex items-center justify-between\">\n          <div>\n                    <h1 className=\"text-3xl font-bold text-text-primary font-jakarta mb-2\">\n                      Quote Collection\n                    </h1>\n                    <p className=\"text-text-secondary\">\n                      Collect and organize your favorite quotes\n                    </p>\n          </div>\n          <Button\n                    onClick={() => setShowQuoteForm(!showQuoteForm)}\n                    variant=\"primary\"\n                    className=\"flex items-center space-x-2\"\n                  >\n                    <Plus className=\"h-5 w-5\" />\n                    <span>Add Quote</span>\n          </Button>\n        </div>\n              </div>\n            </Card>\n        </div>\n\n          {/* Search and Filter Card */}\n          <div className=\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\">\n            <Card className=\"h-full\">\n              <div className=\"p-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                      Search\n                    </label>\n                    <div className=\"relative\">\n                      <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted\" />\n                  <Input\n                    type=\"text\"\n                        placeholder=\"Search quotes...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        className=\"pl-10\"\n                      />\n                    </div>\n                </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                      Filter by Tag\n                    </label>\n                    <select\n                      value={filterTag}\n                      onChange={(e) => setFilterTag(e.target.value)}\n                      className=\"w-full px-3 py-2 bg-[#0A0C0F] border border-[#2A313A] rounded-lg text-[#E8EEF2] focus:border-[#FFD200] focus:outline-none\"\n                    >\n                      <option value=\"\">All tags</option>\n                      {Array.from(new Set(quotes.flatMap(q => q.tags))).map(tag => (\n                        <option key={tag} value={tag}>{tag}</option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                      Sort by\n                    </label>\n                    <select\n                      value={sortBy}\n                      onChange={(e) => setSortBy(e.target.value)}\n                      className=\"w-full px-3 py-2 bg-[#0A0C0F] border border-[#2A313A] rounded-lg text-[#E8EEF2] focus:border-[#FFD200] focus:outline-none\"\n                    >\n                      <option value=\"newest\">Newest first</option>\n                      <option value=\"oldest\">Oldest first</option>\n                      <option value=\"important\">Important first</option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n            </Card>\n                </div>\n\n          {/* Add Quote Form */}\n          <AnimatePresence>\n            {showQuoteForm && (\n              <motion.div\n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: 'auto' }}\n                exit={{ opacity: 0, height: 0 }}\n                className=\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\"\n              >\n                <Card className=\"h-full\">\n                  <div className=\"p-6\">\n                    <h3 className=\"text-xl font-semibold text-text-primary mb-6\">Add Inspiring Quote</h3>\n                    <form onSubmit={handleCreateQuote} className=\"space-y-6\">\n                      {/* Quote Content */}\n                <div>\n                  <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                          Quote *\n                  </label>\n                        <textarea\n                          value={newQuote.content}\n                          onChange={(e) => setNewQuote({ ...newQuote, content: e.target.value })}\n                          rows={4}\n                          className=\"w-full px-3 py-2 bg-[#0A0C0F] border border-[#2A313A] rounded-lg text-[#E8EEF2] focus:border-[#FFD200] focus:outline-none\"\n                          placeholder=\"Paste or type your inspiring quote here...\"\n                          required\n                        />\n                </div>\n\n                      {/* AI controls moved to bottom */}\n\n                      {/* Source Information */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                          <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                            Book/Article Title\n                    </label>\n                          <Input\n                            type=\"text\"\n                            value={newQuote.bookTitle}\n                            onChange={(e) => setNewQuote({ ...newQuote, bookTitle: e.target.value })}\n                            placeholder=\"e.g., The Great Gatsby\"\n                          />\n                  </div>\n                <div>\n                          <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                            Author\n                  </label>\n                  <Input\n                    type=\"text\"\n                            value={newQuote.author}\n                            onChange={(e) => setNewQuote({ ...newQuote, author: e.target.value })}\n                            placeholder=\"e.g., F. Scott Fitzgerald\"\n                          />\n                        </div>\n                  </div>\n\n                  <div>\n                        <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                          Source Location (Optional)\n                    </label>\n                  <Input\n                      type=\"text\"\n                          value={newQuote.source}\n                          onChange={(e) => setNewQuote({ ...newQuote, source: e.target.value })}\n                          placeholder=\"e.g., Page 45, Chapter 3, or URL\"\n                    />\n                  </div>\n\n                      {/* Tags */}\n                  <div>\n                  <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                      Tags\n                    </label>\n                    <div className=\"flex\">\n                      <input\n                        type=\"text\"\n                            value={tagInput}\n                            onChange={(e) => setTagInput(e.target.value)}\n                            onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addQuoteTag())}\n                        className=\"flex-1 px-3 py-2 bg-[#0A0C0F] border border-[#2A313A] rounded-l-lg text-[#E8EEF2] focus:border-[#FFD200] focus:outline-none\"\n                        placeholder=\"Add a tag\"\n                      />\n                      <button\n                        type=\"button\"\n                            onClick={addQuoteTag}\n                      className=\"px-3 py-2 bg-background-tertiary border border-l-0 border-border-primary rounded-r-lg hover:bg-background-secondary text-text-primary\"\n                      >\n                        Add\n                      </button>\n                    </div>\n                        {newQuote.tags.length > 0 && (\n                      <div className=\"flex flex-wrap gap-2 mt-2\">\n                            {newQuote.tags.map(tag => (\n                          <span\n                            key={tag}\n                          className=\"inline-flex items-center px-2 py-1 bg-[#2A313A] text-[#E8EEF2] text-xs rounded-full\"\n                          >\n                            {tag}\n                            <button\n                              type=\"button\"\n                                  onClick={() => removeQuoteTag(tag)}\n                            className=\"ml-1 text-[#C9D1D9] hover:text-[#E8EEF2]\"\n                            >\n                              ×\n                            </button>\n                          </span>\n                        ))}\n                      </div>\n                    )}\n                </div>\n\n                      {/* Important / Show in Dashboard */}\n                      <div className=\"flex items-center gap-6\">\n                  <label className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                            checked={newQuote.isImportant}\n                            onChange={(e) => setNewQuote({ ...newQuote, isImportant: e.target.checked })}\n                      className=\"mr-2 h-4 w-4 text-accent-primary focus:ring-accent-primary border-border-primary rounded\"\n                    />\n                    <span className=\"text-sm text-text-secondary font-jakarta\">Mark as important</span>\n                  </label>\n                  \n                  <label className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                            checked={newQuote.showInDashboard}\n                            onChange={(e) => setNewQuote({ ...newQuote, showInDashboard: e.target.checked })}\n                      className=\"mr-2 h-4 w-4 text-accent-primary focus:ring-accent-primary border-border-primary rounded\"\n                    />\n                          <span className=\"text-sm text-text-secondary font-jakarta\">Show in dashboard</span>\n                  </label>\n                </div>\n\n                      {/* AI Controls at bottom */}\n                      <div className=\"mt-6 space-y-4\">\n                        <div className=\"flex flex-wrap gap-3\">\n                          <Button type=\"button\" variant=\"secondary\" onClick={handleGetSimilarBooks} disabled={similarLoading || aiUnavailable}>\n                            {similarLoading ? 'Loading…' : 'Get Similar Books'}\n                          </Button>\n                          <Button type=\"button\" variant=\"ghost\" onClick={handleGetAnalysis} disabled={analysisLoading || aiUnavailable}>\n                            {analysisLoading ? 'Analyzing…' : 'Deeper Analysis'}\n                          </Button>\n                        </div>\n\n                        {similarBooks.length > 0 && (\n                          <div className=\"bg-[#1A1F2E] border border-[#2A313A] rounded-lg p-4\">\n                            <h4 className=\"text-sm font-medium text-text-primary mb-2\">Similar Books</h4>\n                            <div className=\"space-y-1\">\n                              {similarBooks.map((title, index) => (\n                                <button\n                                  key={index}\n                                  type=\"button\"\n                                  onClick={() => setNewQuote({ ...newQuote, bookTitle: title })}\n                                  className=\"text-left w-full px-3 py-1 bg-[#0A0C0F] border border-[#2A313A] rounded text-[#E8EEF2] hover:border-[#FFD200] text-sm\"\n                                >\n                                  {title}\n                                </button>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n\n                        {showAnalysis && (\n                          <div className=\"bg-[#1A1F2E] border border-[#2A313A] rounded-lg p-4\">\n                            <h4 className=\"text-sm font-medium text-text-primary mb-2\">Deeper Analysis</h4>\n                            <p className=\"text-sm text-text-secondary whitespace-pre-wrap\">{analysisText}</p>\n                          </div>\n                        )}\n                      </div>\n\n                      {/* Action Buttons */}\n                      <div className=\"flex justify-end space-x-3 mt-6\">\n                  <Button\n                    type=\"button\"\n                    onClick={() => {\n                            setShowQuoteForm(false);\n                            setNewQuote({\n                              content: '',\n                              source: '',\n                              author: '',\n                              bookTitle: '',\n                              tags: [],\n                              isImportant: false\n                            });\n                    }}\n                    variant=\"ghost\"\n                  >\n                    Cancel\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    variant=\"primary\"\n                  >\n                          Add Quote\n                  </Button>\n                </div>\n              </form>\n                  </div>\n            </Card>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n          {/* Quote Cards */}\n          {filteredQuotes.map((quote) => (\n              <motion.div\n              key={quote._id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n              className=\"col-span-1\"\n            >\n              <Card className=\"h-full hover:border-[#FFD200]/30 transition-colors\">\n                <div className=\"p-6\">\n                  {/* Quote Content */}\n                  <div className=\"mb-4\">\n                    <p className=\"text-text-primary text-lg leading-relaxed italic\">\n                      \"{quote.content}\"\n                    </p>\n                          </div>\n\n                  {/* Source Information */}\n                  {(quote.bookTitle || quote.author) && (\n                    <div className=\"mb-4 text-sm text-text-secondary\">\n                      {quote.bookTitle && (\n                        <div className=\"flex items-center space-x-1 mb-1\">\n                          <BookOpen className=\"h-4 w-4\" />\n                          <span className=\"font-medium\">{quote.bookTitle}</span>\n                          </div>\n                      )}\n                      {quote.author && (\n                        <div className=\"flex items-center space-x-1\">\n                          <span>by {quote.author}</span>\n                        </div>\n                      )}\n                      {quote.location && (\n                        <div className=\"text-xs text-text-muted mt-1\">\n                          {quote.location}\n                      </div>\n                        )}\n                      </div>\n                  )}\n\n                  {/* Tags */}\n                  {quote.tags && quote.tags.length > 0 && (\n                    <div className=\"flex flex-wrap gap-1 mb-4\">\n                      {quote.tags.map(tag => (\n                            <Badge key={tag} variant=\"secondary\" className=\"text-xs\">\n                              {tag}\n                            </Badge>\n                          ))}\n                        </div>\n                      )}\n\n                  {/* Actions */}\n                  <div className=\"flex items-center justify-between pt-4 border-t border-[#2A313A]\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Button\n                        onClick={() => handleUpdateQuote(quote._id, { isImportant: !quote.isImportant })}\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className={`p-1 ${\n                          quote.isImportant \n                                    ? 'text-accent-primary bg-accent-primary/20' \n                                    : 'text-text-secondary hover:text-accent-primary hover:bg-accent-primary/10'\n                                }`}\n                        title={quote.isImportant ? 'Remove from important' : 'Mark as important'}\n                              >\n                        <Star className=\"h-4 w-4\" />\n                              </Button>\n                              <Button\n                        onClick={() => handleShareQuote(quote)}\n                                variant=\"ghost\"\n                                size=\"sm\"\n                        className=\"p-1 text-text-secondary hover:text-accent-primary hover:bg-accent-primary/10\"\n                        title=\"Share quote\"\n                      >\n                        <Share2 className=\"h-4 w-4\" />\n                              </Button>\n                    </div>\n                    \n                              <Button\n                      onClick={() => handleDeleteQuote(quote._id)}\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className=\"p-1 text-text-secondary hover:text-status-error\"\n                      title=\"Delete quote\"\n                              >\n                      <Trash2 className=\"h-4 w-4\" />\n                              </Button>\n                            </div>\n                          </div>\n              </Card>\n            </motion.div>\n          ))}\n\n          {/* Empty State */}\n          {filteredQuotes.length === 0 && !showQuoteForm && (\n            <div className=\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\">\n              <Card className=\"h-full\">\n                <div className=\"text-center py-12\">\n                  <Quote className=\"mx-auto h-12 w-12 text-text-muted mb-4\" />\n                  <h3 className=\"text-lg font-medium text-text-primary font-jakarta mb-2\">\n                    {quotes.length === 0 ? 'No Quotes Yet' : 'No Quotes Match Your Search'}\n                  </h3>\n                  <p className=\"text-text-secondary mb-6\">\n                    {quotes.length === 0 \n                      ? 'Start building your collection of inspiring quotes'\n                      : 'Try adjusting your search or filter criteria'\n                    }\n                  </p>\n                  <Button\n                    onClick={() => setShowQuoteForm(true)}\n                    variant=\"primary\"\n                    className=\"flex items-center space-x-2 mx-auto\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                    <span>Add Your First Quote</span>\n                  </Button>\n                          </div>\n              </Card>\n                    </div>\n                  )}\n                    </div>\n                  </div>\n          </div>\n  );\n};\n\nexport default Content;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}