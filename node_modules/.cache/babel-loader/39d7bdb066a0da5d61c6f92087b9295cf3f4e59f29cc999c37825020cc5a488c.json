{"ast":null,"code":"import _objectSpread from\"/Users/priyas/Desktop/untangle-platform/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{motion,AnimatePresence}from'framer-motion';import{Plus,BookOpen,Heart,Target,Moon,Star,Calendar,Tag,MapPin,Cloud,Edit3,Trash2,Eye,EyeOff}from'lucide-react';import{useAuth}from'../contexts/AuthContext';import toast from'react-hot-toast';import AlfredAnalysis from'../components/journal/AlfredAnalysis';import JournalTrends from'../components/journal/JournalTrends';import EmotionalJourneyChart from'../components/journal/EmotionalJourneyChart';import MindfulnessCheckin from'../components/mindfulness/MindfulnessCheckin';import{buildApiUrl}from'../config';import{Button,Input,Card,Section,Header}from'../components/ui';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Journal=()=>{const{token}=useAuth();const[entries,setEntries]=useState([]);const[showNewEntryForm,setShowNewEntryForm]=useState(false);const[showMindfulnessCheckin,setShowMindfulnessCheckin]=useState(false);const[loading,setLoading]=useState(true);const[stats,setStats]=useState(null);const[goals,setGoals]=useState([]);const[tasks,setTasks]=useState([]);const[habits,setHabits]=useState([]);const[filters,setFilters]=useState({type:'',mood:'',tags:[]});// New entry form state\nconst[newEntry,setNewEntry]=useState({title:'',content:'',type:'daily',mood:'neutral',tags:[],isPrivate:false,// Mindfulness dimensions\nmindfulnessDimensions:{presence:{rating:0},emotionAwareness:{rating:0},intentionality:{rating:0},attentionQuality:{rating:0},compassion:{rating:0}}});const[tagInput,setTagInput]=useState('');const entryTypes=[{value:'daily',label:'Daily',icon:Calendar,color:'bg-blue-500'},{value:'gratitude',label:'Gratitude',icon:Heart,color:'bg-pink-500'},{value:'reflection',label:'Reflection',icon:BookOpen,color:'bg-purple-500'},{value:'goal',label:'Goal',icon:Target,color:'bg-[#1E49C9]'},{value:'dream',label:'Dream',icon:Moon,color:'bg-indigo-500'},{value:'memory',label:'Memory',icon:Star,color:'bg-yellow-500'},{value:'creative',label:'Creative',icon:BookOpen,color:'bg-orange-500'}];const moods=[{value:'excellent',label:'Excellent',color:'bg-[#1E49C9]'},{value:'good',label:'Good',color:'bg-blue-500'},{value:'neutral',label:'Neutral',color:'bg-gray-500'},{value:'bad',label:'Bad',color:'bg-yellow-500'},{value:'terrible',label:'Terrible',color:'bg-red-500'}];const fetchJournal=useCallback(async()=>{try{const response=await fetch(buildApiUrl('/api/journal'),{headers:{'Authorization':\"Bearer \".concat(token)}});const data=await response.json();console.log('Fetched journal data:',data);console.log('Entries:',data.entries);setEntries(data.entries||[]);setLoading(false);}catch(error){console.error('Error fetching journal:',error);toast.error('Failed to load journal');setLoading(false);}},[token]);const fetchStats=useCallback(async()=>{try{const response=await fetch(buildApiUrl('/api/journal/stats'),{headers:{'Authorization':\"Bearer \".concat(token)}});const data=await response.json();setStats(data);}catch(error){console.error('Error fetching stats:',error);}},[token]);// Load user's goals\nconst loadGoals=useCallback(async()=>{try{const response=await fetch(buildApiUrl('/api/goals'),{headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();setGoals(data||[]);}}catch(error){console.error('Error loading goals:',error);}},[token]);// Load user's tasks\nconst loadTasks=useCallback(async()=>{try{let allTasks=[];let page=1;let hasMorePages=true;while(hasMorePages){const response=await fetch(buildApiUrl(\"/api/tasks?limit=100&page=\".concat(page)),{headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();const tasksData=data.tasks||[];allTasks=[...allTasks,...tasksData];hasMorePages=page<data.totalPages;page++;}else{break;}}setTasks(allTasks);}catch(error){console.error('Error loading tasks:',error);}},[token]);// Load user's habits\nconst loadHabits=useCallback(async()=>{try{const response=await fetch(buildApiUrl('/api/habits?all=true'),{headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();setHabits(data||[]);}}catch(error){console.error('Error loading habits:',error);}},[token]);useEffect(()=>{if(token){const loadAllData=async()=>{try{await Promise.all([fetchJournal(),fetchStats(),loadGoals(),loadTasks(),loadHabits()]);}catch(err){console.error('Error loading data:',err);}};loadAllData();}},[token,fetchJournal,fetchStats,loadGoals,loadTasks,loadHabits]);const handleCreateEntry=async e=>{e.preventDefault();if(!newEntry.title.trim()||!newEntry.content.trim()){toast.error('Please fill in all required fields');return;}try{const response=await fetch(buildApiUrl('/api/journal/entries'),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(newEntry)});if(response.ok){var _data$entry;const data=await response.json();console.log('Server response data:',data);console.log('Entry data:',data.entry);console.log('Entry ID:',(_data$entry=data.entry)===null||_data$entry===void 0?void 0:_data$entry._id);// Ensure the entry has an _id before adding to state\nif(data.entry&&data.entry._id){setEntries([data.entry,...entries]);setShowNewEntryForm(false);setNewEntry({title:'',content:'',type:'daily',mood:'neutral',tags:[],isPrivate:false,mindfulnessDimensions:{presence:{rating:0},emotionAwareness:{rating:0},intentionality:{rating:0},attentionQuality:{rating:0},compassion:{rating:0}}});toast.success('Journal entry created successfully!');fetchStats();}else{console.error('Entry missing _id:',data.entry);toast.error('Entry created but missing ID. Refreshing entries...');// Refresh the journal entries to get the latest data with proper IDs\nfetchJournal();}}else{const errorData=await response.json();console.error('Failed to create entry:',errorData);toast.error(errorData.message||'Failed to create entry');}}catch(error){console.error('Error creating entry:',error);toast.error('Failed to create entry');}};const handleDeleteEntry=async entryId=>{try{const response=await fetch(buildApiUrl(\"/api/journal/entries/\".concat(entryId)),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){setEntries(entries.filter(entry=>entry._id!==entryId));toast.success('Entry deleted successfully');fetchStats();}else{toast.error('Failed to delete entry');}}catch(error){console.error('Error deleting entry:',error);toast.error('Failed to delete entry');}};const handleAnalyzeEntry=async entryId=>{console.log('Analyzing entry with ID:',entryId);if(!entryId){toast.error('Entry ID is missing');return;}try{const response=await fetch(buildApiUrl(\"/api/journal/entries/\".concat(entryId,\"/analyze\")),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();// Update the entry in the local state\nsetEntries(entries.map(entry=>entry._id===entryId?_objectSpread(_objectSpread({},entry),{},{alfredAnalysis:data.analysis}):entry));toast.success('Entry analyzed successfully!');}else{toast.error('Failed to analyze entry');}}catch(error){console.error('Error analyzing entry:',error);toast.error('Failed to analyze entry');}};const addTag=()=>{if(tagInput.trim()&&!newEntry.tags.includes(tagInput.trim())){setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{tags:[...newEntry.tags,tagInput.trim()]}));setTagInput('');}};const removeTag=tagToRemove=>{setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{tags:newEntry.tags.filter(tag=>tag!==tagToRemove)}));};// Helper functions for mindfulness checkin\nconst getTasksForGoal=goalId=>{return tasks.filter(task=>task.goalIds&&task.goalIds.includes(goalId));};const getHabitsForGoal=goalId=>{const goalHabits=habits.filter(habit=>{const habitGoalId=habit.goalId;let matches=false;if(typeof habitGoalId==='object'&&habitGoalId!==null){matches=habitGoalId._id===goalId||habitGoalId._id===goalId.toString();}else{matches=habitGoalId===goalId||habitGoalId===goalId.toString()||(habitGoalId===null||habitGoalId===void 0?void 0:habitGoalId.toString())===(goalId===null||goalId===void 0?void 0:goalId.toString());}const isActive=habit.isActive!==false;return matches&&isActive;});return goalHabits;};const getActivitiesForGoal=goalId=>{const goalTasks=getTasksForGoal(goalId);const goalHabits=getHabitsForGoal(goalId);const activities=[...goalTasks.map(task=>_objectSpread(_objectSpread({},task),{},{type:'task',displayName:task.title,duration:task.estimatedDuration||0,isCompleted:task.status==='completed'})),...goalHabits.map(habit=>_objectSpread(_objectSpread({},habit),{},{type:'habit',displayName:habit.habit,duration:habit.valueMin||0,isCompleted:isHabitCompletedToday(habit)}))];return activities;};const isHabitCompletedToday=habit=>{if(!habit.checkins||!Array.isArray(habit.checkins))return false;const today=new Date();today.setHours(0,0,0,0);return habit.checkins.some(checkin=>{const checkinDate=new Date(checkin.date);checkinDate.setHours(0,0,0,0);return checkinDate.getTime()===today.getTime()&&checkin.completed;});};const getTodayTasksForGoal=goalId=>{const today=new Date();const todayStr=today.toISOString().split('T')[0];const completedTasksToday=tasks.filter(task=>task.goalIds&&task.goalIds.includes(goalId)&&task.completedAt&&task.completedAt.split('T')[0]===todayStr);return completedTasksToday;};const getTodayHoursForGoal=goalId=>{const todayTasks=getTodayTasksForGoal(goalId);const taskHours=todayTasks.reduce((total,task)=>{const duration=task.estimatedDuration||0;return total+duration/60;},0);const goalHabits=getHabitsForGoal(goalId);const habitHours=goalHabits.reduce((total,habit)=>{if(isHabitCompletedToday(habit)){const duration=habit.valueMin||0;return total+duration/60;}return total;},0);return taskHours+habitHours;};const handleMindfulnessComplete=()=>{// Refresh data after mindfulness checkin\nfetchJournal();fetchStats();};// Show all entries since filters are removed\nconst filteredEntries=entries;const getTypeIcon=type=>{const typeConfig=entryTypes.find(t=>t.value===type);return typeConfig?typeConfig.icon:BookOpen;};const getMoodColor=mood=>{const moodConfig=moods.find(m=>m.value===mood);return moodConfig?moodConfig.color:'bg-gray-500';};if(loading){return/*#__PURE__*/_jsx(Section,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-[400px]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-text-secondary\",children:\"Loading your journal entries...\"})]})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-[minmax(200px,auto)] [&>*:nth-child(odd)]:animate-fade-in [&>*:nth-child(even)]:animate-fade-in-delayed\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{level:1,className:\"tracking-tight\",children:\"Journal\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-text-secondary mt-2\",children:\"Capture your thoughts, memories, and reflections\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-start gap-4\",children:/*#__PURE__*/_jsxs(Button,{onClick:()=>setShowNewEntryForm(true),variant:\"primary\",className:\"inline-flex items-center\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-5 w-5 mr-2\"}),\"NEW ENTRY\"]})})]})})}),/*#__PURE__*/_jsx(AnimatePresence,{children:showNewEntryForm&&/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-text-primary mb-4 font-jakarta tracking-wide\",children:\"Create New Entry\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateEntry,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(Input,{label:\"Title *\",type:\"text\",value:newEntry.title,onChange:e=>setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{title:e.target.value})),placeholder:\"What's on your mind?\",required:true}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Entry Type\"}),/*#__PURE__*/_jsx(\"select\",{value:newEntry.type,onChange:e=>setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{type:e.target.value})),className:\"input w-full\",children:entryTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type.value,className:\"bg-background-primary text-text-primary\",children:type.label},type.value))})]})]}),/*#__PURE__*/_jsx(Input,{label:\"Your Reflection *\",type:\"textarea\",value:newEntry.content,onChange:e=>setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{content:e.target.value})),rows:6,placeholder:\"Write your thoughts, feelings, or experiences...\",required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-text-primary font-jakarta tracking-wide\",children:\"Mindfulness Check-in\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary\",children:\"Rate each dimension from 1-5 (1 = needs attention, 5 = excellent)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary font-jakarta\",children:\"Presence - How present and aware were you today?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:[1,2,3,4,5].map(rating=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{mindfulnessDimensions:_objectSpread(_objectSpread({},newEntry.mindfulnessDimensions),{},{presence:{rating}})})),className:\"w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors \".concat(newEntry.mindfulnessDimensions.presence.rating===rating?'bg-primary-500 border-primary-500 text-white':'border-border-primary text-text-secondary hover:border-primary-500'),children:rating},rating))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary font-jakarta\",children:\"Emotion Awareness - How well did you recognize and understand your emotions?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:[1,2,3,4,5].map(rating=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{mindfulnessDimensions:_objectSpread(_objectSpread({},newEntry.mindfulnessDimensions),{},{emotionAwareness:{rating}})})),className:\"w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors \".concat(newEntry.mindfulnessDimensions.emotionAwareness.rating===rating?'bg-primary-500 border-primary-500 text-white':'border-border-primary text-text-secondary hover:border-primary-500'),children:rating},rating))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary font-jakarta\",children:\"Intentionality - How intentional and purposeful were your actions?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:[1,2,3,4,5].map(rating=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{mindfulnessDimensions:_objectSpread(_objectSpread({},newEntry.mindfulnessDimensions),{},{intentionality:{rating}})})),className:\"w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors \".concat(newEntry.mindfulnessDimensions.intentionality.rating===rating?'bg-primary-500 border-primary-500 text-white':'border-border-primary text-text-secondary hover:border-primary-500'),children:rating},rating))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary font-jakarta\",children:\"Attention Quality - How focused and undistracted was your attention?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:[1,2,3,4,5].map(rating=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{mindfulnessDimensions:_objectSpread(_objectSpread({},newEntry.mindfulnessDimensions),{},{attentionQuality:{rating}})})),className:\"w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors \".concat(newEntry.mindfulnessDimensions.attentionQuality.rating===rating?'bg-primary-500 border-primary-500 text-white':'border-border-primary text-text-secondary hover:border-primary-500'),children:rating},rating))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary font-jakarta\",children:\"Compassion - How kind and compassionate were you toward yourself and others?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:[1,2,3,4,5].map(rating=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{mindfulnessDimensions:_objectSpread(_objectSpread({},newEntry.mindfulnessDimensions),{},{compassion:{rating}})})),className:\"w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors \".concat(newEntry.mindfulnessDimensions.compassion.rating===rating?'bg-primary-500 border-primary-500 text-white':'border-border-primary text-text-secondary hover:border-primary-500'),children:rating},rating))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Mood\"}),/*#__PURE__*/_jsx(\"select\",{value:newEntry.mood,onChange:e=>setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{mood:e.target.value})),className:\"w-full px-3 py-2 bg-background-primary border border-border-primary rounded-lg text-text-primary focus:border-primary-500 focus:outline-none\",children:moods.map(mood=>/*#__PURE__*/_jsx(\"option\",{value:mood.value,className:\"bg-background-primary text-text-primary\",children:mood.label},mood.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\",children:\"Tags\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tagInput,onChange:e=>setTagInput(e.target.value),onKeyPress:e=>e.key==='Enter'&&(e.preventDefault(),addTag()),className:\"flex-1 px-3 py-2 bg-background-primary border border-border-primary rounded-lg text-text-primary focus:border-primary-500 focus:outline-none\",placeholder:\"Add a tag\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addTag,className:\"px-3 py-2 bg-border-primary border border-l-0 border-border-primary rounded-r-lg hover:bg-border-secondary text-text-primary\",children:\"Add\"})]}),newEntry.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mt-2\",children:newEntry.tags.map(tag=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 bg-primary-100 text-primary-800 text-xs rounded-full\",children:[tag,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeTag(tag),className:\"ml-1 text-primary-600 hover:text-primary-800\",children:\"\\xD7\"})]},tag))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:newEntry.isPrivate,onChange:e=>setNewEntry(_objectSpread(_objectSpread({},newEntry),{},{isPrivate:e.target.checked})),className:\"mr-2 rounded border-border-primary text-primary-500 focus:ring-primary-500 bg-background-primary\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-text-secondary font-jakarta\",children:\"Private entry\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:()=>setShowNewEntryForm(false),variant:\"ghost\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Create Entry\"})]})]})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full\",children:/*#__PURE__*/_jsx(JournalTrends,{})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full\",children:/*#__PURE__*/_jsx(EmotionalJourneyChart,{})})}),stats&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-text-secondary font-jakarta tracking-wide\",children:\"TOTAL ENTRIES\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-text-primary font-mono\",children:stats.totalEntries})]})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-text-secondary font-jakarta tracking-wide\",children:\"CURRENT STREAK\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-text-primary font-mono\",children:[stats.currentStreak,\" days\"]})]})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-text-secondary font-jakarta tracking-wide\",children:\"LONGEST STREAK\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-text-primary font-mono\",children:[stats.longestStreak,\" days\"]})]})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-text-secondary font-jakarta tracking-wide\",children:\"LAST ENTRY\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-text-primary font-mono\",children:stats.lastEntryDate?new Date(stats.lastEntryDate).toLocaleDateString():'Never'})]})})})})})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:showMindfulnessCheckin&&/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-text-primary font-jakarta tracking-wide\",children:\"Mindfulness Check-in\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setShowMindfulnessCheckin(false),variant:\"ghost\",size:\"sm\",children:\"Close\"})]}),/*#__PURE__*/_jsx(MindfulnessCheckin,{onCheckinComplete:handleMindfulnessComplete,goals:goals,getTodayTasksForGoal:getTodayTasksForGoal,getActivitiesForGoal:getActivitiesForGoal,getTodayHoursForGoal:getTodayHoursForGoal})]})})})}),filteredEntries.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{className:\"h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"mx-auto h-12 w-12 text-text-tertiary\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-text-primary font-jakarta tracking-wide\",children:\"No entries yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-text-secondary font-jakarta\",children:filters.type||filters.mood?'Try adjusting your filters':'Get started by creating your first journal entry'})]})})}):filteredEntries.map((entry,index)=>{var _entry$location,_entry$weather;return/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 md:col-span-2 lg:col-span-2 xl:col-span-2\",children:/*#__PURE__*/_jsxs(Card,{className:\"h-full overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-lg \".concat(getTypeIcon(entry.type).color,\" bg-opacity-20\"),children:/*#__PURE__*/React.createElement(getTypeIcon(entry.type),{className:\"h-5 w-5 text-text-primary\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-text-primary font-jakarta tracking-wide\",children:entry.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-text-secondary font-jakarta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"capitalize\",children:entry.type}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(entry.createdAt).toLocaleDateString()}),entry.isPrivate&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2022\"}),/*#__PURE__*/_jsx(EyeOff,{className:\"h-4 w-4 inline\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Private\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(getMoodColor(entry.mood))}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-text-secondary capitalize font-jakarta\",children:entry.mood})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"prose max-w-none mb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-text-secondary whitespace-pre-wrap font-jakarta\",children:entry.content})}),entry._id?/*#__PURE__*/_jsx(AlfredAnalysis,{analysis:entry.alfredAnalysis,entryId:entry._id,onAnalyze:handleAnalyzeEntry}):/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-4 bg-yellow-800 border border-yellow-600 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-yellow-400 rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-yellow-300 text-sm\",children:\"Entry is being processed. Analysis will be available shortly.\"})]})}),entry.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mb-4\",children:entry.tags.map(tag=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 bg-border-primary text-text-primary text-xs rounded-full\",children:[/*#__PURE__*/_jsx(Tag,{className:\"h-3 w-3 mr-1\"}),tag]},tag))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-text-secondary font-jakarta\",children:[((_entry$location=entry.location)===null||_entry$location===void 0?void 0:_entry$location.city)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-4 w-4 mr-1\"}),entry.location.city]}),((_entry$weather=entry.weather)===null||_entry$weather===void 0?void 0:_entry$weather.condition)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Cloud,{className:\"h-4 w-4 mr-1\"}),entry.weather.condition]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteEntry(entry._id),className:\"p-2 text-text-secondary hover:text-red-400 transition-colors duration-200\",title:\"Delete entry\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4\"})})})]})]})},entry._id);})]})});};export default Journal;","map":{"version":3,"names":["React","useState","useEffect","useCallback","motion","AnimatePresence","Plus","BookOpen","Heart","Target","Moon","Star","Calendar","Tag","MapPin","Cloud","Edit3","Trash2","Eye","EyeOff","useAuth","toast","AlfredAnalysis","JournalTrends","EmotionalJourneyChart","MindfulnessCheckin","buildApiUrl","Button","Input","Card","Section","Header","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Journal","token","entries","setEntries","showNewEntryForm","setShowNewEntryForm","showMindfulnessCheckin","setShowMindfulnessCheckin","loading","setLoading","stats","setStats","goals","setGoals","tasks","setTasks","habits","setHabits","filters","setFilters","type","mood","tags","newEntry","setNewEntry","title","content","isPrivate","mindfulnessDimensions","presence","rating","emotionAwareness","intentionality","attentionQuality","compassion","tagInput","setTagInput","entryTypes","value","label","icon","color","moods","fetchJournal","response","fetch","headers","concat","data","json","console","log","error","fetchStats","loadGoals","ok","loadTasks","allTasks","page","hasMorePages","tasksData","totalPages","loadHabits","loadAllData","Promise","all","err","handleCreateEntry","e","preventDefault","trim","method","body","JSON","stringify","_data$entry","entry","_id","success","errorData","message","handleDeleteEntry","entryId","filter","handleAnalyzeEntry","map","_objectSpread","alfredAnalysis","analysis","addTag","includes","removeTag","tagToRemove","tag","getTasksForGoal","goalId","task","goalIds","getHabitsForGoal","goalHabits","habit","habitGoalId","matches","toString","isActive","getActivitiesForGoal","goalTasks","activities","displayName","duration","estimatedDuration","isCompleted","status","valueMin","isHabitCompletedToday","checkins","Array","isArray","today","Date","setHours","some","checkin","checkinDate","date","getTime","completed","getTodayTasksForGoal","todayStr","toISOString","split","completedTasksToday","completedAt","getTodayHoursForGoal","todayTasks","taskHours","reduce","total","habitHours","handleMindfulnessComplete","filteredEntries","getTypeIcon","typeConfig","find","t","getMoodColor","moodConfig","m","children","className","level","onClick","variant","onSubmit","onChange","target","placeholder","required","rows","onKeyPress","key","length","checked","totalEntries","currentStreak","longestStreak","lastEntryDate","toLocaleDateString","size","onCheckinComplete","index","_entry$location","_entry$weather","createElement","createdAt","onAnalyze","location","city","weather","condition"],"sources":["/Users/priyas/Desktop/untangle-platform/src/pages/Journal.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Plus, \n  BookOpen, \n  Heart, \n  Target, \n  Moon, \n  Star, \n  Calendar, \n  Tag, \n  MapPin, \n  Cloud,\n  Edit3,\n  Trash2,\n  Eye,\n  EyeOff\n} from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\nimport toast from 'react-hot-toast';\nimport AlfredAnalysis from '../components/journal/AlfredAnalysis';\nimport JournalTrends from '../components/journal/JournalTrends';\nimport EmotionalJourneyChart from '../components/journal/EmotionalJourneyChart';\nimport MindfulnessCheckin from '../components/mindfulness/MindfulnessCheckin';\nimport { buildApiUrl } from '../config';\nimport { Button, Input, Card, Section, Header } from '../components/ui';\n\nconst Journal = () => {\n  const { token } = useAuth();\n  const [entries, setEntries] = useState([]);\n  const [showNewEntryForm, setShowNewEntryForm] = useState(false);\n  const [showMindfulnessCheckin, setShowMindfulnessCheckin] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [stats, setStats] = useState(null);\n  const [goals, setGoals] = useState([]);\n  const [tasks, setTasks] = useState([]);\n  const [habits, setHabits] = useState([]);\n  const [filters, setFilters] = useState({\n    type: '',\n    mood: '',\n    tags: []\n  });\n\n  // New entry form state\n  const [newEntry, setNewEntry] = useState({\n    title: '',\n    content: '',\n    type: 'daily',\n    mood: 'neutral',\n    tags: [],\n    isPrivate: false,\n    // Mindfulness dimensions\n    mindfulnessDimensions: {\n      presence: { rating: 0 },\n      emotionAwareness: { rating: 0 },\n      intentionality: { rating: 0 },\n      attentionQuality: { rating: 0 },\n      compassion: { rating: 0 }\n    }\n  });\n\n  const [tagInput, setTagInput] = useState('');\n\n  const entryTypes = [\n    { value: 'daily', label: 'Daily', icon: Calendar, color: 'bg-blue-500' },\n    { value: 'gratitude', label: 'Gratitude', icon: Heart, color: 'bg-pink-500' },\n    { value: 'reflection', label: 'Reflection', icon: BookOpen, color: 'bg-purple-500' },\n    { value: 'goal', label: 'Goal', icon: Target, color: 'bg-[#1E49C9]' },\n    { value: 'dream', label: 'Dream', icon: Moon, color: 'bg-indigo-500' },\n    { value: 'memory', label: 'Memory', icon: Star, color: 'bg-yellow-500' },\n    { value: 'creative', label: 'Creative', icon: BookOpen, color: 'bg-orange-500' }\n  ];\n\n  const moods = [\n    { value: 'excellent', label: 'Excellent', color: 'bg-[#1E49C9]' },\n    { value: 'good', label: 'Good', color: 'bg-blue-500' },\n    { value: 'neutral', label: 'Neutral', color: 'bg-gray-500' },\n    { value: 'bad', label: 'Bad', color: 'bg-yellow-500' },\n    { value: 'terrible', label: 'Terrible', color: 'bg-red-500' }\n  ];\n\n  const fetchJournal = useCallback(async () => {\n    try {\n      const response = await fetch(buildApiUrl('/api/journal'), {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const data = await response.json();\n      console.log('Fetched journal data:', data);\n      console.log('Entries:', data.entries);\n      setEntries(data.entries || []);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching journal:', error);\n      toast.error('Failed to load journal');\n      setLoading(false);\n    }\n  }, [token]);\n\n  const fetchStats = useCallback(async () => {\n    try {\n      const response = await fetch(buildApiUrl('/api/journal/stats'), {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const data = await response.json();\n      setStats(data);\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n    }\n  }, [token]);\n\n  // Load user's goals\n  const loadGoals = useCallback(async () => {\n    try {\n      const response = await fetch(buildApiUrl('/api/goals'), {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setGoals(data || []);\n      }\n    } catch (error) {\n      console.error('Error loading goals:', error);\n    }\n  }, [token]);\n\n  // Load user's tasks\n  const loadTasks = useCallback(async () => {\n    try {\n      let allTasks = [];\n      let page = 1;\n      let hasMorePages = true;\n      \n      while (hasMorePages) {\n        const response = await fetch(buildApiUrl(`/api/tasks?limit=100&page=${page}`), {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          const tasksData = data.tasks || [];\n          allTasks = [...allTasks, ...tasksData];\n          hasMorePages = page < data.totalPages;\n          page++;\n        } else {\n          break;\n        }\n      }\n      \n      setTasks(allTasks);\n    } catch (error) {\n      console.error('Error loading tasks:', error);\n    }\n  }, [token]);\n\n  // Load user's habits\n  const loadHabits = useCallback(async () => {\n    try {\n      const response = await fetch(buildApiUrl('/api/habits?all=true'), {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setHabits(data || []);\n      }\n    } catch (error) {\n      console.error('Error loading habits:', error);\n    }\n  }, [token]);\n\n  useEffect(() => {\n    if (token) {\n      const loadAllData = async () => {\n        try {\n          await Promise.all([\n            fetchJournal(),\n            fetchStats(),\n            loadGoals(),\n            loadTasks(),\n            loadHabits()\n          ]);\n        } catch (err) {\n          console.error('Error loading data:', err);\n        }\n      };\n      \n      loadAllData();\n    }\n  }, [token, fetchJournal, fetchStats, loadGoals, loadTasks, loadHabits]);\n\n  const handleCreateEntry = async (e) => {\n    e.preventDefault();\n    \n    if (!newEntry.title.trim() || !newEntry.content.trim()) {\n      toast.error('Please fill in all required fields');\n      return;\n    }\n\n    try {\n      const response = await fetch(buildApiUrl('/api/journal/entries'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(newEntry)\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log('Server response data:', data);\n        console.log('Entry data:', data.entry);\n        console.log('Entry ID:', data.entry?._id);\n        \n        // Ensure the entry has an _id before adding to state\n        if (data.entry && data.entry._id) {\n          setEntries([data.entry, ...entries]);\n          setShowNewEntryForm(false);\n          setNewEntry({\n            title: '',\n            content: '',\n            type: 'daily',\n            mood: 'neutral',\n            tags: [],\n            isPrivate: false,\n            mindfulnessDimensions: {\n              presence: { rating: 0 },\n              emotionAwareness: { rating: 0 },\n              intentionality: { rating: 0 },\n              attentionQuality: { rating: 0 },\n              compassion: { rating: 0 }\n            }\n          });\n          toast.success('Journal entry created successfully!');\n          fetchStats();\n        } else {\n          console.error('Entry missing _id:', data.entry);\n          toast.error('Entry created but missing ID. Refreshing entries...');\n          // Refresh the journal entries to get the latest data with proper IDs\n          fetchJournal();\n        }\n      } else {\n        const errorData = await response.json();\n        console.error('Failed to create entry:', errorData);\n        toast.error(errorData.message || 'Failed to create entry');\n      }\n    } catch (error) {\n      console.error('Error creating entry:', error);\n      toast.error('Failed to create entry');\n    }\n  };\n\n  const handleDeleteEntry = async (entryId) => {\n    try {\n      const response = await fetch(buildApiUrl(`/api/journal/entries/${entryId}`), {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        setEntries(entries.filter(entry => entry._id !== entryId));\n        toast.success('Entry deleted successfully');\n        fetchStats();\n      } else {\n        toast.error('Failed to delete entry');\n      }\n    } catch (error) {\n      console.error('Error deleting entry:', error);\n      toast.error('Failed to delete entry');\n    }\n  };\n\n  const handleAnalyzeEntry = async (entryId) => {\n    console.log('Analyzing entry with ID:', entryId);\n    if (!entryId) {\n      toast.error('Entry ID is missing');\n      return;\n    }\n    \n    try {\n      const response = await fetch(buildApiUrl(`/api/journal/entries/${entryId}/analyze`), {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        // Update the entry in the local state\n        setEntries(entries.map(entry => \n          entry._id === entryId \n            ? { ...entry, alfredAnalysis: data.analysis }\n            : entry\n        ));\n        toast.success('Entry analyzed successfully!');\n      } else {\n        toast.error('Failed to analyze entry');\n      }\n    } catch (error) {\n      console.error('Error analyzing entry:', error);\n      toast.error('Failed to analyze entry');\n    }\n  };\n\n  const addTag = () => {\n    if (tagInput.trim() && !newEntry.tags.includes(tagInput.trim())) {\n      setNewEntry({\n        ...newEntry,\n        tags: [...newEntry.tags, tagInput.trim()]\n      });\n      setTagInput('');\n    }\n  };\n\n  const removeTag = (tagToRemove) => {\n    setNewEntry({\n      ...newEntry,\n      tags: newEntry.tags.filter(tag => tag !== tagToRemove)\n    });\n  };\n\n  // Helper functions for mindfulness checkin\n  const getTasksForGoal = (goalId) => {\n    return tasks.filter(task => \n      task.goalIds && \n      task.goalIds.includes(goalId)\n    );\n  };\n\n  const getHabitsForGoal = (goalId) => {\n    const goalHabits = habits.filter(habit => {\n      const habitGoalId = habit.goalId;\n      let matches = false;\n      \n      if (typeof habitGoalId === 'object' && habitGoalId !== null) {\n        matches = habitGoalId._id === goalId || habitGoalId._id === goalId.toString();\n      } else {\n        matches = habitGoalId === goalId || habitGoalId === goalId.toString() || habitGoalId?.toString() === goalId?.toString();\n      }\n      \n      const isActive = habit.isActive !== false;\n      return matches && isActive;\n    });\n    return goalHabits;\n  };\n\n  const getActivitiesForGoal = (goalId) => {\n    const goalTasks = getTasksForGoal(goalId);\n    const goalHabits = getHabitsForGoal(goalId);\n    \n    const activities = [\n      ...goalTasks.map(task => ({\n        ...task,\n        type: 'task',\n        displayName: task.title,\n        duration: task.estimatedDuration || 0,\n        isCompleted: task.status === 'completed'\n      })),\n      ...goalHabits.map(habit => ({\n        ...habit,\n        type: 'habit',\n        displayName: habit.habit,\n        duration: habit.valueMin || 0,\n        isCompleted: isHabitCompletedToday(habit)\n      }))\n    ];\n    \n    return activities;\n  };\n\n  const isHabitCompletedToday = (habit) => {\n    if (!habit.checkins || !Array.isArray(habit.checkins)) return false;\n    \n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    return habit.checkins.some(checkin => {\n      const checkinDate = new Date(checkin.date);\n      checkinDate.setHours(0, 0, 0, 0);\n      return checkinDate.getTime() === today.getTime() && checkin.completed;\n    });\n  };\n\n  const getTodayTasksForGoal = (goalId) => {\n    const today = new Date();\n    const todayStr = today.toISOString().split('T')[0];\n\n    const completedTasksToday = tasks.filter((task) =>\n      task.goalIds &&\n      task.goalIds.includes(goalId) &&\n      task.completedAt &&\n      task.completedAt.split('T')[0] === todayStr\n    );\n\n    return completedTasksToday;\n  };\n\n  const getTodayHoursForGoal = (goalId) => {\n    const todayTasks = getTodayTasksForGoal(goalId);\n    const taskHours = todayTasks.reduce((total, task) => {\n      const duration = task.estimatedDuration || 0;\n      return total + duration / 60;\n    }, 0);\n\n    const goalHabits = getHabitsForGoal(goalId);\n    const habitHours = goalHabits.reduce((total, habit) => {\n      if (isHabitCompletedToday(habit)) {\n        const duration = habit.valueMin || 0;\n        return total + duration / 60;\n      }\n      return total;\n    }, 0);\n\n    return taskHours + habitHours;\n  };\n\n  const handleMindfulnessComplete = () => {\n    // Refresh data after mindfulness checkin\n    fetchJournal();\n    fetchStats();\n  };\n\n  // Show all entries since filters are removed\n  const filteredEntries = entries;\n\n  const getTypeIcon = (type) => {\n    const typeConfig = entryTypes.find(t => t.value === type);\n    return typeConfig ? typeConfig.icon : BookOpen;\n  };\n\n  const getMoodColor = (mood) => {\n    const moodConfig = moods.find(m => m.value === mood);\n    return moodConfig ? moodConfig.color : 'bg-gray-500';\n  };\n\n  if (loading) {\n    return (\n      <Section>\n        <div className=\"flex items-center justify-center min-h-[400px]\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4\"></div>\n            <p className=\"text-text-secondary\">Loading your journal entries...</p>\n          </div>\n        </div>\n      </Section>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      {/* Bento Grid Layout - Pinterest Style */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-[minmax(200px,auto)] [&>*:nth-child(odd)]:animate-fade-in [&>*:nth-child(even)]:animate-fade-in-delayed\">\n        \n        {/* Header Card - Full Width */}\n        <div className=\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\">\n          <Card className=\"h-full\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <Header level={1} className=\"tracking-tight\">Journal</Header>\n                  <p className=\"text-text-secondary mt-2\">Capture your thoughts, memories, and reflections</p>\n                </div>\n              </div>\n              \n              {/* Action Bar */}\n              <div className=\"flex justify-start gap-4\">\n                <Button\n                  onClick={() => setShowNewEntryForm(true)}\n                  variant=\"primary\"\n                  className=\"inline-flex items-center\"\n                >\n                  <Plus className=\"h-5 w-5 mr-2\" />\n                  NEW ENTRY\n                </Button>\n              </div>\n            </div>\n          </Card>\n        </div>\n\n        {/* New Entry Form - Full Width - Appears right after title */}\n        <AnimatePresence>\n          {showNewEntryForm && (\n            <div className=\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\">\n              <Card className=\"h-full\">\n                <div className=\"p-6\">\n                  <h3 className=\"text-lg font-semibold text-text-primary mb-4 font-jakarta tracking-wide\">Create New Entry</h3>\n              \n              <form onSubmit={handleCreateEntry} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <Input\n                    label=\"Title *\"\n                    type=\"text\"\n                    value={newEntry.title}\n                    onChange={(e) => setNewEntry({ ...newEntry, title: e.target.value })}\n                    placeholder=\"What's on your mind?\"\n                    required\n                  />\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                      Entry Type\n                    </label>\n                    <select\n                      value={newEntry.type}\n                      onChange={(e) => setNewEntry({ ...newEntry, type: e.target.value })}\n                      className=\"input w-full\"\n                    >\n                      {entryTypes.map(type => (\n                        <option key={type.value} value={type.value} className=\"bg-background-primary text-text-primary\">{type.label}</option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n\n                <Input\n                  label=\"Your Reflection *\"\n                  type=\"textarea\"\n                  value={newEntry.content}\n                  onChange={(e) => setNewEntry({ ...newEntry, content: e.target.value })}\n                  rows={6}\n                  placeholder=\"Write your thoughts, feelings, or experiences...\"\n                  required\n                />\n\n                {/* Mindfulness Dimensions */}\n                <div className=\"space-y-6\">\n                  <h4 className=\"text-lg font-semibold text-text-primary font-jakarta tracking-wide\">Mindfulness Check-in</h4>\n                  <p className=\"text-sm text-text-secondary\">Rate each dimension from 1-5 (1 = needs attention, 5 = excellent)</p>\n                  \n                  {/* Presence */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium text-text-secondary font-jakarta\">\n                      Presence - How present and aware were you today?\n                    </label>\n                    <div className=\"flex space-x-2\">\n                      {[1, 2, 3, 4, 5].map((rating) => (\n                        <button\n                          key={rating}\n                          type=\"button\"\n                          onClick={() => setNewEntry({\n                            ...newEntry,\n                            mindfulnessDimensions: {\n                              ...newEntry.mindfulnessDimensions,\n                              presence: { rating }\n                            }\n                          })}\n                          className={`w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors ${\n                            newEntry.mindfulnessDimensions.presence.rating === rating\n                              ? 'bg-primary-500 border-primary-500 text-white'\n                              : 'border-border-primary text-text-secondary hover:border-primary-500'\n                          }`}\n                        >\n                          {rating}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Emotion Awareness */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium text-text-secondary font-jakarta\">\n                      Emotion Awareness - How well did you recognize and understand your emotions?\n                    </label>\n                    <div className=\"flex space-x-2\">\n                      {[1, 2, 3, 4, 5].map((rating) => (\n                        <button\n                          key={rating}\n                          type=\"button\"\n                          onClick={() => setNewEntry({\n                            ...newEntry,\n                            mindfulnessDimensions: {\n                              ...newEntry.mindfulnessDimensions,\n                              emotionAwareness: { rating }\n                            }\n                          })}\n                          className={`w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors ${\n                            newEntry.mindfulnessDimensions.emotionAwareness.rating === rating\n                              ? 'bg-primary-500 border-primary-500 text-white'\n                              : 'border-border-primary text-text-secondary hover:border-primary-500'\n                          }`}\n                        >\n                          {rating}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Intentionality */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium text-text-secondary font-jakarta\">\n                      Intentionality - How intentional and purposeful were your actions?\n                    </label>\n                    <div className=\"flex space-x-2\">\n                      {[1, 2, 3, 4, 5].map((rating) => (\n                        <button\n                          key={rating}\n                          type=\"button\"\n                          onClick={() => setNewEntry({\n                            ...newEntry,\n                            mindfulnessDimensions: {\n                              ...newEntry.mindfulnessDimensions,\n                              intentionality: { rating }\n                            }\n                          })}\n                          className={`w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors ${\n                            newEntry.mindfulnessDimensions.intentionality.rating === rating\n                              ? 'bg-primary-500 border-primary-500 text-white'\n                              : 'border-border-primary text-text-secondary hover:border-primary-500'\n                          }`}\n                        >\n                          {rating}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Attention Quality */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium text-text-secondary font-jakarta\">\n                      Attention Quality - How focused and undistracted was your attention?\n                    </label>\n                    <div className=\"flex space-x-2\">\n                      {[1, 2, 3, 4, 5].map((rating) => (\n                        <button\n                          key={rating}\n                          type=\"button\"\n                          onClick={() => setNewEntry({\n                            ...newEntry,\n                            mindfulnessDimensions: {\n                              ...newEntry.mindfulnessDimensions,\n                              attentionQuality: { rating }\n                            }\n                          })}\n                          className={`w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors ${\n                            newEntry.mindfulnessDimensions.attentionQuality.rating === rating\n                              ? 'bg-primary-500 border-primary-500 text-white'\n                              : 'border-border-primary text-text-secondary hover:border-primary-500'\n                          }`}\n                        >\n                          {rating}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Compassion */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium text-text-secondary font-jakarta\">\n                      Compassion - How kind and compassionate were you toward yourself and others?\n                    </label>\n                    <div className=\"flex space-x-2\">\n                      {[1, 2, 3, 4, 5].map((rating) => (\n                        <button\n                          key={rating}\n                          type=\"button\"\n                          onClick={() => setNewEntry({\n                            ...newEntry,\n                            mindfulnessDimensions: {\n                              ...newEntry.mindfulnessDimensions,\n                              compassion: { rating }\n                            }\n                          })}\n                          className={`w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors ${\n                            newEntry.mindfulnessDimensions.compassion.rating === rating\n                              ? 'bg-primary-500 border-primary-500 text-white'\n                              : 'border-border-primary text-text-secondary hover:border-primary-500'\n                          }`}\n                        >\n                          {rating}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                      Mood\n                    </label>\n                    <select\n                      value={newEntry.mood}\n                      onChange={(e) => setNewEntry({ ...newEntry, mood: e.target.value })}\n                      className=\"w-full px-3 py-2 bg-background-primary border border-border-primary rounded-lg text-text-primary focus:border-primary-500 focus:outline-none\"\n                    >\n                      {moods.map(mood => (\n                        <option key={mood.value} value={mood.value} className=\"bg-background-primary text-text-primary\">{mood.label}</option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta\">\n                      Tags\n                    </label>\n                    <div className=\"flex\">\n                      <input\n                        type=\"text\"\n                        value={tagInput}\n                        onChange={(e) => setTagInput(e.target.value)}\n                        onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addTag())}\n                        className=\"flex-1 px-3 py-2 bg-background-primary border border-border-primary rounded-lg text-text-primary focus:border-primary-500 focus:outline-none\"\n                        placeholder=\"Add a tag\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={addTag}\n                        className=\"px-3 py-2 bg-border-primary border border-l-0 border-border-primary rounded-r-lg hover:bg-border-secondary text-text-primary\"\n                      >\n                        Add\n                      </button>\n                    </div>\n                    {newEntry.tags.length > 0 && (\n                      <div className=\"flex flex-wrap gap-2 mt-2\">\n                        {newEntry.tags.map(tag => (\n                          <span\n                            key={tag}\n                            className=\"inline-flex items-center px-2 py-1 bg-primary-100 text-primary-800 text-xs rounded-full\"\n                          >\n                            {tag}\n                            <button\n                              type=\"button\"\n                              onClick={() => removeTag(tag)}\n                              className=\"ml-1 text-primary-600 hover:text-primary-800\"\n                            >\n                              ×\n                            </button>\n                          </span>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"flex items-center\">\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        checked={newEntry.isPrivate}\n                        onChange={(e) => setNewEntry({ ...newEntry, isPrivate: e.target.checked })}\n                        className=\"mr-2 rounded border-border-primary text-primary-500 focus:ring-primary-500 bg-background-primary\"\n                      />\n                      <span className=\"text-sm text-text-secondary font-jakarta\">Private entry</span>\n                    </label>\n                  </div>\n                </div>\n\n                <div className=\"flex justify-end space-x-3\">\n                  <Button\n                    type=\"button\"\n                    onClick={() => setShowNewEntryForm(false)}\n                    variant=\"ghost\"\n                  >\n                    Cancel\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    variant=\"primary\"\n                  >\n                    Create Entry\n                  </Button>\n                  </div>\n                </form>\n                </div>\n              </Card>\n            </div>\n          )}\n        </AnimatePresence>\n\n        {/* Alfred's Trend Analysis - Full Width */}\n        <div className=\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\">\n          <div className=\"h-full\">\n            <JournalTrends />\n          </div>\n        </div>\n\n        {/* Emotional Journey Chart - Full Width */}\n        <div className=\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\">\n          <div className=\"h-full\">\n            <EmotionalJourneyChart />\n          </div>\n        </div>\n\n        {/* Stats Overview Cards */}\n        {stats && (\n          <>\n            <div className=\"col-span-1\">\n              <Card className=\"h-full\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-center\">\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-text-secondary font-jakarta tracking-wide\">TOTAL ENTRIES</p>\n                      <p className=\"text-2xl font-bold text-text-primary font-mono\">{stats.totalEntries}</p>\n                    </div>\n                  </div>\n                </div>\n              </Card>\n            </div>\n\n            <div className=\"col-span-1\">\n              <Card className=\"h-full\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-center\">\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-text-secondary font-jakarta tracking-wide\">CURRENT STREAK</p>\n                      <p className=\"text-2xl font-bold text-text-primary font-mono\">{stats.currentStreak} days</p>\n                    </div>\n                  </div>\n                </div>\n              </Card>\n            </div>\n\n            <div className=\"col-span-1\">\n              <Card className=\"h-full\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-center\">\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-text-secondary font-jakarta tracking-wide\">LONGEST STREAK</p>\n                      <p className=\"text-2xl font-bold text-text-primary font-mono\">{stats.longestStreak} days</p>\n                    </div>\n                  </div>\n                </div>\n              </Card>\n            </div>\n\n            <div className=\"col-span-1\">\n              <Card className=\"h-full\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-center\">\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-text-secondary font-jakarta tracking-wide\">LAST ENTRY</p>\n                      <p className=\"text-lg font-bold text-text-primary font-mono\">\n                        {stats.lastEntryDate ? new Date(stats.lastEntryDate).toLocaleDateString() : 'Never'}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </Card>\n            </div>\n          </>\n        )}\n\n        {/* Mindfulness Check-in - Full Width */}\n        <AnimatePresence>\n          {showMindfulnessCheckin && (\n            <div className=\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\">\n              <Card className=\"h-full\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-center justify-between mb-6\">\n                    <h3 className=\"text-lg font-semibold text-text-primary font-jakarta tracking-wide\">Mindfulness Check-in</h3>\n                    <Button\n                      onClick={() => setShowMindfulnessCheckin(false)}\n                      variant=\"ghost\"\n                      size=\"sm\"\n                    >\n                      Close\n                    </Button>\n                  </div>\n                  <MindfulnessCheckin \n                    onCheckinComplete={handleMindfulnessComplete}\n                    goals={goals}\n                    getTodayTasksForGoal={getTodayTasksForGoal}\n                    getActivitiesForGoal={getActivitiesForGoal}\n                    getTodayHoursForGoal={getTodayHoursForGoal}\n                  />\n                </div>\n              </Card>\n            </div>\n          )}\n        </AnimatePresence>\n\n        {/* Journal Entries */}\n        {filteredEntries.length === 0 ? (\n          <div className=\"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4\">\n            <Card className=\"h-full\">\n              <div className=\"text-center py-12\">\n                <BookOpen className=\"mx-auto h-12 w-12 text-text-tertiary\" />\n                <h3 className=\"mt-2 text-sm font-medium text-text-primary font-jakarta tracking-wide\">No entries yet</h3>\n                <p className=\"mt-1 text-sm text-text-secondary font-jakarta\">\n                  {filters.type || filters.mood ? 'Try adjusting your filters' : 'Get started by creating your first journal entry'}\n                </p>\n              </div>\n            </Card>\n          </div>\n        ) : (\n          filteredEntries.map((entry, index) => (\n            <div key={entry._id} className=\"col-span-1 md:col-span-2 lg:col-span-2 xl:col-span-2\">\n              <Card className=\"h-full overflow-hidden\">\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className={`p-2 rounded-lg ${getTypeIcon(entry.type).color} bg-opacity-20`}>\n                        {React.createElement(getTypeIcon(entry.type), { className: \"h-5 w-5 text-text-primary\" })}\n                      </div>\n                      <div>\n                        <h3 className=\"text-lg font-semibold text-text-primary font-jakarta tracking-wide\">{entry.title}</h3>\n                        <div className=\"flex items-center space-x-4 text-sm text-text-secondary font-jakarta\">\n                          <span className=\"capitalize\">{entry.type}</span>\n                          <span>•</span>\n                          <span>{new Date(entry.createdAt).toLocaleDateString()}</span>\n                          {entry.isPrivate && (\n                            <>\n                              <span>•</span>\n                              <EyeOff className=\"h-4 w-4 inline\" />\n                              <span>Private</span>\n                            </>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center space-x-2\">\n                      <div className={`w-3 h-3 rounded-full ${getMoodColor(entry.mood)}`}></div>\n                      <span className=\"text-sm text-text-secondary capitalize font-jakarta\">{entry.mood}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"prose max-w-none mb-4\">\n                    <p className=\"text-text-secondary whitespace-pre-wrap font-jakarta\">{entry.content}</p>\n                  </div>\n\n                  {/* Alfred Analysis */}\n                  {entry._id ? (\n                    <AlfredAnalysis \n                      analysis={entry.alfredAnalysis} \n                      entryId={entry._id}\n                      onAnalyze={handleAnalyzeEntry}\n                    />\n                  ) : (\n                    <div className=\"mt-4 p-4 bg-yellow-800 border border-yellow-600 rounded-lg\">\n                      <div className=\"flex items-center space-x-2\">\n                        <div className=\"w-2 h-2 bg-yellow-400 rounded-full animate-pulse\"></div>\n                        <p className=\"text-yellow-300 text-sm\">Entry is being processed. Analysis will be available shortly.</p>\n                      </div>\n                    </div>\n                  )}\n\n                  {entry.tags.length > 0 && (\n                    <div className=\"flex flex-wrap gap-2 mb-4\">\n                      {entry.tags.map(tag => (\n                        <span\n                          key={tag}\n                          className=\"inline-flex items-center px-2 py-1 bg-border-primary text-text-primary text-xs rounded-full\"\n                        >\n                          <Tag className=\"h-3 w-3 mr-1\" />\n                          {tag}\n                        </span>\n                      ))}\n                    </div>\n                  )}\n\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-4 text-sm text-text-secondary font-jakarta\">\n                      {entry.location?.city && (\n                        <div className=\"flex items-center\">\n                          <MapPin className=\"h-4 w-4 mr-1\" />\n                          {entry.location.city}\n                        </div>\n                      )}\n                      {entry.weather?.condition && (\n                        <div className=\"flex items-center\">\n                          <Cloud className=\"h-4 w-4 mr-1\" />\n                          {entry.weather.condition}\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"flex items-center space-x-2\">\n                      <button\n                        onClick={() => handleDeleteEntry(entry._id)}\n                        className=\"p-2 text-text-secondary hover:text-red-400 transition-colors duration-200\"\n                        title=\"Delete entry\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n              </Card>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Journal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}