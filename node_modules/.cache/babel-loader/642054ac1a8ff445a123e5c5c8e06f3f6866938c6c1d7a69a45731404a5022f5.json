{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{motion}from'framer-motion';import{TrendingUp,TrendingDown,Minus,BarChart3,Heart,Lightbulb,Brain,RefreshCw}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{buildApiUrl}from'../../config';import toast from'react-hot-toast';import Card from'../ui/Card';import{SafeRender}from'../ui';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const JournalTrends=()=>{const{token}=useAuth();const[trends,setTrends]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[hasAttemptedFetch,setHasAttemptedFetch]=useState(false);const fetchTrends=useCallback(async function(){let forceRefresh=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!token||loading)return;setLoading(true);setError(null);try{const url=forceRefresh?buildApiUrl('/api/journal/trends/refresh'):buildApiUrl('/api/journal/trends?limit=50');const method=forceRefresh?'POST':'GET';const body=forceRefresh?JSON.stringify({timeRange:'month',limit:50}):undefined;const response=await fetch(url,{method,headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body});if(response.ok){var _data$trendAnalysis,_data$trendAnalysis$e,_data$trendAnalysis2,_data$trendAnalysis2$;const data=await response.json();console.log('JournalTrends: Received trends data:',data);console.log('JournalTrends: Evolving beliefs count:',((_data$trendAnalysis=data.trendAnalysis)===null||_data$trendAnalysis===void 0?void 0:(_data$trendAnalysis$e=_data$trendAnalysis.evolvingBeliefs)===null||_data$trendAnalysis$e===void 0?void 0:_data$trendAnalysis$e.length)||0);console.log('JournalTrends: Common topics count:',((_data$trendAnalysis2=data.trendAnalysis)===null||_data$trendAnalysis2===void 0?void 0:(_data$trendAnalysis2$=_data$trendAnalysis2.commonTopics)===null||_data$trendAnalysis2$===void 0?void 0:_data$trendAnalysis2$.length)||0);setTrends(data.trendAnalysis);setError(null);// Show success message for refresh\nif(forceRefresh){toast.success('Trends refreshed successfully');}}else{const errorData=await response.json().catch(()=>({}));const errorMessage=errorData.message||'Failed to fetch trends';setError(errorMessage);// Only show toast error once\nif(!hasAttemptedFetch){toast.error(errorMessage);}}}catch(error){console.error('Error fetching trends:',error);setError('Network error');// Only show toast error once\nif(!hasAttemptedFetch){toast.error('Failed to fetch trends');}}finally{setLoading(false);setHasAttemptedFetch(true);}},[token,loading,hasAttemptedFetch]);useEffect(()=>{if(token&&!hasAttemptedFetch){fetchTrends();}},[token,fetchTrends,hasAttemptedFetch]);const getTrendIcon=trend=>{switch(trend){case'improving':return TrendingUp;case'declining':return TrendingDown;case'volatile':return BarChart3;default:return Minus;}};const getTrendColor=trend=>{switch(trend){case'improving':return'text-[#1E49C9]';case'declining':return'text-orange-400';case'volatile':return'text-purple-400';default:return'text-blue-400';}};const getTrendBgColor=trend=>{switch(trend){case'improving':return'bg-[#1E49C9]';case'declining':return'bg-orange-500';case'volatile':return'bg-purple-500';default:return'bg-blue-500';}};const getTrendLabel=trend=>{switch(trend){case'improving':return'Growing Strong';case'declining':return'Learning & Growing';case'volatile':return'Dynamic Journey';default:return'Steady Progress';}};if(!trends&&!error&&!loading){return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Brain,{className:\"h-12 w-12 text-text-secondary mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchTrends,disabled:loading,className:\"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-500/90 transition-colors duration-200 disabled:opacity-50 font-jakarta leading-relaxed tracking-wider\",children:loading?'Loading...':'Load Trends'})]})})});}if(loading){return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-text-secondary\",children:\"Loading journal trends...\"})]})})});}if(error){return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Brain,{className:\"h-12 w-12 text-red-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-400 mb-4\",children:/*#__PURE__*/_jsx(SafeRender,{children:error})}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchTrends,disabled:loading,className:\"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-500/90 transition-colors duration-200 disabled:opacity-50 font-jakarta leading-relaxed tracking-wider\",children:loading?'Retrying...':'Retry'})]})})});}return/*#__PURE__*/_jsxs(Card,{className:\"overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-gradient-to-r from-primary-500/10 via-purple-500/10 to-pink-500/10 p-6 -m-6 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-r from-primary-500/5 to-transparent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-gradient-to-br from-primary-500 to-purple-600 rounded-xl shadow-lg\",children:/*#__PURE__*/_jsx(Brain,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-text-primary font-jakarta tracking-wide\",children:\"Journal Trends\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary\",children:\"Your emotional patterns and personal insights\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchTrends(true),disabled:loading,className:\"px-4 py-2 text-sm bg-gradient-to-r from-primary-500 to-purple-600 text-white rounded-lg hover:from-primary-600 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 font-jakarta shadow-lg hover:shadow-xl transform hover:scale-105\",title:\"Refresh trends\",children:loading?'Refreshing...':'Refresh'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchTrends(false),disabled:loading,className:\"p-2 text-text-secondary hover:text-text-primary transition-colors duration-200 hover:bg-white/10 rounded-lg\",title:\"Reload trends\",children:/*#__PURE__*/_jsx(RefreshCw,{className:\"h-5 w-5 \".concat(loading?'animate-spin':'')})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6 relative z-10\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:0.1},children:/*#__PURE__*/_jsxs(Card,{className:\"p-6 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border-blue-500/20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-text-primary font-jakarta tracking-wide flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-blue-500/20 rounded-lg mr-3\",children:/*#__PURE__*/_jsx(Brain,{className:\"h-5 w-5 text-blue-400\"})}),\"AI Analysis\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/React.createElement(getTrendIcon(trends.emotionTrend||trends.sentimentTrend),{className:\"h-5 w-5 \".concat(getTrendColor(trends.emotionTrend||trends.sentimentTrend))}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold px-3 py-1 rounded-full \".concat(getTrendColor(trends.emotionTrend||trends.sentimentTrend),\" bg-opacity-20\"),children:/*#__PURE__*/_jsx(SafeRender,{children:getTrendLabel(trends.emotionTrend||trends.sentimentTrend)})})]})]}),trends.summary&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-text-primary mb-2 font-jakarta\",children:\"Overview\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary font-jakarta leading-relaxed\",children:/*#__PURE__*/_jsx(SafeRender,{children:trends.summary})})]}),trends.insights&&trends.insights.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-text-primary mb-2 font-jakarta\",children:\"Key Insights\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:trends.insights.slice(0,3).map((insight,index)=>{// Safety check: ensure insight is a string\nconst insightText=typeof insight==='string'?insight:String(insight||'Unknown insight');return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:0.3,delay:index*0.1},className:\"flex items-start space-x-2 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-400 rounded-full mt-2 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary font-jakarta\",children:/*#__PURE__*/_jsx(SafeRender,{children:insightText})})]},index);})})]})]})}),trends.commonTopics&&trends.commonTopics.length>0&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:0.1},children:/*#__PURE__*/_jsxs(Card,{className:\"p-6 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border-yellow-500/20\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-text-primary mb-4 font-jakarta tracking-wide flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-yellow-500/20 rounded-lg mr-3\",children:/*#__PURE__*/_jsx(Lightbulb,{className:\"h-5 w-5 text-yellow-400\"})}),\"Recurring Themes\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:trends.commonTopics.map((topic,index)=>{// Safety check: ensure topic is processed properly\nif(typeof topic==='object'&&topic!==null){const topicName=String((topic===null||topic===void 0?void 0:topic.name)||(topic===null||topic===void 0?void 0:topic.topic)||'Unknown Topic');return/*#__PURE__*/_jsxs(motion.span,{initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},transition:{duration:0.3,delay:index*0.1},className:\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 text-sm rounded-full border border-yellow-500/30 hover:from-yellow-500/30 hover:to-orange-500/30 transition-all duration-200 cursor-pointer shadow-lg hover:shadow-xl transform hover:scale-105\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-yellow-400 rounded-full mr-2\"}),/*#__PURE__*/_jsx(SafeRender,{children:topicName})]},index);}else if(typeof topic==='string'){return/*#__PURE__*/_jsxs(motion.span,{initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},transition:{duration:0.3,delay:index*0.1},className:\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 text-sm rounded-full border border-yellow-500/30 hover:from-yellow-500/30 hover:to-orange-500/30 transition-all duration-200 cursor-pointer shadow-lg hover:shadow-xl transform hover:scale-105\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-yellow-400 rounded-full mr-2\"}),/*#__PURE__*/_jsx(SafeRender,{children:topic})]},index);}else{// Skip invalid entries\nreturn null;}}).filter(Boolean)})]})}),trends.evolvingBeliefs&&trends.evolvingBeliefs.length>0&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:0.2},children:/*#__PURE__*/_jsxs(Card,{className:\"p-6 bg-gradient-to-br from-pink-500/10 to-rose-500/10 border-pink-500/20\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-text-primary mb-4 font-jakarta tracking-wide flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-pink-500/20 rounded-lg mr-3\",children:/*#__PURE__*/_jsx(Heart,{className:\"h-5 w-5 text-pink-400\"})}),\"Values & Beliefs\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:trends.evolvingBeliefs.map((belief,index)=>{// Safety check: ensure belief is processed properly\nif(typeof belief==='object'&&belief!==null){const beliefText=String((belief===null||belief===void 0?void 0:belief.belief)||(belief===null||belief===void 0?void 0:belief.text)||'Unknown Belief');return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:0.3,delay:index*0.1},className:\"flex items-start space-x-3 p-4 bg-gradient-to-r from-pink-500/10 to-rose-500/10 rounded-xl border border-pink-500/20 hover:from-pink-500/20 hover:to-rose-500/20 transition-all duration-200 group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-pink-500/20 rounded-lg group-hover:bg-pink-500/30 transition-colors duration-200\",children:/*#__PURE__*/_jsx(Heart,{className:\"h-4 w-4 text-pink-400\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary font-jakarta leading-relaxed flex-1\",children:/*#__PURE__*/_jsx(SafeRender,{children:beliefText})})]},index);}else if(typeof belief==='string'){return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:0.3,delay:index*0.1},className:\"flex items-start space-x-3 p-4 bg-gradient-to-r from-pink-500/10 to-rose-500/10 rounded-xl border border-pink-500/20 hover:from-pink-500/20 hover:to-rose-500/20 transition-all duration-200 group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-pink-500/20 rounded-lg group-hover:bg-pink-500/30 transition-colors duration-200\",children:/*#__PURE__*/_jsx(Heart,{className:\"h-4 w-4 text-pink-400\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary font-jakarta leading-relaxed flex-1\",children:/*#__PURE__*/_jsx(SafeRender,{children:belief})})]},index);}else{// Skip invalid entries\nreturn null;}}).filter(Boolean)})]})})]})]});};export default JournalTrends;","map":{"version":3,"names":["React","useState","useEffect","useCallback","motion","TrendingUp","TrendingDown","Minus","BarChart3","Heart","Lightbulb","Brain","RefreshCw","useAuth","buildApiUrl","toast","Card","SafeRender","jsx","_jsx","jsxs","_jsxs","JournalTrends","token","trends","setTrends","loading","setLoading","error","setError","hasAttemptedFetch","setHasAttemptedFetch","fetchTrends","forceRefresh","arguments","length","undefined","url","method","body","JSON","stringify","timeRange","limit","response","fetch","headers","concat","ok","_data$trendAnalysis","_data$trendAnalysis$e","_data$trendAnalysis2","_data$trendAnalysis2$","data","json","console","log","trendAnalysis","evolvingBeliefs","commonTopics","success","errorData","catch","errorMessage","message","getTrendIcon","trend","getTrendColor","getTrendBgColor","getTrendLabel","children","className","onClick","disabled","title","div","initial","opacity","y","animate","transition","duration","delay","createElement","emotionTrend","sentimentTrend","summary","insights","slice","map","insight","index","insightText","String","x","topic","topicName","name","span","scale","filter","Boolean","belief","beliefText","text"],"sources":["/Users/priyas/Desktop/untangle-platform/src/components/journal/JournalTrends.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  TrendingUp, \n  TrendingDown, \n  Minus, \n  BarChart3, \n  Heart, \n  Lightbulb,\n  Brain,\n  RefreshCw\n} from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { buildApiUrl } from '../../config';\nimport toast from 'react-hot-toast';\nimport Card from '../ui/Card';\nimport { SafeRender } from '../ui';\n\nconst JournalTrends = () => {\n  const { token } = useAuth();\n  const [trends, setTrends] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [hasAttemptedFetch, setHasAttemptedFetch] = useState(false);\n\n  const fetchTrends = useCallback(async (forceRefresh = false) => {\n    if (!token || loading) return;\n    \n    setLoading(true);\n    setError(null);\n    try {\n      const url = forceRefresh \n        ? buildApiUrl('/api/journal/trends/refresh')\n        : buildApiUrl('/api/journal/trends?limit=50');\n      \n      const method = forceRefresh ? 'POST' : 'GET';\n      const body = forceRefresh ? JSON.stringify({ timeRange: 'month', limit: 50 }) : undefined;\n      \n      const response = await fetch(url, {\n        method,\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        console.log('JournalTrends: Received trends data:', data);\n        console.log('JournalTrends: Evolving beliefs count:', data.trendAnalysis?.evolvingBeliefs?.length || 0);\n        console.log('JournalTrends: Common topics count:', data.trendAnalysis?.commonTopics?.length || 0);\n        setTrends(data.trendAnalysis);\n        setError(null);\n        \n        // Show success message for refresh\n        if (forceRefresh) {\n          toast.success('Trends refreshed successfully');\n        }\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        const errorMessage = errorData.message || 'Failed to fetch trends';\n        setError(errorMessage);\n        // Only show toast error once\n        if (!hasAttemptedFetch) {\n          toast.error(errorMessage);\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching trends:', error);\n      setError('Network error');\n      // Only show toast error once\n      if (!hasAttemptedFetch) {\n        toast.error('Failed to fetch trends');\n      }\n    } finally {\n      setLoading(false);\n      setHasAttemptedFetch(true);\n    }\n  }, [token, loading, hasAttemptedFetch]);\n\n  useEffect(() => {\n    if (token && !hasAttemptedFetch) {\n      fetchTrends();\n    }\n  }, [token, fetchTrends, hasAttemptedFetch]);\n\n  const getTrendIcon = (trend) => {\n    switch (trend) {\n      case 'improving': return TrendingUp;\n      case 'declining': return TrendingDown;\n      case 'volatile': return BarChart3;\n      default: return Minus;\n    }\n  };\n\n  const getTrendColor = (trend) => {\n    switch (trend) {\n      case 'improving': return 'text-[#1E49C9]';\n      case 'declining': return 'text-orange-400';\n      case 'volatile': return 'text-purple-400';\n      default: return 'text-blue-400';\n    }\n  };\n\n  const getTrendBgColor = (trend) => {\n    switch (trend) {\n      case 'improving': return 'bg-[#1E49C9]';\n      case 'declining': return 'bg-orange-500';\n      case 'volatile': return 'bg-purple-500';\n      default: return 'bg-blue-500';\n    }\n  };\n\n  const getTrendLabel = (trend) => {\n    switch (trend) {\n      case 'improving': return 'Growing Strong';\n      case 'declining': return 'Learning & Growing';\n      case 'volatile': return 'Dynamic Journey';\n      default: return 'Steady Progress';\n    }\n  };\n\n  if (!trends && !error && !loading) {\n    return (\n      <Card>\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"text-center\">\n            <Brain className=\"h-12 w-12 text-text-secondary mx-auto mb-4\" />\n            <button\n              onClick={fetchTrends}\n              disabled={loading}\n              className=\"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-500/90 transition-colors duration-200 disabled:opacity-50 font-jakarta leading-relaxed tracking-wider\"\n            >\n              {loading ? 'Loading...' : 'Load Trends'}\n            </button>\n          </div>\n        </div>\n      </Card>\n    );\n  }\n\n  if (loading) {\n    return (\n      <Card>\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-4\"></div>\n            <p className=\"text-text-secondary\">Loading journal trends...</p>\n          </div>\n        </div>\n      </Card>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"text-center\">\n            <Brain className=\"h-12 w-12 text-red-400 mx-auto mb-4\" />\n            <p className=\"text-red-400 mb-4\"><SafeRender>{error}</SafeRender></p>\n            <button\n              onClick={fetchTrends}\n              disabled={loading}\n              className=\"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-500/90 transition-colors duration-200 disabled:opacity-50 font-jakarta leading-relaxed tracking-wider\"\n            >\n              {loading ? 'Retrying...' : 'Retry'}\n            </button>\n          </div>\n        </div>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"overflow-hidden\">\n      {/* Header with Gradient Background */}\n      <div className=\"relative bg-gradient-to-r from-primary-500/10 via-purple-500/10 to-pink-500/10 p-6 -m-6 mb-6\">\n        <div className=\"absolute inset-0 bg-gradient-to-r from-primary-500/5 to-transparent\"></div>\n        <div className=\"relative flex justify-between items-center\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"p-3 bg-gradient-to-br from-primary-500 to-purple-600 rounded-xl shadow-lg\">\n              <Brain className=\"h-6 w-6 text-white\" />\n            </div>\n            <div>\n              <h3 className=\"text-xl font-bold text-text-primary font-jakarta tracking-wide\">Journal Trends</h3>\n              <p className=\"text-sm text-text-secondary\">Your emotional patterns and personal insights</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => fetchTrends(true)}\n              disabled={loading}\n              className=\"px-4 py-2 text-sm bg-gradient-to-r from-primary-500 to-purple-600 text-white rounded-lg hover:from-primary-600 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 font-jakarta shadow-lg hover:shadow-xl transform hover:scale-105\"\n              title=\"Refresh trends\"\n            >\n              {loading ? 'Refreshing...' : 'Refresh'}\n            </button>\n            <button\n              onClick={() => fetchTrends(false)}\n              disabled={loading}\n              className=\"p-2 text-text-secondary hover:text-text-primary transition-colors duration-200 hover:bg-white/10 rounded-lg\"\n              title=\"Reload trends\"\n            >\n              <RefreshCw className={`h-5 w-5 ${loading ? 'animate-spin' : ''}`} />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-6 relative z-10\">\n\n        {/* AI Analysis with Enhanced Design */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, delay: 0.1 }}\n        >\n          <Card className=\"p-6 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border-blue-500/20\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h4 className=\"text-lg font-semibold text-text-primary font-jakarta tracking-wide flex items-center\">\n                <div className=\"p-2 bg-blue-500/20 rounded-lg mr-3\">\n                  <Brain className=\"h-5 w-5 text-blue-400\" />\n                </div>\n                AI Analysis\n              </h4>\n              <div className=\"flex items-center space-x-3\">\n                {React.createElement(getTrendIcon(trends.emotionTrend || trends.sentimentTrend), { \n                  className: `h-5 w-5 ${getTrendColor(trends.emotionTrend || trends.sentimentTrend)}` \n                })}\n                <span className={`text-lg font-bold px-3 py-1 rounded-full ${getTrendColor(trends.emotionTrend || trends.sentimentTrend)} bg-opacity-20`}>\n                  <SafeRender>{getTrendLabel(trends.emotionTrend || trends.sentimentTrend)}</SafeRender>\n                </span>\n              </div>\n            </div>\n            \n            {/* Summary Section */}\n            {trends.summary && (\n              <div className=\"mb-4\">\n                <h5 className=\"text-sm font-medium text-text-primary mb-2 font-jakarta\">Overview</h5>\n                <p className=\"text-sm text-text-secondary font-jakarta leading-relaxed\">\n                  <SafeRender>{trends.summary}</SafeRender>\n                </p>\n              </div>\n            )}\n\n            {/* Key Insights */}\n            {trends.insights && trends.insights.length > 0 && (\n              <div className=\"mb-4\">\n                <h5 className=\"text-sm font-medium text-text-primary mb-2 font-jakarta\">Key Insights</h5>\n                <div className=\"space-y-2\">\n                  {trends.insights.slice(0, 3).map((insight, index) => {\n                    // Safety check: ensure insight is a string\n                    const insightText = typeof insight === 'string' ? insight : String(insight || 'Unknown insight');\n                    return (\n                      <motion.div\n                        key={index}\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        transition={{ duration: 0.3, delay: index * 0.1 }}\n                        className=\"flex items-start space-x-2 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20\"\n                      >\n                        <div className=\"w-2 h-2 bg-blue-400 rounded-full mt-2 flex-shrink-0\"></div>\n                        <p className=\"text-sm text-text-secondary font-jakarta\"><SafeRender>{insightText}</SafeRender></p>\n                      </motion.div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n\n          </Card>\n        </motion.div>\n\n        {/* Common Topics with Enhanced Design */}\n        {trends.commonTopics && trends.commonTopics.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.5, delay: 0.1 }}\n          >\n            <Card className=\"p-6 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border-yellow-500/20\">\n              <h4 className=\"text-lg font-semibold text-text-primary mb-4 font-jakarta tracking-wide flex items-center\">\n                <div className=\"p-2 bg-yellow-500/20 rounded-lg mr-3\">\n                  <Lightbulb className=\"h-5 w-5 text-yellow-400\" />\n                </div>\n                Recurring Themes\n              </h4>\n              <div className=\"flex flex-wrap gap-3\">\n                {trends.commonTopics.map((topic, index) => {\n                  // Safety check: ensure topic is processed properly\n                  if (typeof topic === 'object' && topic !== null) {\n                    const topicName = String(topic?.name || topic?.topic || 'Unknown Topic');\n                    return (\n                      <motion.span\n                        key={index}\n                        initial={{ opacity: 0, scale: 0.8 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        transition={{ duration: 0.3, delay: index * 0.1 }}\n                        className=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 text-sm rounded-full border border-yellow-500/30 hover:from-yellow-500/30 hover:to-orange-500/30 transition-all duration-200 cursor-pointer shadow-lg hover:shadow-xl transform hover:scale-105\"\n                      >\n                        <div className=\"w-2 h-2 bg-yellow-400 rounded-full mr-2\"></div>\n                        <SafeRender>{topicName}</SafeRender>\n                      </motion.span>\n                    );\n                  } else if (typeof topic === 'string') {\n                    return (\n                      <motion.span\n                        key={index}\n                        initial={{ opacity: 0, scale: 0.8 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        transition={{ duration: 0.3, delay: index * 0.1 }}\n                        className=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 text-sm rounded-full border border-yellow-500/30 hover:from-yellow-500/30 hover:to-orange-500/30 transition-all duration-200 cursor-pointer shadow-lg hover:shadow-xl transform hover:scale-105\"\n                      >\n                        <div className=\"w-2 h-2 bg-yellow-400 rounded-full mr-2\"></div>\n                        <SafeRender>{topic}</SafeRender>\n                      </motion.span>\n                    );\n                  } else {\n                    // Skip invalid entries\n                    return null;\n                  }\n                }).filter(Boolean)}\n              </div>\n            </Card>\n          </motion.div>\n        )}\n\n        {/* Values and Beliefs with Enhanced Design */}\n        {trends.evolvingBeliefs && trends.evolvingBeliefs.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.5, delay: 0.2 }}\n          >\n            <Card className=\"p-6 bg-gradient-to-br from-pink-500/10 to-rose-500/10 border-pink-500/20\">\n              <h4 className=\"text-lg font-semibold text-text-primary mb-4 font-jakarta tracking-wide flex items-center\">\n                <div className=\"p-2 bg-pink-500/20 rounded-lg mr-3\">\n                  <Heart className=\"h-5 w-5 text-pink-400\" />\n                </div>\n                Values & Beliefs\n              </h4>\n              <div className=\"space-y-3\">\n                {trends.evolvingBeliefs.map((belief, index) => {\n                  // Safety check: ensure belief is processed properly\n                  if (typeof belief === 'object' && belief !== null) {\n                    const beliefText = String(belief?.belief || belief?.text || 'Unknown Belief');\n                    return (\n                      <motion.div \n                        key={index} \n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        transition={{ duration: 0.3, delay: index * 0.1 }}\n                        className=\"flex items-start space-x-3 p-4 bg-gradient-to-r from-pink-500/10 to-rose-500/10 rounded-xl border border-pink-500/20 hover:from-pink-500/20 hover:to-rose-500/20 transition-all duration-200 group\"\n                      >\n                        <div className=\"p-2 bg-pink-500/20 rounded-lg group-hover:bg-pink-500/30 transition-colors duration-200\">\n                          <Heart className=\"h-4 w-4 text-pink-400\" />\n                        </div>\n                        <p className=\"text-sm text-text-secondary font-jakarta leading-relaxed flex-1\">\n                          <SafeRender>{beliefText}</SafeRender>\n                        </p>\n                      </motion.div>\n                    );\n                  } else if (typeof belief === 'string') {\n                    return (\n                      <motion.div \n                        key={index} \n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        transition={{ duration: 0.3, delay: index * 0.1 }}\n                        className=\"flex items-start space-x-3 p-4 bg-gradient-to-r from-pink-500/10 to-rose-500/10 rounded-xl border border-pink-500/20 hover:from-pink-500/20 hover:to-rose-500/20 transition-all duration-200 group\"\n                      >\n                        <div className=\"p-2 bg-pink-500/20 rounded-lg group-hover:bg-pink-500/30 transition-colors duration-200\">\n                          <Heart className=\"h-4 w-4 text-pink-400\" />\n                        </div>\n                        <p className=\"text-sm text-text-secondary font-jakarta leading-relaxed flex-1\">\n                          <SafeRender>{belief}</SafeRender>\n                        </p>\n                      </motion.div>\n                    );\n                  } else {\n                    // Skip invalid entries\n                    return null;\n                  }\n                }).filter(Boolean)}\n              </div>\n            </Card>\n          </motion.div>\n        )}\n\n\n      </div>\n    </Card>\n  );\n};\n\nexport default JournalTrends;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}