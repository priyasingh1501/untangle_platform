{"ast":null,"code":"import _objectSpread from\"/Users/priyas/Desktop/untangle-platform/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import toast from'react-hot-toast';import{buildApiUrl}from'../config';import{Plus,Edit3,Trash2,Upload,Image,DollarSign,TrendingUp,TrendingDown,CreditCard,Target,Mail,CheckCircle}from'lucide-react';import axios from'axios';import Card from'../components/ui/Card';import{componentStyles,animations}from'../styles/designTokens';import EmailExpenseSettings from'../components/EmailExpenseSettings';import EmailExpensesList from'../components/EmailExpensesList';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Finance=()=>{const[expenses,setExpenses]=useState([]);const[summary,setSummary]=useState({});const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('overview');const[showAddForm,setShowAddForm]=useState(false);const[editingItem,setEditingItem]=useState(null);const[showCategoryGoalsForm,setShowCategoryGoalsForm]=useState(false);const[showAddGoalForm,setShowAddGoalForm]=useState(false);const[editingGoal,setEditingGoal]=useState(null);const[showSubscriptionForm,setShowSubscriptionForm]=useState(false);const[editingSubscription,setEditingSubscription]=useState(null);const[categoryGoals,setCategoryGoals]=useState({food:2000,transportation:1500,shopping:3000,entertainment:1000,healthcare:2000,utilities:1500,housing:25000,travel:5000,education:3000,other:1000});const[expenseGoals,setExpenseGoals]=useState([]);const[newGoalForm,setNewGoalForm]=useState({category:'',amount:'',period:'monthly',// Always monthly\nnotes:'',color:'#1E49C9'});const[formData,setFormData]=useState({type:'expense',amount:'',category:'',description:'',vendor:'',source:'',date:new Date().toISOString().split('T')[0],notes:'',billImage:null,billImageUrl:'',impulseBuy:false});const[subscriptionForm,setSubscriptionForm]=useState({name:'',category:'',amount:'',frequency:'monthly',notes:'',color:'#1E49C9'});// Derived KPI helpers\nconst toMonthKey=d=>{const date=new Date(d);const y=date.getFullYear();const m=String(date.getMonth()+1).padStart(2,'0');return\"\".concat(y,\"-\").concat(m);};const getCurrentMonthKey=()=>new Date().toISOString().slice(0,7);const getPreviousMonthKey=()=>{const d=new Date();d.setMonth(d.getMonth()-1);return d.toISOString().slice(0,7);};const getMonthlyTotals=()=>{const map={};(expenses||[]).forEach(exp=>{if(!exp||!exp.date||typeof exp.amount!=='number')return;const key=toMonthKey(exp.date);map[key]=(map[key]||0)+exp.amount;});return map;};const currentMonthKey=getCurrentMonthKey();const previousMonthKey=getPreviousMonthKey();const monthlyTotals=getMonthlyTotals();const currentMonthTotal=monthlyTotals[currentMonthKey]||0;const previousMonthTotal=monthlyTotals[previousMonthKey]||0;const getSixMonthAverage=()=>{const months=[];const d=new Date();for(let i=0;i<6;i++){const key=d.toISOString().slice(0,7);months.push(monthlyTotals[key]||0);d.setMonth(d.getMonth()-1);}if(months.length===0)return 0;const sum=months.reduce((a,b)=>a+b,0);return sum/months.length;};const monthlyAverage6=getSixMonthAverage();useEffect(()=>{fetchFinancialData();},[]);const fetchFinancialData=async()=>{try{setLoading(true);const token=localStorage.getItem('token');const[expensesRes,summaryRes,goalsRes]=await Promise.all([axios.get(buildApiUrl('/api/finance/expenses'),{headers:{Authorization:\"Bearer \".concat(token)}}),axios.get(buildApiUrl('/api/finance/summary'),{headers:{Authorization:\"Bearer \".concat(token)}}),axios.get(buildApiUrl('/api/finance/goals'),{headers:{Authorization:\"Bearer \".concat(token)}})]);setExpenses(expensesRes.data);setSummary(summaryRes.data);setExpenseGoals(goalsRes.data);}catch(error){console.error('Error fetching financial data:',error);toast.error('Failed to load financial data');}finally{setLoading(false);}};// Map frontend expense goal categories to backend-compatible categories\nconst mapExpenseGoalToBackendCategory=frontendCategory=>{const categoryMap={'nourishing_food':'food','safe_convenient_travel':'transportation','safe_comfortable_home':'housing','living_essentials':'utilities','healthcare_wellbeing':'healthcare','enjoy_life':'entertainment','value_shopping':'shopping','learning_growing':'education','exploring_places':'travel','prepare_unexpected':'insurance','other':'other'};return categoryMap[frontendCategory]||'other';};// Map backend categories back to frontend display names\nconst mapBackendCategoryToDisplayName=backendCategory=>{const reverseMap={'food':'Nourishing food','transportation':'Safe, convenient travel','housing':'Safe, comfortable and peaceful home','utilities':'Maintain living essentials','healthcare':'Long term wellbeing and protective healthcare','entertainment':'Enjoy life, have fun','shopping':'Value, comfort or joyful shopping','education':'Learning, growing and investing in my future','travel':'Exploring new places','insurance':'Prepare for the unexpected','other':'Other'};return reverseMap[backendCategory]||'Other';};// Expense Goals Management Functions\nconst handleAddGoal=async e=>{e.preventDefault();console.log('ðŸŽ¯ Add Goal form submitted:',newGoalForm);// Validate required fields\nif(!newGoalForm.category||!newGoalForm.amount||isNaN(newGoalForm.amount)||newGoalForm.amount<=0){toast.error('Please fill in all required fields with valid values');return;}try{const token=localStorage.getItem('token');// Map frontend category to backend category\nconst backendCategory=mapExpenseGoalToBackendCategory(newGoalForm.category);const goalData=_objectSpread(_objectSpread({},newGoalForm),{},{category:backendCategory});console.log('ðŸŽ¯ Mapped goal data:',goalData);if(editingGoal){// Update existing goal\nconst response=await axios.put(buildApiUrl(\"/api/finance/goals/\".concat(editingGoal._id)),goalData,{headers:{Authorization:\"Bearer \".concat(token)}});setExpenseGoals(prev=>prev.map(goal=>goal._id===editingGoal._id?response.data:goal));// Update category goals\nsetCategoryGoals(prev=>_objectSpread(_objectSpread({},prev),{},{[response.data.category]:response.data.amount}));setEditingGoal(null);}else{// Check if goal already exists for this category\nconst existingGoal=expenseGoals.find(goal=>goal.category===backendCategory);if(existingGoal){toast.error('A goal already exists for this category. Please edit the existing goal instead.');return;}// Create new goal\nconst response=await axios.post(buildApiUrl('/api/finance/goals'),goalData,{headers:{Authorization:\"Bearer \".concat(token)}});setExpenseGoals(prev=>[...prev,response.data]);// Update category goals\nsetCategoryGoals(prev=>_objectSpread(_objectSpread({},prev),{},{[response.data.category]:response.data.amount}));}// Reset form\nsetNewGoalForm({category:'',amount:'',period:'monthly',notes:'',color:'#1E49C9'});setShowAddGoalForm(false);toast.success(editingGoal?'Goal updated successfully!':'Goal added successfully!');}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('Error managing expense goal:',error);console.error('Error details:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Error managing expense goal');}};const handleEditGoal=goal=>{setEditingGoal(goal);setNewGoalForm({category:goal.category,amount:goal.amount.toString(),period:goal.period,notes:goal.notes||'',color:goal.color});setShowAddGoalForm(true);};const handleDeleteGoal=async goalId=>{const goalToDelete=expenseGoals.find(goal=>goal._id===goalId);if(!goalToDelete)return;try{const token=localStorage.getItem('token');await axios.delete(buildApiUrl(\"/api/finance/goals/\".concat(goalId)),{headers:{Authorization:\"Bearer \".concat(token)}});// Remove from expense goals\nsetExpenseGoals(prev=>prev.filter(goal=>goal._id!==goalId));// Remove from category goals\nsetCategoryGoals(prev=>{const updated=_objectSpread({},prev);delete updated[goalToDelete.category];return updated;});toast.success(\"\".concat(goalToDelete.category,\" goal deleted successfully!\"));}catch(error){console.error('Error deleting expense goal:',error);toast.error('Error deleting expense goal');}};const resetGoalForm=()=>{setNewGoalForm({category:'',amount:'',period:'monthly',// Always monthly\nnotes:'',color:'#1E49C9'});setEditingGoal(null);};const handleSubmit=async e=>{e.preventDefault();try{const token=localStorage.getItem('token');const endpoint=buildApiUrl('/api/finance/expenses');// Prepare the data to send\nconst expenseData=_objectSpread(_objectSpread({},formData),{},{billImage:formData.billImage?{filename:formData.billImage.name,url:formData.billImageUrl,data:formData.billImageUrl// Send base64 data\n}:null});// Remove the file object as it can't be serialized\ndelete expenseData.billImage;if(editingItem){await axios.put(\"\".concat(endpoint,\"/\").concat(editingItem._id),expenseData,{headers:{Authorization:\"Bearer \".concat(token)}});}else{await axios.post(endpoint,expenseData,{headers:{Authorization:\"Bearer \".concat(token)}});}setShowAddForm(false);setEditingItem(null);setFormData({amount:'',category:'',description:'',vendor:'',date:new Date().toISOString().split('T')[0],notes:'',billImage:null,billImageUrl:'',impulseBuy:false});fetchFinancialData();}catch(error){console.error('Error saving financial record:',error);}};const handleDelete=async(id,type)=>{try{const token=localStorage.getItem('token');const endpoint=buildApiUrl('/api/finance/expenses');await axios.delete(\"\".concat(endpoint,\"/\").concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});fetchFinancialData();}catch(error){console.error('Error deleting record:',error);}};// Map expense goal categories to Finance model categories\nconst mapExpenseGoalToFinanceCategory=expenseGoalCategory=>{const categoryMap={'nourishing_food':'food','safe_convenient_travel':'transportation','safe_comfortable_home':'housing','living_essentials':'utilities','healthcare_wellbeing':'healthcare','enjoy_life':'entertainment','value_shopping':'shopping','learning_growing':'education','exploring_places':'travel','prepare_unexpected':'other','other':'other'};return categoryMap[expenseGoalCategory]||'other';};const handleSubscriptionSubmit=async e=>{e.preventDefault();try{const token=localStorage.getItem('token');const endpoint=buildApiUrl('/api/finance/expenses');const subscriptionData={amount:subscriptionForm.amount,category:mapExpenseGoalToFinanceCategory(subscriptionForm.category),description:subscriptionForm.name,vendor:subscriptionForm.name,// Use name as vendor for subscriptions\ndate:new Date().toISOString().split('T')[0],notes:\"Subscription | Frequency: \".concat(subscriptionForm.frequency,\" | Goal: \").concat(expenseGoalCategories[subscriptionForm.category]).concat(subscriptionForm.notes?\" | \".concat(subscriptionForm.notes):''),isRecurring:true,recurringPattern:subscriptionForm.frequency,tags:['subscription',subscriptionForm.category]};if(editingSubscription){await axios.put(\"\".concat(endpoint,\"/\").concat(editingSubscription._id),subscriptionData,{headers:{Authorization:\"Bearer \".concat(token)}});toast.success('Subscription updated successfully!');}else{await axios.post(endpoint,subscriptionData,{headers:{Authorization:\"Bearer \".concat(token)}});toast.success('Subscription added successfully!');}setShowSubscriptionForm(false);setEditingSubscription(null);setSubscriptionForm({name:'',category:'',amount:'',frequency:'monthly',notes:'',color:'#1E49C9'});// Refresh data\nfetchFinancialData();}catch(error){console.error('Error saving subscription:',error);toast.error('Failed to save subscription. Please try again.');}};const handleEdit=item=>{var _item$billImage;setEditingItem(item);setFormData({amount:item.amount,category:item.category||'',description:item.description||'',vendor:item.vendor||'',date:new Date(item.date).toISOString().split('T')[0],notes:item.notes||'',billImage:null,billImageUrl:((_item$billImage=item.billImage)===null||_item$billImage===void 0?void 0:_item$billImage.url)||item.billImageUrl||'',impulseBuy:item.impulseBuy||false});setShowAddForm(true);};const formatCurrency=amount=>{return new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR'}).format(amount);};const formatDate=date=>{return new Date(date).toLocaleDateString('en-IN');};const getCategoryGoalsWithProgress=()=>{const currentMonth=new Date().toISOString().slice(0,7);// YYYY-MM format\nconst currentMonthExpenses=expenses.filter(expense=>expense.date.startsWith(currentMonth));// Only show goals that users have actually added (from expenseGoals)\nreturn expenseGoals.map(goal=>{const categoryExpenses=currentMonthExpenses.filter(expense=>expense.category===goal.category);const spent=categoryExpenses.reduce((sum,expense)=>sum+expense.amount,0);const impulseBuys=categoryExpenses.filter(expense=>expense.impulseBuy).length;const totalSpends=categoryExpenses.length;const percentage=goal.amount>0?Math.round(spent/goal.amount*100):0;return{name:goal.category,displayName:mapBackendCategoryToDisplayName(goal.category),goal:goal.amount,spent,percentage,impulseBuys,totalSpends,color:goal.color||'#1E49C9'};}).sort((a,b)=>b.spent-a.spent);// Sort by amount spent\n};// Calculate total impulse buys for current month\nconst getCurrentMonthImpulseBuys=()=>{const currentMonth=new Date().toISOString().slice(0,7);// YYYY-MM format\nreturn expenses.filter(expense=>expense.date.startsWith(currentMonth)&&expense.impulseBuy).length;};// Expense goal category mapping\nconst expenseGoalCategories={'nourishing_food':'Nourishing food','safe_convenient_travel':'Safe, convenient travel','safe_comfortable_home':'Safe, comfortable and peaceful home','living_essentials':'Maintain living essentials','healthcare_wellbeing':'Long term wellbeing and protective healthcare','enjoy_life':'Enjoy life, have fun','value_shopping':'Value, comfort or joyful shopping','learning_growing':'Learning, growing and investing in my future','exploring_places':'Exploring new places','prepare_unexpected':'Prepare for the unexpected','other':'Other'};const[isAnalyzingImage,setIsAnalyzingImage]=useState(false);const[ocrSuccess,setOcrSuccess]=useState(false);const[showPantryUpdateDialog,setShowPantryUpdateDialog]=useState({show:false,items:[],vendor:'',date:''});const[selectedPantryItems,setSelectedPantryItems]=useState([]);const handleBillImageUpload=e=>{const file=e.target.files[0];if(file){if(file.type.startsWith('image/')){const reader=new FileReader();reader.onload=event=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{billImage:file,billImageUrl:event.target.result}));// Automatically analyze the image for expense details\nanalyzeBillImage(file);};reader.readAsDataURL(file);}else{// Invalid file type - could show a toast notification instead\nconsole.log('Invalid file type selected');}}};const analyzeBillImage=async file=>{if(!file)return;console.log('ðŸ” Starting bill image analysis for file:',file.name,file.size);setIsAnalyzingImage(true);try{const formData=new FormData();formData.append('image',file);const token=localStorage.getItem('token');const apiUrl=buildApiUrl('/api/finance/analyze-bill');console.log('ðŸ” Sending request to:',apiUrl);const response=await fetch(apiUrl,{method:'POST',headers:{'Authorization':\"Bearer \".concat(token)},body:formData});console.log('ðŸ” Response status:',response.status,response.ok);console.log('ðŸ” Response headers:',Object.fromEntries(response.headers.entries()));if(response.ok){const result=await response.json();console.log('ðŸ” Bill analysis result:',result);console.log('ðŸ” Result type:',typeof result);console.log('ðŸ” Result keys:',Object.keys(result));// Update form with extracted information\nif(result.amount){console.log('ðŸ” Updating form with extracted data:',result);// Force a state update to ensure the form re-renders\nconst newFormData=_objectSpread(_objectSpread({},formData),{},{amount:result.amount,description:result.description||formData.description,vendor:result.vendor||formData.vendor,category:result.category||formData.category,date:result.date||formData.date});console.log('ðŸ” Current form data before update:',formData);console.log('ðŸ” New form data to set:',newFormData);console.log('ðŸ” About to update form data from:',formData,'to:',newFormData);setFormData(newFormData);// Force a re-render by updating a different state\nsetTimeout(()=>{console.log('ðŸ” Form data after update:',newFormData);console.log('ðŸ” Current form state should be:',newFormData);},100);// Show success notification\nconst extractedFields=[];if(result.amount)extractedFields.push(\"Amount: \\u20B9\".concat(result.amount));if(result.description)extractedFields.push(\"Description: \".concat(result.description));if(result.vendor)extractedFields.push(\"Vendor: \".concat(result.vendor));if(result.category)extractedFields.push(\"Category: \".concat(result.category));console.log('âœ… OCR Analysis Complete:',extractedFields.join(', '));// Show success indicator\nsetOcrSuccess(true);setTimeout(()=>setOcrSuccess(false),3000);// Check if this is a food purchase with pantry items\nif(result.category==='food'&&result.description){// Extract pantry items from description\nconst pantryItems=extractPantryItems(result.description);if(pantryItems.length>0){setShowPantryUpdateDialog({show:true,items:pantryItems,vendor:result.vendor,date:result.date});// Initialize all items as selected\nsetSelectedPantryItems(pantryItems);}}}if(result.error){console.warn('OCR analysis warning:',result.error);}if(result.warning){console.warn('OCR analysis warning:',result.warning);}}else{console.error('Failed to analyze bill image');}}catch(error){console.error('Error analyzing bill image:',error);}finally{setIsAnalyzingImage(false);}};const removeBillImage=()=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{billImage:null,billImageUrl:''}));};const extractPantryItems=description=>{// Enhanced food item detection with brand names and common items\nconst pantryKeywords=['milk','bread','eggs','rice','pasta','oil','sugar','salt','flour','cereal','beans','lentils','spices','herbs','sauce','jam','honey','nuts','dried fruits','canned goods','beverages','snacks','chocolate','tea','coffee','juice','yogurt','cheese','butter','meat','fish','vegetables','fruits','onions','potatoes','tomatoes','carrots','taaza','novel','naphthale','keventer','chicke','idly','dosa','bat'];// Split by commas and clean up\nconst items=description.split(',').map(item=>item.trim());const foundItems=[];items.forEach(item=>{// Clean the item name\nconst cleanItem=item.replace(/[^a-zA-Z\\s]/g,' ').trim();const words=cleanItem.split(/\\s+/);words.forEach(word=>{const cleanWord=word.toLowerCase();if(cleanWord.length>2&&pantryKeywords.some(keyword=>cleanWord.includes(keyword)||keyword.includes(cleanWord))){// Capitalize first letter and add to found items\nconst capitalizedWord=cleanWord.charAt(0).toUpperCase()+cleanWord.slice(1);if(!foundItems.includes(capitalizedWord)){foundItems.push(capitalizedWord);}}});// Also check if the entire item contains food keywords\nif(cleanItem.length>3){const hasFoodKeyword=pantryKeywords.some(keyword=>cleanItem.toLowerCase().includes(keyword));if(hasFoodKeyword&&!foundItems.includes(cleanItem)){foundItems.push(cleanItem);}}});// Remove duplicates and return unique items\nreturn[...new Set(foundItems)];};const handlePantryUpdate=async()=>{try{console.log('ðŸ” Starting pantry update...');console.log('ðŸ” Selected items:',selectedPantryItems);console.log('ðŸ” Dialog data:',showPantryUpdateDialog);const token=localStorage.getItem('token');console.log('ðŸ” Token exists:',!!token);const pantryData={items:selectedPantryItems.map(item=>({name:item,quantity:1,unit:'piece',category:'food',purchaseDate:showPantryUpdateDialog.date,vendor:showPantryUpdateDialog.vendor,expiryDate:null,notes:\"Added from expense receipt\"}))};console.log('ðŸ” Updating pantry with items:',pantryData);console.log('ðŸ” API URL:',buildApiUrl('/api/pantry/add-multiple'));// Add items to pantry\nconst response=await fetch(buildApiUrl('/api/pantry/add-multiple'),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(pantryData)});console.log('ðŸ” Response status:',response.status);console.log('ðŸ” Response ok:',response.ok);if(response.ok){const result=await response.json();console.log('âœ… Pantry updated successfully:',result);// Close the dialog\nsetShowPantryUpdateDialog({show:false,items:[],vendor:'',date:''});setSelectedPantryItems([]);// Show success message\nsetOcrSuccess(true);setTimeout(()=>setOcrSuccess(false),3000);}else{const errorText=await response.text();console.error('Failed to update pantry:',response.status,errorText);}}catch(error){console.error('Error updating pantry:',error);}};const togglePantryItem=item=>{setSelectedPantryItems(prev=>prev.includes(item)?prev.filter(i=>i!==item):[...prev,item]);};const selectAllPantryItems=()=>{setSelectedPantryItems(showPantryUpdateDialog.items);};const deselectAllPantryItems=()=>{setSelectedPantryItems([]);};const closePantryDialog=()=>{console.log('ðŸ” Closing pantry dialog');setShowPantryUpdateDialog({show:false,items:[],vendor:'',date:''});setSelectedPantryItems([]);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"h-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-[#FFD200]\"})});}return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5},className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-[minmax(200px,auto)] [&>*:nth-child(odd)]:animate-fade-in [&>*:nth-child(even)]:animate-fade-in-delayed\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{variant:\"elevated\",className:\"h-full\",title:\"FINANCIAL MISSION\",subtitle:\"Track expenses, manage budgets, and achieve financial goals\",icon:/*#__PURE__*/_jsx(DollarSign,{className:\"h-5 w-5 text-[#1E49C9]\"}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col lg:flex-row lg:items-center gap-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-1 bg-[rgba(0,0,0,0.2)] p-1 rounded-lg w-fit border border-[rgba(255,255,255,0.1)] mx-auto lg:mx-0\",children:['overview','expenses','email-expenses','subscriptions'].map(tab=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(tab),className:\"py-2 px-3 rounded-md text-sm font-medium transition-all duration-200 font-jakarta tracking-wider \".concat(activeTab===tab?'bg-[#1E49C9] text-white shadow-lg':'text-text-secondary hover:text-text-primary hover:bg-[rgba(30,73,201,0.1)]'),children:tab==='email-expenses'?'Email Expenses':tab.charAt(0).toUpperCase()+tab.slice(1)},tab))})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center lg:justify-end\",children:activeTab==='subscriptions'?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowSubscriptionForm(true),className:componentStyles.button.primary+\" flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"ADD SUBSCRIPTION\"]}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddForm(true),className:componentStyles.button.primary+\" flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"ADD EXPENSE\"]})})]})})}),activeTab==='overview'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsxs(Card,{className:\"h-full flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-[#1E49C9] bg-opacity-20 rounded-lg\",children:/*#__PURE__*/_jsx(TrendingUp,{className:\"h-5 w-5 text-[#1E49C9]\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-jakarta text-2xl leading-normal text-text-primary font-bold tracking-wide\",children:\"CURRENT MONTH\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-jakarta text-lg leading-loose text-text-secondary\",children:new Date().toLocaleDateString('en-US',{month:'long',year:'numeric'})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-[#1E49C9] font-mono\",children:formatCurrency(currentMonthTotal)})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsxs(Card,{className:\"h-full flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-[#1E49C9] bg-opacity-20 rounded-lg\",children:/*#__PURE__*/_jsx(TrendingDown,{className:\"h-5 w-5 text-[#1E49C9]\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-jakarta text-2xl leading-normal text-text-primary font-bold tracking-wide\",children:\"PREVIOUS MONTH\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-jakarta text-lg leading-loose text-text-secondary\",children:new Date(new Date().getFullYear(),new Date().getMonth()-1,1).toLocaleDateString('en-US',{month:'long',year:'numeric'})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-[#1E49C9] font-mono\",children:formatCurrency(previousMonthTotal)})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsxs(Card,{className:\"h-full flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-[#1E49C9] bg-opacity-20 rounded-lg\",children:/*#__PURE__*/_jsx(DollarSign,{className:\"h-5 w-5 text-[#1E49C9]\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-jakarta text-2xl leading-normal text-text-primary font-bold tracking-wide\",children:\"MONTHLY AVERAGE\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-jakarta text-lg leading-loose text-text-secondary\",children:\"Last 6 months\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-[#1E49C9] font-mono\",children:formatCurrency(monthlyAverage6)})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsxs(Card,{className:\"h-full flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-[#FF6B6B] bg-opacity-20 rounded-lg\",children:/*#__PURE__*/_jsx(CreditCard,{className:\"h-5 w-5 text-[#FF6B6B]\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-jakarta text-2xl leading-normal text-text-primary font-bold tracking-wide\",children:\"IMPULSE BUYS\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-jakarta text-lg leading-loose text-text-secondary\",children:new Date().toLocaleDateString('en-US',{month:'long',year:'numeric'})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col items-center justify-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-[#FF6B6B] font-mono\",children:getCurrentMonthImpulseBuys()}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary font-jakarta mt-1\",children:\"this month\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsxs(Card,{variant:\"base\",className:\"h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-[#1E49C9] bg-opacity-20 rounded-lg\",children:/*#__PURE__*/_jsx(Target,{className:\"h-5 w-5 text-[#1E49C9]\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-jakarta text-2xl leading-normal text-text-primary font-bold tracking-wide\",children:\"CATEGORY GOALS VS EXPENSES\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-jakarta text-lg leading-loose text-text-secondary\",children:\"Monitor spending against your budget goals\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddGoalForm(true),className:componentStyles.button.secondary+\" text-sm\",children:\"ADD GOAL\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCategoryGoalsForm(true),className:componentStyles.button.outline+\" text-sm\",children:\"EDIT EXPENSE GOALS\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:getCategoryGoalsWithProgress().length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(Target,{className:\"h-12 w-12 text-text-secondary mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-text-primary font-jakarta mb-2\",children:\"No expense goals set\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary font-jakarta mb-4\",children:\"Create your first expense goal to start tracking\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddGoalForm(true),className:componentStyles.button.primary,children:\"ADD FIRST GOAL\"})]}):getCategoryGoalsWithProgress().map(category=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-[rgba(0,0,0,0.2)] border border-[rgba(255,255,255,0.1)] rounded-lg backdrop-blur-sm hover:border-[#1E49C9]/30 transition-all duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-[rgba(255,255,255,0.1)] border border-[rgba(255,255,255,0.2)] rounded-full flex items-center justify-center backdrop-blur-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded-full\",style:{backgroundColor:category.color}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-text-primary font-jakarta tracking-wide\",children:category.displayName}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 text-sm text-text-secondary font-jakarta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[category.totalSpends,\" Spend\",category.totalSpends!==1?'s':'']}),category.impulseBuys>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-[#FFD200] font-medium\",children:[\"\\u2022 \",category.impulseBuys,\" Impulse\",category.impulseBuys!==1?'s':'']})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-[#1E49C9] font-mono\",children:formatCurrency(category.spent)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-text-secondary font-jakarta\",children:[\"of \",formatCurrency(category.goal)]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-[rgba(255,255,255,0.1)] rounded-full h-2 mt-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#1E49C9] h-2 rounded-full transition-all duration-300\",style:{width:\"\".concat(Math.min(category.percentage,100),\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-text-secondary font-jakarta mt-1\",children:[category.percentage,\"% of goal\"]})]})]},category.name);})})]})})]}),activeTab==='expenses'&&/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{variant:\"base\",className:\"h-full\",title:\"ALL EXPENSES\",subtitle:\"Complete list of your financial transactions\",icon:/*#__PURE__*/_jsx(CreditCard,{className:\"h-5 w-5 text-[#1E49C9]\"}),children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-y-auto max-h-[400px] relative min-w-max\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"sticky top-0 bg-[rgba(0,0,0,0.3)] z-10 border-b border-[rgba(255,255,255,0.1)] backdrop-blur-sm\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\",children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\",children:\"DESCRIPTION\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\",children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\",children:\"VENDOR\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\",children:\"IMPULSE\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\",children:\"BILL IMAGE\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\",children:\"AMOUNT\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\",children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:expenses.length>0?expenses.map(expense=>{var _expense$billImage;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-[rgba(255,255,255,0.1)] hover:bg-[rgba(30,73,201,0.05)] transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-sm text-text-secondary font-jakarta\",children:formatDate(expense.date)}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-text-primary font-jakarta tracking-wide text-sm\",children:expense.description}),expense.tags&&expense.tags.includes('subscription')&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium font-jakarta tracking-wider bg-[rgba(30,73,201,0.2)] text-[#1E49C9] border border-[#1E49C9]/30\",children:\"\\uD83D\\uDD04 Subscription\"})]}),expense.notes&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-text-secondary font-jakarta mt-1\",children:expense.notes})]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-medium font-jakarta tracking-wider bg-[rgba(30,73,201,0.2)] text-[#1E49C9] border border-[#1E49C9]/30\",children:expense.tags&&expense.tags.includes('subscription')&&expense.tags[1]?expenseGoalCategories[expense.tags[1]]||expense.category:expenseGoalCategories[expense.category]||expense.category})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-sm text-text-secondary font-jakarta\",children:expense.vendor}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-center\",children:expense.impulseBuy?/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium font-jakarta tracking-wider bg-[rgba(255,210,0,0.2)] text-[#FFD200] border border-[#FFD200]/30\",children:\"\\u26A1 Impulse\"}):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-text-secondary font-jakarta\",children:\"-\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-center\",children:(_expense$billImage=expense.billImage)!==null&&_expense$billImage!==void 0&&_expense$billImage.url||expense.billImageUrl?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{var _expense$billImage2;return window.open(((_expense$billImage2=expense.billImage)===null||_expense$billImage2===void 0?void 0:_expense$billImage2.url)||expense.billImageUrl,'_blank');},className:\"inline-flex items-center space-x-1 text-[#1E49C9] hover:text-[#1E49C9]/80 transition-colors\",title:\"View bill image\",children:[/*#__PURE__*/_jsx(Image,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-jakarta\",children:\"View\"})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-text-secondary font-jakarta\",children:\"No image\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-right font-semibold text-[#1E49C9] font-mono text-sm\",children:formatCurrency(expense.amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(expense),className:\"text-[#1E49C9] hover:text-[#1E49C9]/80 transition-colors p-2 rounded-lg hover:bg-[rgba(30,73,201,0.1)]\",title:\"Edit expense\",children:/*#__PURE__*/_jsx(Edit3,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(expense._id,'expense'),className:\"text-red-500 hover:text-red-400 transition-colors p-2 rounded-lg hover:bg-red-500/10\",title:\"Delete expense\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]})})]},expense._id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"8\",className:\"py-12 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-text-secondary font-jakarta\",children:[/*#__PURE__*/_jsx(CreditCard,{className:\"h-12 w-12 text-text-secondary mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg mb-2 font-semibold\",children:\"No expenses yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary mb-4\",children:\"Add your first expense to get started\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddForm(true),className:componentStyles.button.primary,children:\"ADD FIRST EXPENSE\"})]})})})})]})})})}),activeTab==='subscriptions'&&/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(Card,{variant:\"base\",className:\"h-full\",title:\"ACTIVE SUBSCRIPTIONS\",subtitle:\"Manage your recurring payments and subscriptions\",icon:/*#__PURE__*/_jsx(Target,{className:\"h-5 w-5 text-[#1E49C9]\"}),children:(()=>{const subscriptionExpenses=expenses.filter(expense=>expense.tags&&expense.tags.includes('subscription'));return subscriptionExpenses.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[subscriptionExpenses.map(subscription=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-[rgba(0,0,0,0.2)] border border-[rgba(255,255,255,0.1)] rounded-lg backdrop-blur-sm hover:border-[#1E49C9]/30 transition-all duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-[rgba(30,73,201,0.2)] border border-[#1E49C9]/30 rounded-full flex items-center justify-center backdrop-blur-sm\",children:/*#__PURE__*/_jsx(Target,{className:\"h-6 w-6 text-[#1E49C9]\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-text-primary font-jakarta tracking-wide\",children:subscription.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 text-sm text-text-secondary font-jakarta\",children:[/*#__PURE__*/_jsx(\"span\",{children:subscription.recurringPattern||'monthly'}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:subscription.tags&&subscription.tags[1]?expenseGoalCategories[subscription.tags[1]]:subscription.category})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-[#1E49C9] font-mono\",children:formatCurrency(subscription.amount)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-text-secondary font-jakarta\",children:[\"per \",subscription.recurringPattern||'month']}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-2 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Handle edit subscription\nsetEditingSubscription(subscription);setSubscriptionForm({name:subscription.description,category:subscription.tags&&subscription.tags[1]?subscription.tags[1]:'other',amount:subscription.amount,frequency:subscription.recurringPattern||'monthly',notes:subscription.notes?subscription.notes.split(' | ')[2]||'':'',color:'#1E49C9'});setShowSubscriptionForm(true);},className:\"text-[#1E49C9] hover:text-[#1E49C9]/80 transition-colors p-2 rounded-lg hover:bg-[rgba(30,73,201,0.1)]\",title:\"Edit subscription\",children:/*#__PURE__*/_jsx(Edit3,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(subscription._id,'expense'),className:\"text-red-500 hover:text-red-400 transition-colors p-2 rounded-lg hover:bg-red-500/10\",title:\"Delete subscription\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]})]})]},subscription._id)),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center pt-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowSubscriptionForm(true),className:componentStyles.button.primary+\" flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"ADD SUBSCRIPTION\"]})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Target,{className:\"h-16 w-16 text-text-secondary mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-text-primary font-jakarta mb-2\",children:\"No subscriptions yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary font-jakarta mb-6\",children:\"Track your recurring payments and manage subscriptions\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSubscriptionForm(true),className:componentStyles.button.primary,children:\"ADD SUBSCRIPTION\"})]});})()})}),activeTab==='email-expenses'&&/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(Card,{variant:\"base\",className:\"h-full\",title:\"EMAIL EXPENSE FUNCTIONALITY\",subtitle:\"Automatically log expenses by forwarding receipts to a unique email address\",icon:/*#__PURE__*/_jsx(Mail,{className:\"h-5 w-5 text-[#1E49C9]\"}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-3\",children:\"How It Works:\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"list-decimal list-inside space-y-2 text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Get your unique forwarding email address\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Forward receipts, invoices, or expense emails to this address\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Our AI automatically extracts expense details\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Review and confirm the parsed information\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-3\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-[#1E49C9]\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:\"Supported Formats\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700\",children:\"PDF receipts, image attachments, and text-based invoices are all supported.\"})]})]})}),/*#__PURE__*/_jsx(Card,{variant:\"base\",className:\"h-full\",title:\"EMAIL FORWARDING SETTINGS\",subtitle:\"Configure your unique email address for automatic expense logging\",icon:/*#__PURE__*/_jsx(Mail,{className:\"h-5 w-5 text-[#1E49C9]\"}),children:/*#__PURE__*/_jsx(EmailExpenseSettings,{})}),/*#__PURE__*/_jsx(Card,{variant:\"base\",className:\"h-full\",title:\"EMAIL-CREATED EXPENSES\",subtitle:\"Expenses automatically created from forwarded emails\",icon:/*#__PURE__*/_jsx(Mail,{className:\"h-5 w-5 text-[#1E49C9]\"}),children:/*#__PURE__*/_jsx(EmailExpensesList,{})})]})})]}),showAddForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4\",children:/*#__PURE__*/_jsxs(motion.div,{className:\"bg-[rgba(0,0,0,0.8)] border border-[rgba(255,255,255,0.2)] rounded-2xl p-6 w-full max-w-md max-h-[85vh] overflow-y-auto shadow-2xl backdrop-blur-[32px]\",initial:{opacity:0,scale:0.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0.9,y:20},transition:{duration:0.3,ease:\"easeOut\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-text-primary font-jakarta tracking-wide\",children:editingItem?'EDIT EXPENSE':'ADD NEW EXPENSE'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddForm(false);setEditingItem(null);setFormData({amount:'',category:'',description:'',vendor:'',date:new Date().toISOString().split('T')[0],notes:'',billImage:null,billImageUrl:'',impulseBuy:false});},className:\"text-text-secondary hover:text-text-primary transition-colors p-1\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),ocrSuccess&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-[#1E49C9]/20 border border-[#1E49C9]/50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-[#1E49C9] font-jakarta\",children:\"\\u2728 OCR Analysis Complete! Form fields have been auto-populated.\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-[#1E49C9] font-jakarta mt-1\",children:[\"Amount: \\u20B9\",formData.amount,\" | Vendor: \",formData.vendor||'N/A',\" | Category: \",formData.category||'N/A']})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:[\"AMOUNT \",isAnalyzingImage&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[#1E49C9]\",children:\"(Analyzing...)\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",required:true,value:formData.amount,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{amount:parseFloat(e.target.value)})),className:componentStyles.input.base+\" \".concat(isAnalyzingImage?'border-[#1E49C9]':''),placeholder:\"0.00\",disabled:isAnalyzingImage})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"EXPENSE GOAL\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.category,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{category:e.target.value})),className:componentStyles.input.base,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Expense Goal\"}),expenseGoals&&expenseGoals.length>0?expenseGoals.map(goal=>/*#__PURE__*/_jsx(\"option\",{value:goal.category,children:mapBackendCategoryToDisplayName(goal.category)},goal._id)):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"option\",{value:\"food\",children:\"Nourishing food\"}),/*#__PURE__*/_jsx(\"option\",{value:\"transportation\",children:\"Safe, convenient travel\"}),/*#__PURE__*/_jsx(\"option\",{value:\"housing\",children:\"Safe, comfortable and peaceful home\"}),/*#__PURE__*/_jsx(\"option\",{value:\"utilities\",children:\"Maintain living essentials\"}),/*#__PURE__*/_jsx(\"option\",{value:\"healthcare\",children:\"Long term wellbeing and protective healthcare\"}),/*#__PURE__*/_jsx(\"option\",{value:\"entertainment\",children:\"Enjoy life, have fun\"}),/*#__PURE__*/_jsx(\"option\",{value:\"shopping\",children:\"Value, comfort or joyful shopping\"}),/*#__PURE__*/_jsx(\"option\",{value:\"education\",children:\"Learning, growing and investing in my future\"}),/*#__PURE__*/_jsx(\"option\",{value:\"travel\",children:\"Exploring new places\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"VENDOR\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.vendor,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{vendor:e.target.value})),className:componentStyles.input.base,placeholder:\"Where did you spend?\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.impulseBuy,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{impulseBuy:e.target.checked})),className:\"w-4 h-4 text-[#1E49C9] bg-[rgba(0,0,0,0.2)] border-[rgba(255,255,255,0.2)] rounded focus:ring-[#1E49C9] focus:ring-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-text-secondary font-jakarta tracking-wider\",children:\"IMPULSE BUY\"})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"DESCRIPTION\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.description,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{description:e.target.value})),className:componentStyles.input.base,placeholder:\"What was this for?\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"DATE\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:formData.date,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{date:e.target.value})),className:componentStyles.input.base})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"NOTES\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.notes,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{notes:e.target.value})),className:componentStyles.input.base,rows:\"3\",placeholder:\"Additional notes...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"BILL IMAGE\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:formData.billImageUrl?/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:formData.billImageUrl,alt:\"Bill preview\",className:\"w-full h-32 object-cover rounded-lg border border-[rgba(255,255,255,0.2)]\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:removeBillImage,className:\"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 transition-colors\",title:\"Remove image\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-3 w-3\"})}),isAnalyzingImage&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black/50 flex items-center justify-center rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1E49C9] mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-white font-jakarta\",children:\"Analyzing bill...\"})]})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"border-2 border-dashed border-[rgba(255,255,255,0.2)] rounded-lg p-6 text-center hover:border-[#1E49C9] transition-colors\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleBillImageUpload,className:\"hidden\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(Upload,{className:\"h-8 w-8 text-text-secondary mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary font-jakarta\",children:\"Click to upload bill image\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-text-secondary font-jakarta\",children:\"JPG, PNG, GIF up to 5MB\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-[#1E49C9] font-jakarta\",children:\"\\u2728 Auto-extract expense details\"})]})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowAddForm(false);setEditingItem(null);setFormData({amount:'',category:'',description:'',vendor:'',date:new Date().toISOString().split('T')[0],notes:'',billImage:null,billImageUrl:'',impulseBuy:false});},className:componentStyles.button.outline+\" flex-1\",children:\"CANCEL\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:componentStyles.button.primary+\" flex-1\",children:[editingItem?'UPDATE':'ADD',\" EXPENSE\"]})]})]})]})}),showPantryUpdateDialog.show&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] p-4\",onClick:closePantryDialog,children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#11151A] border-2 border-[#2A313A] rounded-lg p-6 w-full max-w-md shadow-2xl relative overflow-hidden\",style:{clipPath:'polygon(0 0, calc(100% - 6px) 0, 100% 6px, 100% 100%, 6px 100%, 0 calc(100% - 6px))'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 opacity-5 bg-noise-pattern pointer-events-none\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-[#1E49C9] to-[#FFD200]\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-[#E8EEF2] mb-4 font-oswald tracking-wide\",children:\"\\uD83D\\uDED2 Update Pantry Inventory?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-[#C9D1D9] font-inter\",children:\"We detected food items in your receipt. Would you like to add them to your pantry inventory?\"}),selectedPantryItems.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#FFD200]/20 border border-[#FFD200]/50 text-[#FFD200] rounded-md p-2 text-xs font-inter\",children:\"\\u26A0\\uFE0F Please select at least one item to add to your pantry\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0A0C0F] border border-[#2A313A] rounded-md p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm font-medium text-[#E8EEF2] font-oswald tracking-wide\",children:[\"Detected Items (\",selectedPantryItems.length,\"/\",showPantryUpdateDialog.items.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:selectAllPantryItems,className:\"px-2 py-1 text-xs bg-[#1E49C9]/20 border border-[#1E49C9]/50 text-[#1E49C9] rounded hover:bg-[#1E49C9]/30 transition-colors\",children:\"Select All\"}),/*#__PURE__*/_jsx(\"button\",{onClick:deselectAllPantryItems,className:\"px-2 py-1 text-xs bg-[#2A313A] border border-[#2A313A] text-[#C9D1D9] rounded hover:bg-[#2A313A]/80 transition-colors\",children:\"Deselect All\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-32 overflow-y-auto\",children:showPantryUpdateDialog.items.map((item,index)=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-3 cursor-pointer hover:bg-[#2A313A]/50 p-2 rounded transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedPantryItems.includes(item),onChange:()=>togglePantryItem(item),className:\"w-4 h-4 text-[#1E49C9] bg-[#0A0C0F] border-[#2A313A] rounded focus:ring-[#1E49C9] focus:ring-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-inter \".concat(selectedPantryItems.includes(item)?'text-[#E8EEF2]':'text-[#8B949E]'),children:item})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 pt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:closePantryDialog,className:\"flex-1 px-4 py-2 border-2 border-[#2A313A] text-[#C9D1D9] rounded-md hover:bg-[#2A313A] font-oswald tracking-wide transition-colors text-sm\",children:\"Skip\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{console.log('ðŸ” Update Pantry button clicked!');console.log('ðŸ” Selected items:',selectedPantryItems);handlePantryUpdate();},disabled:selectedPantryItems.length===0,className:\"flex-1 px-4 py-2 rounded-md font-oswald tracking-wide transition-colors text-sm \".concat(selectedPantryItems.length===0?'bg-[#2A313A] text-[#8B949E] cursor-not-allowed':'bg-[#1E49C9] text-white hover:bg-[#1E49C9]/80'),children:[\"Update Pantry (\",selectedPantryItems.length,\")\"]})]})]})]})}),showAddGoalForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4\",children:/*#__PURE__*/_jsxs(motion.div,{className:\"bg-[rgba(0,0,0,0.8)] border border-[rgba(255,255,255,0.2)] rounded-2xl p-6 w-full max-w-md max-h-[85vh] overflow-y-auto shadow-2xl backdrop-blur-[32px]\",initial:{opacity:0,scale:0.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0.9,y:20},transition:{duration:0.3,ease:\"easeOut\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-text-primary font-jakarta tracking-wide\",children:editingGoal?'EDIT EXPENSE GOAL':'ADD EXPENSE GOAL'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddGoalForm(false);resetGoalForm();},className:\"text-text-secondary hover:text-text-primary transition-colors p-1\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddGoal,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"EXPENSE GOALS *\"}),/*#__PURE__*/_jsxs(\"select\",{value:newGoalForm.category,onChange:e=>setNewGoalForm(_objectSpread(_objectSpread({},newGoalForm),{},{category:e.target.value})),className:\"\".concat(componentStyles.input.base,\" w-full appearance-none cursor-pointer pr-10\"),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Select an expense goal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"nourishing_food\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Nourishing food\"}),/*#__PURE__*/_jsx(\"option\",{value:\"safe_convenient_travel\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Safe, convenient travel\"}),/*#__PURE__*/_jsx(\"option\",{value:\"safe_comfortable_home\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Safe, comfortable and peaceful home\"}),/*#__PURE__*/_jsx(\"option\",{value:\"living_essentials\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Maintain living essentials\"}),/*#__PURE__*/_jsx(\"option\",{value:\"healthcare_wellbeing\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Long term wellbeing and protective healthcare\"}),/*#__PURE__*/_jsx(\"option\",{value:\"enjoy_life\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Enjoy life, have fun\"}),/*#__PURE__*/_jsx(\"option\",{value:\"value_shopping\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Value, comfort or joyful shopping\"}),/*#__PURE__*/_jsx(\"option\",{value:\"learning_growing\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Learning, growing and investing in my future\"}),/*#__PURE__*/_jsx(\"option\",{value:\"exploring_places\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Exploring new places\"}),/*#__PURE__*/_jsx(\"option\",{value:\"prepare_unexpected\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Prepare for the unexpected\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Other\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-text-secondary\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"AMOUNT *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",value:newGoalForm.amount,onChange:e=>setNewGoalForm(_objectSpread(_objectSpread({},newGoalForm),{},{amount:parseFloat(e.target.value)||''})),className:\"\".concat(componentStyles.input.base,\" w-full\"),placeholder:\"0.00\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"COLOR\"}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:newGoalForm.color,onChange:e=>setNewGoalForm(_objectSpread(_objectSpread({},newGoalForm),{},{color:e.target.value})),className:\"\".concat(componentStyles.input.base,\" w-full h-10\")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"NOTES\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newGoalForm.notes,onChange:e=>setNewGoalForm(_objectSpread(_objectSpread({},newGoalForm),{},{notes:e.target.value})),className:\"\".concat(componentStyles.input.base,\" w-full\"),rows:\"3\",placeholder:\"Optional notes about this goal...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowAddGoalForm(false);resetGoalForm();},className:componentStyles.button.outline+\" flex-1\",children:\"CANCEL\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:()=>console.log('ðŸŽ¯ Submit button clicked'),className:componentStyles.button.primary+\" flex-1\",children:editingGoal?'UPDATE GOAL':'ADD GOAL'})]})]})]})}),showCategoryGoalsForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4\",children:/*#__PURE__*/_jsxs(motion.div,{className:\"bg-[rgba(0,0,0,0.8)] border border-[rgba(255,255,255,0.2)] rounded-2xl p-6 w-full max-w-md max-h-[85vh] overflow-y-auto shadow-2xl backdrop-blur-[32px]\",initial:{opacity:0,scale:0.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0.9,y:20},transition:{duration:0.3,ease:\"easeOut\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-text-primary font-jakarta tracking-wide\",children:\"EDIT EXPENSE GOALS\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCategoryGoalsForm(false),className:\"text-text-secondary hover:text-text-primary transition-colors p-1\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:expenseGoals.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(Target,{className:\"h-12 w-12 text-text-secondary mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-text-primary font-jakarta mb-2\",children:\"No expense goals set\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-text-secondary font-jakarta mb-4\",children:\"Add your first expense goal to get started\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowCategoryGoalsForm(false);setShowAddGoalForm(true);},className:componentStyles.button.primary,children:\"ADD FIRST GOAL\"})]}):expenseGoals.map(goal=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:mapBackendCategoryToDisplayName(goal.category)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",value:goal.amount,onChange:e=>{const newAmount=parseFloat(e.target.value)||0;setExpenseGoals(prev=>prev.map(g=>g._id===goal._id?_objectSpread(_objectSpread({},g),{},{amount:newAmount}):g));},className:\"\".concat(componentStyles.input.base,\" w-full\"),placeholder:\"0.00\"})]},goal._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowCategoryGoalsForm(false),className:componentStyles.button.outline+\" flex-1\",children:\"CANCEL\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:async()=>{try{const token=localStorage.getItem('token');// Update each goal individually\nconst updatePromises=expenseGoals.map(goal=>axios.put(buildApiUrl(\"/api/finance/goals/\".concat(goal._id)),{amount:goal.amount},{headers:{Authorization:\"Bearer \".concat(token)}}));await Promise.all(updatePromises);// Refresh the data to get updated goals\nawait fetchFinancialData();setShowCategoryGoalsForm(false);toast.success('Goals updated successfully!');}catch(error){console.error('Error updating goals:',error);toast.error('Error updating goals');}},className:componentStyles.button.primary+\" flex-1\",disabled:expenseGoals.length===0,children:\"SAVE GOALS\"})]})]})}),showSubscriptionForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4\",children:/*#__PURE__*/_jsxs(motion.div,{className:\"bg-[rgba(0,0,0,0.8)] border border-[rgba(255,255,255,0.2)] rounded-2xl p-6 w-full max-w-md max-h-[85vh] overflow-y-auto shadow-2xl backdrop-blur-[32px]\",initial:{opacity:0,scale:0.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0.9,y:20},transition:{duration:0.3,ease:\"easeOut\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-text-primary font-jakarta tracking-wide\",children:editingSubscription?'EDIT SUBSCRIPTION':'ADD NEW SUBSCRIPTION'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowSubscriptionForm(false);setEditingSubscription(null);setSubscriptionForm({name:'',category:'',amount:'',frequency:'monthly',notes:'',color:'#1E49C9'});},className:\"text-text-secondary hover:text-text-primary transition-colors p-1\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubscriptionSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"SUBSCRIPTION NAME *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:subscriptionForm.name,onChange:e=>setSubscriptionForm(_objectSpread(_objectSpread({},subscriptionForm),{},{name:e.target.value})),className:componentStyles.input.base+\" w-full\",placeholder:\"e.g., Netflix, Spotify, Gym Membership\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"EXPENSE GOAL CATEGORY *\"}),/*#__PURE__*/_jsxs(\"select\",{value:subscriptionForm.category,onChange:e=>setSubscriptionForm(_objectSpread(_objectSpread({},subscriptionForm),{},{category:e.target.value})),className:componentStyles.input.base+\" w-full appearance-none cursor-pointer pr-10\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Select expense goal category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"nourishing_food\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Nourishing food\"}),/*#__PURE__*/_jsx(\"option\",{value:\"safe_convenient_travel\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Safe, convenient travel\"}),/*#__PURE__*/_jsx(\"option\",{value:\"safe_comfortable_home\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Safe, comfortable and peaceful home\"}),/*#__PURE__*/_jsx(\"option\",{value:\"living_essentials\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Maintain living essentials\"}),/*#__PURE__*/_jsx(\"option\",{value:\"healthcare_wellbeing\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Long term wellbeing and protective healthcare\"}),/*#__PURE__*/_jsx(\"option\",{value:\"enjoy_life\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Enjoy life, have fun\"}),/*#__PURE__*/_jsx(\"option\",{value:\"value_shopping\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Value, comfort or joyful shopping\"}),/*#__PURE__*/_jsx(\"option\",{value:\"learning_growing\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Learning, growing and investing in my future\"}),/*#__PURE__*/_jsx(\"option\",{value:\"exploring_places\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Exploring new places\"}),/*#__PURE__*/_jsx(\"option\",{value:\"prepare_unexpected\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Prepare for the unexpected\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Other\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-text-secondary\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"AMOUNT *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",required:true,value:subscriptionForm.amount,onChange:e=>setSubscriptionForm(_objectSpread(_objectSpread({},subscriptionForm),{},{amount:parseFloat(e.target.value)})),className:componentStyles.input.base+\" w-full\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"REPEAT FREQUENCY *\"}),/*#__PURE__*/_jsxs(\"select\",{value:subscriptionForm.frequency,onChange:e=>setSubscriptionForm(_objectSpread(_objectSpread({},subscriptionForm),{},{frequency:e.target.value})),className:componentStyles.input.base+\" w-full appearance-none cursor-pointer pr-10\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"weekly\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Weekly\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monthly\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Monthly\"}),/*#__PURE__*/_jsx(\"option\",{value:\"quarterly\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Quarterly\"}),/*#__PURE__*/_jsx(\"option\",{value:\"yearly\",className:\"bg-[rgba(0,0,0,0.8)] text-text-primary\",children:\"Yearly\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-text-secondary\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"NOTES\"}),/*#__PURE__*/_jsx(\"textarea\",{value:subscriptionForm.notes,onChange:e=>setSubscriptionForm(_objectSpread(_objectSpread({},subscriptionForm),{},{notes:e.target.value})),className:componentStyles.input.base+\" w-full\",rows:\"3\",placeholder:\"Additional notes about this subscription...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\",children:\"COLOR\"}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:subscriptionForm.color,onChange:e=>setSubscriptionForm(_objectSpread(_objectSpread({},subscriptionForm),{},{color:e.target.value})),className:componentStyles.input.base+\" w-full h-10\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowSubscriptionForm(false);setEditingSubscription(null);setSubscriptionForm({name:'',category:'',amount:'',frequency:'monthly',notes:'',color:'#1E49C9'});},className:componentStyles.button.outline+\" flex-1\",children:\"CANCEL\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:componentStyles.button.primary+\" flex-1\",children:[editingSubscription?'UPDATE':'ADD',\" SUBSCRIPTION\"]})]})]})]})})]});};export default Finance;","map":{"version":3,"names":["React","useState","useEffect","motion","toast","buildApiUrl","Plus","Edit3","Trash2","Upload","Image","DollarSign","TrendingUp","TrendingDown","CreditCard","Target","Mail","CheckCircle","axios","Card","componentStyles","animations","EmailExpenseSettings","EmailExpensesList","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Finance","expenses","setExpenses","summary","setSummary","loading","setLoading","activeTab","setActiveTab","showAddForm","setShowAddForm","editingItem","setEditingItem","showCategoryGoalsForm","setShowCategoryGoalsForm","showAddGoalForm","setShowAddGoalForm","editingGoal","setEditingGoal","showSubscriptionForm","setShowSubscriptionForm","editingSubscription","setEditingSubscription","categoryGoals","setCategoryGoals","food","transportation","shopping","entertainment","healthcare","utilities","housing","travel","education","other","expenseGoals","setExpenseGoals","newGoalForm","setNewGoalForm","category","amount","period","notes","color","formData","setFormData","type","description","vendor","source","date","Date","toISOString","split","billImage","billImageUrl","impulseBuy","subscriptionForm","setSubscriptionForm","name","frequency","toMonthKey","d","y","getFullYear","m","String","getMonth","padStart","concat","getCurrentMonthKey","slice","getPreviousMonthKey","setMonth","getMonthlyTotals","map","forEach","exp","key","currentMonthKey","previousMonthKey","monthlyTotals","currentMonthTotal","previousMonthTotal","getSixMonthAverage","months","i","push","length","sum","reduce","a","b","monthlyAverage6","fetchFinancialData","token","localStorage","getItem","expensesRes","summaryRes","goalsRes","Promise","all","get","headers","Authorization","data","error","console","mapExpenseGoalToBackendCategory","frontendCategory","categoryMap","mapBackendCategoryToDisplayName","backendCategory","reverseMap","handleAddGoal","e","preventDefault","log","isNaN","goalData","_objectSpread","response","put","_id","prev","goal","existingGoal","find","post","success","_error$response","_error$response2","_error$response2$data","message","handleEditGoal","toString","handleDeleteGoal","goalId","goalToDelete","delete","filter","updated","resetGoalForm","handleSubmit","endpoint","expenseData","filename","url","handleDelete","id","mapExpenseGoalToFinanceCategory","expenseGoalCategory","handleSubscriptionSubmit","subscriptionData","expenseGoalCategories","isRecurring","recurringPattern","tags","handleEdit","item","_item$billImage","formatCurrency","Intl","NumberFormat","style","currency","format","formatDate","toLocaleDateString","getCategoryGoalsWithProgress","currentMonth","currentMonthExpenses","expense","startsWith","categoryExpenses","spent","impulseBuys","totalSpends","percentage","Math","round","displayName","sort","getCurrentMonthImpulseBuys","isAnalyzingImage","setIsAnalyzingImage","ocrSuccess","setOcrSuccess","showPantryUpdateDialog","setShowPantryUpdateDialog","show","items","selectedPantryItems","setSelectedPantryItems","handleBillImageUpload","file","target","files","reader","FileReader","onload","event","result","analyzeBillImage","readAsDataURL","size","FormData","append","apiUrl","fetch","method","body","status","ok","Object","fromEntries","entries","json","keys","newFormData","setTimeout","extractedFields","join","pantryItems","extractPantryItems","warn","warning","removeBillImage","pantryKeywords","trim","foundItems","cleanItem","replace","words","word","cleanWord","toLowerCase","some","keyword","includes","capitalizedWord","charAt","toUpperCase","hasFoodKeyword","Set","handlePantryUpdate","pantryData","quantity","unit","purchaseDate","expiryDate","JSON","stringify","errorText","text","togglePantryItem","selectAllPantryItems","deselectAllPantryItems","closePantryDialog","className","children","div","initial","opacity","animate","transition","duration","variant","title","subtitle","icon","tab","onClick","button","primary","month","year","secondary","outline","backgroundColor","width","min","_expense$billImage","_expense$billImage2","window","open","colSpan","subscriptionExpenses","subscription","scale","exit","ease","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","onSubmit","step","required","value","onChange","parseFloat","input","base","placeholder","disabled","checked","rows","src","alt","accept","clipPath","stopPropagation","index","newAmount","g","updatePromises"],"sources":["/Users/priyas/Desktop/untangle-platform/src/pages/Finance.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport toast from 'react-hot-toast';\n\nimport { buildApiUrl } from '../config';\nimport { \n  Plus, \n  Edit3,\n  Trash2,\n  Upload,\n  Image,\n  DollarSign,\n  TrendingUp,\n  TrendingDown,\n  CreditCard,\n  Target,\n  Mail,\n  CheckCircle\n} from 'lucide-react';\nimport axios from 'axios';\nimport Card from '../components/ui/Card';\nimport { componentStyles, animations } from '../styles/designTokens';\nimport EmailExpenseSettings from '../components/EmailExpenseSettings';\nimport EmailExpensesList from '../components/EmailExpensesList';\n\nconst Finance = () => {\n  \n  const [expenses, setExpenses] = useState([]);\n  const [summary, setSummary] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('overview');\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingItem, setEditingItem] = useState(null);\n  const [showCategoryGoalsForm, setShowCategoryGoalsForm] = useState(false);\n  const [showAddGoalForm, setShowAddGoalForm] = useState(false);\n  const [editingGoal, setEditingGoal] = useState(null);\n  const [showSubscriptionForm, setShowSubscriptionForm] = useState(false);\n  const [editingSubscription, setEditingSubscription] = useState(null);\n  const [categoryGoals, setCategoryGoals] = useState({\n    food: 2000,\n    transportation: 1500,\n    shopping: 3000,\n    entertainment: 1000,\n    healthcare: 2000,\n    utilities: 1500,\n    housing: 25000,\n    travel: 5000,\n    education: 3000,\n    other: 1000\n  });\n  const [expenseGoals, setExpenseGoals] = useState([]);\n  const [newGoalForm, setNewGoalForm] = useState({\n    category: '',\n    amount: '',\n    period: 'monthly', // Always monthly\n    notes: '',\n    color: '#1E49C9'\n  });\n  const [formData, setFormData] = useState({\n    type: 'expense',\n    amount: '',\n    category: '',\n    description: '',\n    vendor: '',\n    source: '',\n    date: new Date().toISOString().split('T')[0],\n    notes: '',\n    billImage: null,\n    billImageUrl: '',\n    impulseBuy: false\n  });\n  const [subscriptionForm, setSubscriptionForm] = useState({\n    name: '',\n    category: '',\n    amount: '',\n    frequency: 'monthly',\n    notes: '',\n    color: '#1E49C9'\n  });\n\n  // Derived KPI helpers\n  const toMonthKey = (d) => {\n    const date = new Date(d);\n    const y = date.getFullYear();\n    const m = String(date.getMonth() + 1).padStart(2, '0');\n    return `${y}-${m}`;\n  };\n\n  const getCurrentMonthKey = () => new Date().toISOString().slice(0, 7);\n\n  const getPreviousMonthKey = () => {\n    const d = new Date();\n    d.setMonth(d.getMonth() - 1);\n    return d.toISOString().slice(0, 7);\n  };\n\n  const getMonthlyTotals = () => {\n    const map = {};\n    (expenses || []).forEach((exp) => {\n      if (!exp || !exp.date || typeof exp.amount !== 'number') return;\n      const key = toMonthKey(exp.date);\n      map[key] = (map[key] || 0) + exp.amount;\n    });\n    return map;\n  };\n\n  const currentMonthKey = getCurrentMonthKey();\n  const previousMonthKey = getPreviousMonthKey();\n  const monthlyTotals = getMonthlyTotals();\n  const currentMonthTotal = monthlyTotals[currentMonthKey] || 0;\n  const previousMonthTotal = monthlyTotals[previousMonthKey] || 0;\n\n  const getSixMonthAverage = () => {\n    const months = [];\n    const d = new Date();\n    for (let i = 0; i < 6; i++) {\n      const key = d.toISOString().slice(0, 7);\n      months.push(monthlyTotals[key] || 0);\n      d.setMonth(d.getMonth() - 1);\n    }\n    if (months.length === 0) return 0;\n    const sum = months.reduce((a, b) => a + b, 0);\n    return sum / months.length;\n  };\n\n  const monthlyAverage6 = getSixMonthAverage();\n\n  useEffect(() => {\n    fetchFinancialData();\n  }, []);\n\n  const fetchFinancialData = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('token');\n      \n      const [expensesRes, summaryRes, goalsRes] = await Promise.all([\n        axios.get(buildApiUrl('/api/finance/expenses'), {\n          headers: { Authorization: `Bearer ${token}` }\n        }),\n        axios.get(buildApiUrl('/api/finance/summary'), {\n          headers: { Authorization: `Bearer ${token}` }\n        }),\n        axios.get(buildApiUrl('/api/finance/goals'), {\n          headers: { Authorization: `Bearer ${token}` }\n        })\n      ]);\n\n      setExpenses(expensesRes.data);\n      setSummary(summaryRes.data);\n      setExpenseGoals(goalsRes.data);\n    } catch (error) {\n      console.error('Error fetching financial data:', error);\n      toast.error('Failed to load financial data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Map frontend expense goal categories to backend-compatible categories\n  const mapExpenseGoalToBackendCategory = (frontendCategory) => {\n    const categoryMap = {\n      'nourishing_food': 'food',\n      'safe_convenient_travel': 'transportation',\n      'safe_comfortable_home': 'housing',\n      'living_essentials': 'utilities',\n      'healthcare_wellbeing': 'healthcare',\n      'enjoy_life': 'entertainment',\n      'value_shopping': 'shopping',\n      'learning_growing': 'education',\n      'exploring_places': 'travel',\n      'prepare_unexpected': 'insurance',\n      'other': 'other'\n    };\n    return categoryMap[frontendCategory] || 'other';\n  };\n\n  // Map backend categories back to frontend display names\n  const mapBackendCategoryToDisplayName = (backendCategory) => {\n    const reverseMap = {\n      'food': 'Nourishing food',\n      'transportation': 'Safe, convenient travel',\n      'housing': 'Safe, comfortable and peaceful home',\n      'utilities': 'Maintain living essentials',\n      'healthcare': 'Long term wellbeing and protective healthcare',\n      'entertainment': 'Enjoy life, have fun',\n      'shopping': 'Value, comfort or joyful shopping',\n      'education': 'Learning, growing and investing in my future',\n      'travel': 'Exploring new places',\n      'insurance': 'Prepare for the unexpected',\n      'other': 'Other'\n    };\n    return reverseMap[backendCategory] || 'Other';\n  };\n\n  // Expense Goals Management Functions\n  const handleAddGoal = async (e) => {\n    e.preventDefault();\n    console.log('ðŸŽ¯ Add Goal form submitted:', newGoalForm);\n    \n    // Validate required fields\n    if (!newGoalForm.category || !newGoalForm.amount || isNaN(newGoalForm.amount) || newGoalForm.amount <= 0) {\n      toast.error('Please fill in all required fields with valid values');\n      return;\n    }\n    \n    try {\n      const token = localStorage.getItem('token');\n      \n      // Map frontend category to backend category\n      const backendCategory = mapExpenseGoalToBackendCategory(newGoalForm.category);\n      const goalData = {\n        ...newGoalForm,\n        category: backendCategory\n      };\n      \n      console.log('ðŸŽ¯ Mapped goal data:', goalData);\n      \n      if (editingGoal) {\n        // Update existing goal\n        const response = await axios.put(\n          buildApiUrl(`/api/finance/goals/${editingGoal._id}`),\n          goalData,\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n        \n        setExpenseGoals(prev => \n          prev.map(goal => \n            goal._id === editingGoal._id ? response.data : goal\n          )\n        );\n        \n        // Update category goals\n        setCategoryGoals(prev => ({\n          ...prev,\n          [response.data.category]: response.data.amount\n        }));\n        \n        setEditingGoal(null);\n      } else {\n        // Check if goal already exists for this category\n        const existingGoal = expenseGoals.find(goal => goal.category === backendCategory);\n        if (existingGoal) {\n          toast.error('A goal already exists for this category. Please edit the existing goal instead.');\n          return;\n        }\n        \n        // Create new goal\n        const response = await axios.post(\n          buildApiUrl('/api/finance/goals'),\n          goalData,\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n        \n        setExpenseGoals(prev => [...prev, response.data]);\n        \n        // Update category goals\n        setCategoryGoals(prev => ({\n          ...prev,\n          [response.data.category]: response.data.amount\n        }));\n      }\n      \n      // Reset form\n      setNewGoalForm({\n        category: '',\n        amount: '',\n        period: 'monthly',\n        notes: '',\n        color: '#1E49C9'\n      });\n      setShowAddGoalForm(false);\n      \n      toast.success(editingGoal ? 'Goal updated successfully!' : 'Goal added successfully!');\n    } catch (error) {\n      console.error('Error managing expense goal:', error);\n      console.error('Error details:', error.response?.data);\n      toast.error(error.response?.data?.message || 'Error managing expense goal');\n    }\n  };\n\n  const handleEditGoal = (goal) => {\n    setEditingGoal(goal);\n    setNewGoalForm({\n      category: goal.category,\n      amount: goal.amount.toString(),\n      period: goal.period,\n      notes: goal.notes || '',\n      color: goal.color\n    });\n    setShowAddGoalForm(true);\n  };\n\n  const handleDeleteGoal = async (goalId) => {\n    const goalToDelete = expenseGoals.find(goal => goal._id === goalId);\n    if (!goalToDelete) return;\n    \n    try {\n      const token = localStorage.getItem('token');\n      await axios.delete(\n        buildApiUrl(`/api/finance/goals/${goalId}`),\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      \n      // Remove from expense goals\n      setExpenseGoals(prev => prev.filter(goal => goal._id !== goalId));\n      \n      // Remove from category goals\n      setCategoryGoals(prev => {\n        const updated = { ...prev };\n        delete updated[goalToDelete.category];\n        return updated;\n      });\n      \n      toast.success(`${goalToDelete.category} goal deleted successfully!`);\n    } catch (error) {\n      console.error('Error deleting expense goal:', error);\n      toast.error('Error deleting expense goal');\n    }\n  };\n\n  const resetGoalForm = () => {\n    setNewGoalForm({\n      category: '',\n      amount: '',\n      period: 'monthly', // Always monthly\n      notes: '',\n      color: '#1E49C9'\n    });\n    setEditingGoal(null);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n      const endpoint = buildApiUrl('/api/finance/expenses');\n      \n      // Prepare the data to send\n      const expenseData = {\n        ...formData,\n        billImage: formData.billImage ? {\n          filename: formData.billImage.name,\n          url: formData.billImageUrl,\n          data: formData.billImageUrl // Send base64 data\n        } : null\n      };\n      \n      // Remove the file object as it can't be serialized\n      delete expenseData.billImage;\n      \n      if (editingItem) {\n        await axios.put(`${endpoint}/${editingItem._id}`, expenseData, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n      } else {\n        await axios.post(endpoint, expenseData, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n      }\n      \n      setShowAddForm(false);\n      setEditingItem(null);\n      setFormData({\n        amount: '',\n        category: '',\n        description: '',\n        vendor: '',\n        date: new Date().toISOString().split('T')[0],\n        notes: '',\n        billImage: null,\n        billImageUrl: '',\n        impulseBuy: false\n      });\n      \n      fetchFinancialData();\n    } catch (error) {\n      console.error('Error saving financial record:', error);\n    }\n  };\n\n  const handleDelete = async (id, type) => {\n    \n    try {\n      const token = localStorage.getItem('token');\n      const endpoint = buildApiUrl('/api/finance/expenses');\n      \n      await axios.delete(`${endpoint}/${id}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      fetchFinancialData();\n    } catch (error) {\n      console.error('Error deleting record:', error);\n    }\n  };\n\n  // Map expense goal categories to Finance model categories\n  const mapExpenseGoalToFinanceCategory = (expenseGoalCategory) => {\n    const categoryMap = {\n      'nourishing_food': 'food',\n      'safe_convenient_travel': 'transportation',\n      'safe_comfortable_home': 'housing',\n      'living_essentials': 'utilities',\n      'healthcare_wellbeing': 'healthcare',\n      'enjoy_life': 'entertainment',\n      'value_shopping': 'shopping',\n      'learning_growing': 'education',\n      'exploring_places': 'travel',\n      'prepare_unexpected': 'other',\n      'other': 'other'\n    };\n    return categoryMap[expenseGoalCategory] || 'other';\n  };\n\n  const handleSubscriptionSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n      const endpoint = buildApiUrl('/api/finance/expenses');\n      \n      const subscriptionData = {\n        amount: subscriptionForm.amount,\n        category: mapExpenseGoalToFinanceCategory(subscriptionForm.category),\n        description: subscriptionForm.name,\n        vendor: subscriptionForm.name, // Use name as vendor for subscriptions\n        date: new Date().toISOString().split('T')[0],\n        notes: `Subscription | Frequency: ${subscriptionForm.frequency} | Goal: ${expenseGoalCategories[subscriptionForm.category]}${subscriptionForm.notes ? ` | ${subscriptionForm.notes}` : ''}`,\n        isRecurring: true,\n        recurringPattern: subscriptionForm.frequency,\n        tags: ['subscription', subscriptionForm.category]\n      };\n      \n      if (editingSubscription) {\n        await axios.put(`${endpoint}/${editingSubscription._id}`, subscriptionData, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        toast.success('Subscription updated successfully!');\n      } else {\n        await axios.post(endpoint, subscriptionData, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        toast.success('Subscription added successfully!');\n      }\n      \n      setShowSubscriptionForm(false);\n      setEditingSubscription(null);\n      setSubscriptionForm({\n        name: '',\n        category: '',\n        amount: '',\n        frequency: 'monthly',\n        notes: '',\n        color: '#1E49C9'\n      });\n      \n      // Refresh data\n      fetchFinancialData();\n    } catch (error) {\n      console.error('Error saving subscription:', error);\n      toast.error('Failed to save subscription. Please try again.');\n    }\n  };\n\n  const handleEdit = (item) => {\n    setEditingItem(item);\n    setFormData({\n      amount: item.amount,\n      category: item.category || '',\n      description: item.description || '',\n      vendor: item.vendor || '',\n      date: new Date(item.date).toISOString().split('T')[0],\n      notes: item.notes || '',\n      billImage: null,\n      billImageUrl: item.billImage?.url || item.billImageUrl || '',\n      impulseBuy: item.impulseBuy || false\n    });\n    setShowAddForm(true);\n  };\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR'\n    }).format(amount);\n  };\n\n  const formatDate = (date) => {\n    return new Date(date).toLocaleDateString('en-IN');\n  };\n\n\n\n  const getCategoryGoalsWithProgress = () => {\n    const currentMonth = new Date().toISOString().slice(0, 7); // YYYY-MM format\n    const currentMonthExpenses = expenses.filter(expense => \n      expense.date.startsWith(currentMonth)\n    );\n\n    // Only show goals that users have actually added (from expenseGoals)\n    return expenseGoals.map(goal => {\n      const categoryExpenses = currentMonthExpenses.filter(expense => \n        expense.category === goal.category\n      );\n      \n      const spent = categoryExpenses.reduce((sum, expense) => sum + expense.amount, 0);\n      const impulseBuys = categoryExpenses.filter(expense => expense.impulseBuy).length;\n      const totalSpends = categoryExpenses.length;\n      const percentage = goal.amount > 0 ? Math.round((spent / goal.amount) * 100) : 0;\n      \n      return {\n        name: goal.category,\n        displayName: mapBackendCategoryToDisplayName(goal.category),\n        goal: goal.amount,\n        spent,\n        percentage,\n        impulseBuys,\n        totalSpends,\n        color: goal.color || '#1E49C9'\n      };\n    }).sort((a, b) => b.spent - a.spent); // Sort by amount spent\n  };\n\n  // Calculate total impulse buys for current month\n  const getCurrentMonthImpulseBuys = () => {\n    const currentMonth = new Date().toISOString().slice(0, 7); // YYYY-MM format\n    return expenses.filter(expense => \n      expense.date.startsWith(currentMonth) && expense.impulseBuy\n    ).length;\n  };\n\n  // Expense goal category mapping\n  const expenseGoalCategories = {\n    'nourishing_food': 'Nourishing food',\n    'safe_convenient_travel': 'Safe, convenient travel',\n    'safe_comfortable_home': 'Safe, comfortable and peaceful home',\n    'living_essentials': 'Maintain living essentials',\n    'healthcare_wellbeing': 'Long term wellbeing and protective healthcare',\n    'enjoy_life': 'Enjoy life, have fun',\n    'value_shopping': 'Value, comfort or joyful shopping',\n    'learning_growing': 'Learning, growing and investing in my future',\n    'exploring_places': 'Exploring new places',\n    'prepare_unexpected': 'Prepare for the unexpected',\n    'other': 'Other'\n  };\n\n  const [isAnalyzingImage, setIsAnalyzingImage] = useState(false);\n  const [ocrSuccess, setOcrSuccess] = useState(false);\n  const [showPantryUpdateDialog, setShowPantryUpdateDialog] = useState({\n    show: false,\n    items: [],\n    vendor: '',\n    date: ''\n  });\n  const [selectedPantryItems, setSelectedPantryItems] = useState([]);\n\n  const handleBillImageUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.type.startsWith('image/')) {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          setFormData(prev => ({\n            ...prev,\n            billImage: file,\n            billImageUrl: event.target.result\n          }));\n          // Automatically analyze the image for expense details\n          analyzeBillImage(file);\n        };\n        reader.readAsDataURL(file);\n      } else {\n        // Invalid file type - could show a toast notification instead\n        console.log('Invalid file type selected');\n      }\n    }\n  };\n\n  const analyzeBillImage = async (file) => {\n    if (!file) return;\n    \n    console.log('ðŸ” Starting bill image analysis for file:', file.name, file.size);\n    setIsAnalyzingImage(true);\n    try {\n      const formData = new FormData();\n      formData.append('image', file);\n      \n      const token = localStorage.getItem('token');\n      const apiUrl = buildApiUrl('/api/finance/analyze-bill');\n      console.log('ðŸ” Sending request to:', apiUrl);\n      \n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      console.log('ðŸ” Response status:', response.status, response.ok);\n      console.log('ðŸ” Response headers:', Object.fromEntries(response.headers.entries()));\n      \n      if (response.ok) {\n        const result = await response.json();\n        console.log('ðŸ” Bill analysis result:', result);\n        console.log('ðŸ” Result type:', typeof result);\n        console.log('ðŸ” Result keys:', Object.keys(result));\n        \n        // Update form with extracted information\n        if (result.amount) {\n          console.log('ðŸ” Updating form with extracted data:', result);\n          \n          // Force a state update to ensure the form re-renders\n          const newFormData = {\n            ...formData,\n            amount: result.amount,\n            description: result.description || formData.description,\n            vendor: result.vendor || formData.vendor,\n            category: result.category || formData.category,\n            date: result.date || formData.date\n          };\n          \n          console.log('ðŸ” Current form data before update:', formData);\n          console.log('ðŸ” New form data to set:', newFormData);\n          \n          console.log('ðŸ” About to update form data from:', formData, 'to:', newFormData);\n          setFormData(newFormData);\n          \n          // Force a re-render by updating a different state\n          setTimeout(() => {\n            console.log('ðŸ” Form data after update:', newFormData);\n            console.log('ðŸ” Current form state should be:', newFormData);\n          }, 100);\n          \n          // Show success notification\n          const extractedFields = [];\n          if (result.amount) extractedFields.push(`Amount: â‚¹${result.amount}`);\n          if (result.description) extractedFields.push(`Description: ${result.description}`);\n          if (result.vendor) extractedFields.push(`Vendor: ${result.vendor}`);\n          if (result.category) extractedFields.push(`Category: ${result.category}`);\n          \n          console.log('âœ… OCR Analysis Complete:', extractedFields.join(', '));\n          \n          // Show success indicator\n          setOcrSuccess(true);\n          setTimeout(() => setOcrSuccess(false), 3000);\n          \n          // Check if this is a food purchase with pantry items\n          if (result.category === 'food' && result.description) {\n            // Extract pantry items from description\n            const pantryItems = extractPantryItems(result.description);\n            if (pantryItems.length > 0) {\n              setShowPantryUpdateDialog({\n                show: true,\n                items: pantryItems,\n                vendor: result.vendor,\n                date: result.date\n              });\n              // Initialize all items as selected\n              setSelectedPantryItems(pantryItems);\n            }\n          }\n        }\n        \n        if (result.error) {\n          console.warn('OCR analysis warning:', result.error);\n        }\n        \n        if (result.warning) {\n          console.warn('OCR analysis warning:', result.warning);\n        }\n      } else {\n        console.error('Failed to analyze bill image');\n      }\n    } catch (error) {\n      console.error('Error analyzing bill image:', error);\n    } finally {\n      setIsAnalyzingImage(false);\n    }\n  };\n\n  const removeBillImage = () => {\n    setFormData(prev => ({\n      ...prev,\n      billImage: null,\n      billImageUrl: ''\n    }));\n  };\n\n  const extractPantryItems = (description) => {\n    // Enhanced food item detection with brand names and common items\n    const pantryKeywords = [\n      'milk', 'bread', 'eggs', 'rice', 'pasta', 'oil', 'sugar', 'salt', 'flour',\n      'cereal', 'beans', 'lentils', 'spices', 'herbs', 'sauce', 'jam', 'honey',\n      'nuts', 'dried fruits', 'canned goods', 'beverages', 'snacks', 'chocolate',\n      'tea', 'coffee', 'juice', 'yogurt', 'cheese', 'butter', 'meat', 'fish',\n      'vegetables', 'fruits', 'onions', 'potatoes', 'tomatoes', 'carrots',\n      'taaza', 'novel', 'naphthale', 'keventer', 'chicke', 'idly', 'dosa', 'bat'\n    ];\n    \n    // Split by commas and clean up\n    const items = description.split(',').map(item => item.trim());\n    const foundItems = [];\n    \n    items.forEach(item => {\n      // Clean the item name\n      const cleanItem = item.replace(/[^a-zA-Z\\s]/g, ' ').trim();\n      const words = cleanItem.split(/\\s+/);\n      \n      words.forEach(word => {\n        const cleanWord = word.toLowerCase();\n        if (cleanWord.length > 2 && pantryKeywords.some(keyword => \n          cleanWord.includes(keyword) || keyword.includes(cleanWord)\n        )) {\n          // Capitalize first letter and add to found items\n          const capitalizedWord = cleanWord.charAt(0).toUpperCase() + cleanWord.slice(1);\n          if (!foundItems.includes(capitalizedWord)) {\n            foundItems.push(capitalizedWord);\n          }\n        }\n      });\n      \n      // Also check if the entire item contains food keywords\n      if (cleanItem.length > 3) {\n        const hasFoodKeyword = pantryKeywords.some(keyword => \n          cleanItem.toLowerCase().includes(keyword)\n        );\n        if (hasFoodKeyword && !foundItems.includes(cleanItem)) {\n          foundItems.push(cleanItem);\n        }\n      }\n    });\n    \n    // Remove duplicates and return unique items\n    return [...new Set(foundItems)];\n  };\n\n  const handlePantryUpdate = async () => {\n    try {\n      console.log('ðŸ” Starting pantry update...');\n      console.log('ðŸ” Selected items:', selectedPantryItems);\n      console.log('ðŸ” Dialog data:', showPantryUpdateDialog);\n      \n      const token = localStorage.getItem('token');\n      console.log('ðŸ” Token exists:', !!token);\n      \n      const pantryData = {\n        items: selectedPantryItems.map(item => ({\n          name: item,\n          quantity: 1,\n          unit: 'piece',\n          category: 'food',\n          purchaseDate: showPantryUpdateDialog.date,\n          vendor: showPantryUpdateDialog.vendor,\n          expiryDate: null,\n          notes: `Added from expense receipt`\n        }))\n      };\n\n      console.log('ðŸ” Updating pantry with items:', pantryData);\n      console.log('ðŸ” API URL:', buildApiUrl('/api/pantry/add-multiple'));\n      \n      // Add items to pantry\n      const response = await fetch(buildApiUrl('/api/pantry/add-multiple'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(pantryData)\n      });\n\n      console.log('ðŸ” Response status:', response.status);\n      console.log('ðŸ” Response ok:', response.ok);\n      \n      if (response.ok) {\n        const result = await response.json();\n        console.log('âœ… Pantry updated successfully:', result);\n        // Close the dialog\n        setShowPantryUpdateDialog({ show: false, items: [], vendor: '', date: '' });\n        setSelectedPantryItems([]);\n        // Show success message\n        setOcrSuccess(true);\n        setTimeout(() => setOcrSuccess(false), 3000);\n      } else {\n        const errorText = await response.text();\n        console.error('Failed to update pantry:', response.status, errorText);\n      }\n    } catch (error) {\n      console.error('Error updating pantry:', error);\n    }\n  };\n\n  const togglePantryItem = (item) => {\n    setSelectedPantryItems(prev => \n      prev.includes(item) \n        ? prev.filter(i => i !== item)\n        : [...prev, item]\n    );\n  };\n\n  const selectAllPantryItems = () => {\n    setSelectedPantryItems(showPantryUpdateDialog.items);\n  };\n\n  const deselectAllPantryItems = () => {\n    setSelectedPantryItems([]);\n  };\n\n  const closePantryDialog = () => {\n    console.log('ðŸ” Closing pantry dialog');\n    setShowPantryUpdateDialog({ show: false, items: [], vendor: '', date: '' });\n    setSelectedPantryItems([]);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"h-full flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-[#FFD200]\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"p-6\"\n    >\n      {/* Bento Grid Layout - Pinterest Style */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-[minmax(200px,auto)] [&>*:nth-child(odd)]:animate-fade-in [&>*:nth-child(even)]:animate-fade-in-delayed\">\n        \n        {/* Header - Mission Card - Full width */}\n        <div className=\"md:col-span-2 lg:col-span-3 xl:col-span-4\">\n      <Card \n        variant=\"elevated\" \n            className=\"h-full\"\n        title=\"FINANCIAL MISSION\"\n        subtitle=\"Track expenses, manage budgets, and achieve financial goals\"\n        icon={<DollarSign className=\"h-5 w-5 text-[#1E49C9]\" />}\n      >\n        <div className=\"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4\">\n          <div className=\"flex flex-col lg:flex-row lg:items-center gap-4\">\n            {/* Tabs */}\n            <div className=\"flex space-x-1 bg-[rgba(0,0,0,0.2)] p-1 rounded-lg w-fit border border-[rgba(255,255,255,0.1)] mx-auto lg:mx-0\">\n              {['overview', 'expenses', 'email-expenses', 'subscriptions'].map((tab) => (\n                <button\n                  key={tab}\n                  onClick={() => setActiveTab(tab)}\n                  className={`py-2 px-3 rounded-md text-sm font-medium transition-all duration-200 font-jakarta tracking-wider ${\n                    activeTab === tab\n                      ? 'bg-[#1E49C9] text-white shadow-lg'\n                      : 'text-text-secondary hover:text-text-primary hover:bg-[rgba(30,73,201,0.1)]'\n                  }`}\n                >\n                  {tab === 'email-expenses' ? 'Email Expenses' : tab.charAt(0).toUpperCase() + tab.slice(1)}\n                </button>\n              ))}\n            </div>\n          </div>\n          \n          <div className=\"flex justify-center lg:justify-end\">\n            {activeTab === 'subscriptions' ? (\n              <button\n                onClick={() => setShowSubscriptionForm(true)}\n                className={componentStyles.button.primary + \" flex items-center gap-2\"}\n              >\n                <Plus size={16} />\n                ADD SUBSCRIPTION\n              </button>\n            ) : (\n            <button\n              onClick={() => setShowAddForm(true)}\n              className={componentStyles.button.primary + \" flex items-center gap-2\"}\n            >\n              <Plus size={16} />\n                ADD EXPENSE\n            </button>\n            )}\n          </div>\n        </div>\n      </Card>\n        </div>\n\n      {/* Tab Content */}\n      {activeTab === 'overview' && (\n        <>\n            {/* Current Month */}\n            <div className=\"col-span-1\">\n              <Card className=\"h-full flex flex-col\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"p-2 bg-[#1E49C9] bg-opacity-20 rounded-lg\">\n                      <TrendingUp className=\"h-5 w-5 text-[#1E49C9]\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-jakarta text-2xl leading-normal text-text-primary font-bold tracking-wide\">\n                        CURRENT MONTH\n                      </h3>\n                      <p className=\"font-jakarta text-lg leading-loose text-text-secondary\">\n                        {new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex-1 flex items-center justify-center\">\n                <p className=\"text-3xl font-bold text-[#1E49C9] font-mono\">\n                  {formatCurrency(currentMonthTotal)}\n                </p>\n              </div>\n            </Card>\n            </div>\n            \n            {/* Previous Month */}\n            <div className=\"col-span-1\">\n              <Card className=\"h-full flex flex-col\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"p-2 bg-[#1E49C9] bg-opacity-20 rounded-lg\">\n                      <TrendingDown className=\"h-5 w-5 text-[#1E49C9]\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-jakarta text-2xl leading-normal text-text-primary font-bold tracking-wide\">\n                        PREVIOUS MONTH\n                      </h3>\n                      <p className=\"font-jakarta text-lg leading-loose text-text-secondary\">\n                        {new Date(new Date().getFullYear(), new Date().getMonth() - 1, 1).toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex-1 flex items-center justify-center\">\n                <p className=\"text-3xl font-bold text-[#1E49C9] font-mono\">\n                  {formatCurrency(previousMonthTotal)}\n                </p>\n              </div>\n            </Card>\n            </div>\n            \n            {/* Monthly Average */}\n            <div className=\"col-span-1\">\n              <Card className=\"h-full flex flex-col\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"p-2 bg-[#1E49C9] bg-opacity-20 rounded-lg\">\n                      <DollarSign className=\"h-5 w-5 text-[#1E49C9]\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-jakarta text-2xl leading-normal text-text-primary font-bold tracking-wide\">\n                        MONTHLY AVERAGE\n                      </h3>\n                      <p className=\"font-jakarta text-lg leading-loose text-text-secondary\">\n                        Last 6 months\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex-1 flex items-center justify-center\">\n                <p className=\"text-3xl font-bold text-[#1E49C9] font-mono\">\n                  {formatCurrency(monthlyAverage6)}\n                </p>\n              </div>\n            </Card>\n          </div>\n\n            {/* Impulse Buys */}\n            <div className=\"col-span-1\">\n              <Card className=\"h-full flex flex-col\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"p-2 bg-[#FF6B6B] bg-opacity-20 rounded-lg\">\n                      <CreditCard className=\"h-5 w-5 text-[#FF6B6B]\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-jakarta text-2xl leading-normal text-text-primary font-bold tracking-wide\">\n                        IMPULSE BUYS\n                      </h3>\n                      <p className=\"font-jakarta text-lg leading-loose text-text-secondary\">\n                        {new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\n                    </p>\n                  </div>\n                  </div>\n                </div>\n                <div className=\"flex-1 flex flex-col items-center justify-center\">\n                  <p className=\"text-3xl font-bold text-[#FF6B6B] font-mono\">\n                    {getCurrentMonthImpulseBuys()}\n                  </p>\n                  <p className=\"text-sm text-text-secondary font-jakarta mt-1\">\n                    this month\n                  </p>\n            </div>\n          </Card>\n            </div>\n\n\n          {/* Category Goals vs Expenses */}\n            <div className=\"md:col-span-2 lg:col-span-3 xl:col-span-4\">\n          <Card \n            variant=\"base\" \n                className=\"h-full\"\n          >\n                {/* Custom Header */}\n            <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"p-2 bg-[#1E49C9] bg-opacity-20 rounded-lg\">\n                      <Target className=\"h-5 w-5 text-[#1E49C9]\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-jakarta text-2xl leading-normal text-text-primary font-bold tracking-wide\">\n                        CATEGORY GOALS VS EXPENSES\n                      </h3>\n                      <p className=\"font-jakarta text-lg leading-loose text-text-secondary\">\n                        Monitor spending against your budget goals\n                      </p>\n                    </div>\n                  </div>\n              <div className=\"flex items-center space-x-3\">\n                <button \n                  onClick={() => setShowAddGoalForm(true)}\n                  className={componentStyles.button.secondary + \" text-sm\"}\n                >\n                  ADD GOAL\n                </button>\n                <button \n                  onClick={() => setShowCategoryGoalsForm(true)}\n                  className={componentStyles.button.outline + \" text-sm\"}\n                >\n                      EDIT EXPENSE GOALS\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"space-y-3\">\n              {getCategoryGoalsWithProgress().length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <Target className=\"h-12 w-12 text-text-secondary mx-auto mb-4\" />\n                  <p className=\"text-lg font-semibold text-text-primary font-jakarta mb-2\">No expense goals set</p>\n                  <p className=\"text-sm text-text-secondary font-jakarta mb-4\">Create your first expense goal to start tracking</p>\n                  <button\n                    onClick={() => setShowAddGoalForm(true)}\n                    className={componentStyles.button.primary}\n                  >\n                    ADD FIRST GOAL\n                  </button>\n                </div>\n              ) : (\n                getCategoryGoalsWithProgress().map((category) => {\n                return (\n                  <div key={category.name} className=\"flex items-center justify-between p-4 bg-[rgba(0,0,0,0.2)] border border-[rgba(255,255,255,0.1)] rounded-lg backdrop-blur-sm hover:border-[#1E49C9]/30 transition-all duration-300\">\n                    {/* Left side - Glass circle with colored dot, name, and spend count */}\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"w-12 h-12 bg-[rgba(255,255,255,0.1)] border border-[rgba(255,255,255,0.2)] rounded-full flex items-center justify-center backdrop-blur-sm\">\n                        <div \n                          className=\"w-4 h-4 rounded-full\" \n                            style={{ backgroundColor: category.color }}\n                        ></div>\n                      </div>\n                      <div>\n                          <h3 className=\"text-lg font-semibold text-text-primary font-jakarta tracking-wide\">\n                            {category.displayName}\n                        </h3>\n                          <div className=\"flex items-center space-x-3 text-sm text-text-secondary font-jakarta\">\n                            <span>{category.totalSpends} Spend{category.totalSpends !== 1 ? 's' : ''}</span>\n                            {category.impulseBuys > 0 && (\n                              <span className=\"text-[#FFD200] font-medium\">\n                                â€¢ {category.impulseBuys} Impulse{category.impulseBuys !== 1 ? 's' : ''}\n                              </span>\n                            )}\n                          </div>\n                      </div>\n                    </div>\n                    \n                    {/* Right side - Amount and budget status */}\n                    <div className=\"text-right\">\n                      <p className=\"text-lg font-bold text-[#1E49C9] font-mono\">\n                        {formatCurrency(category.spent)}\n                      </p>\n                        <p className=\"text-sm text-text-secondary font-jakarta\">\n                          of {formatCurrency(category.goal)}\n                        </p>\n                        <div className=\"w-full bg-[rgba(255,255,255,0.1)] rounded-full h-2 mt-2\">\n                          <div \n                            className=\"bg-[#1E49C9] h-2 rounded-full transition-all duration-300\"\n                            style={{ width: `${Math.min(category.percentage, 100)}%` }}\n                          ></div>\n                        </div>\n                        <p className=\"text-xs text-text-secondary font-jakarta mt-1\">\n                          {category.percentage}% of goal\n                        </p>\n                    </div>\n                  </div>\n                );\n                })\n              )}\n            </div>\n          </Card>\n            </div>\n\n        </>\n      )}\n\n      {activeTab === 'expenses' && (\n          <div className=\"md:col-span-2 lg:col-span-3 xl:col-span-4\">\n        <Card \n          variant=\"base\"\n              className=\"h-full\"\n          title=\"ALL EXPENSES\"\n          subtitle=\"Complete list of your financial transactions\"\n          icon={<CreditCard className=\"h-5 w-5 text-[#1E49C9]\" />}\n        >\n          <div className=\"overflow-y-auto max-h-[400px] relative min-w-max\">\n            <table className=\"w-full\">\n              <thead className=\"sticky top-0 bg-[rgba(0,0,0,0.3)] z-10 border-b border-[rgba(255,255,255,0.1)] backdrop-blur-sm\">\n                <tr>\n                  <th className=\"text-left py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\">DATE</th>\n                  <th className=\"text-left py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\">DESCRIPTION</th>\n                  <th className=\"text-left py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\">CATEGORY</th>\n                  <th className=\"text-left py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\">VENDOR</th>\n                  <th className=\"text-center py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\">IMPULSE</th>\n                  <th className=\"text-center py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\">BILL IMAGE</th>\n                  <th className=\"text-right py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\">AMOUNT</th>\n                  <th className=\"text-center py-3 px-4 font-medium text-text-primary font-jakarta tracking-wider text-sm\">ACTIONS</th>\n                </tr>\n              </thead>\n              <tbody>\n                {expenses.length > 0 ? (\n                  expenses.map((expense) => (\n                    <tr key={expense._id} className=\"border-b border-[rgba(255,255,255,0.1)] hover:bg-[rgba(30,73,201,0.05)] transition-colors\">\n                      <td className=\"py-3 px-4 text-sm text-text-secondary font-jakarta\">{formatDate(expense.date)}</td>\n                      <td className=\"py-3 px-4\">\n                        <div className=\"flex items-center space-x-2\">\n                        <p className=\"font-medium text-text-primary font-jakarta tracking-wide text-sm\">{expense.description}</p>\n                          {expense.tags && expense.tags.includes('subscription') && (\n                            <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium font-jakarta tracking-wider bg-[rgba(30,73,201,0.2)] text-[#1E49C9] border border-[#1E49C9]/30\">\n                              ðŸ”„ Subscription\n                            </span>\n                          )}\n                        </div>\n                        {expense.notes && <p className=\"text-xs text-text-secondary font-jakarta mt-1\">{expense.notes}</p>}\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <span className=\"px-3 py-1 rounded-full text-xs font-medium font-jakarta tracking-wider bg-[rgba(30,73,201,0.2)] text-[#1E49C9] border border-[#1E49C9]/30\">\n                          {expense.tags && expense.tags.includes('subscription') && expense.tags[1] \n                            ? expenseGoalCategories[expense.tags[1]] || expense.category\n                            : expenseGoalCategories[expense.category] || expense.category}\n                        </span>\n                      </td>\n                      <td className=\"py-3 px-4 text-sm text-text-secondary font-jakarta\">{expense.vendor}</td>\n                      <td className=\"py-3 px-4 text-center\">\n                        {expense.impulseBuy ? (\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium font-jakarta tracking-wider bg-[rgba(255,210,0,0.2)] text-[#FFD200] border border-[#FFD200]/30\">\n                            âš¡ Impulse\n                          </span>\n                        ) : (\n                          <span className=\"text-xs text-text-secondary font-jakarta\">-</span>\n                        )}\n                      </td>\n                      <td className=\"py-3 px-4 text-center\">\n                        {expense.billImage?.url || expense.billImageUrl ? (\n                          <button\n                            onClick={() => window.open(expense.billImage?.url || expense.billImageUrl, '_blank')}\n                            className=\"inline-flex items-center space-x-1 text-[#1E49C9] hover:text-[#1E49C9]/80 transition-colors\"\n                            title=\"View bill image\"\n                          >\n                            <Image className=\"h-4 w-4\" />\n                            <span className=\"text-xs font-jakarta\">View</span>\n                          </button>\n                        ) : (\n                          <span className=\"text-xs text-text-secondary font-jakarta\">No image</span>\n                        )}\n                      </td>\n                      <td className=\"py-3 px-4 text-right font-semibold text-[#1E49C9] font-mono text-sm\">{formatCurrency(expense.amount)}</td>\n                      <td className=\"py-3 px-4 text-center\">\n                        <div className=\"flex justify-center space-x-2\">\n                          <button\n                            onClick={() => handleEdit(expense)}\n                            className=\"text-[#1E49C9] hover:text-[#1E49C9]/80 transition-colors p-2 rounded-lg hover:bg-[rgba(30,73,201,0.1)]\"\n                            title=\"Edit expense\"\n                          >\n                            <Edit3 size={16} />\n                          </button>\n                          <button\n                            onClick={() => handleDelete(expense._id, 'expense')}\n                            className=\"text-red-500 hover:text-red-400 transition-colors p-2 rounded-lg hover:bg-red-500/10\"\n                            title=\"Delete expense\"\n                          >\n                            <Trash2 size={16} />\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))\n                ) : (\n                  <tr>\n                    <td colSpan=\"8\" className=\"py-12 text-center\">\n                      <div className=\"text-text-secondary font-jakarta\">\n                        <CreditCard className=\"h-12 w-12 text-text-secondary mx-auto mb-4\" />\n                        <p className=\"text-lg mb-2 font-semibold\">No expenses yet</p>\n                        <p className=\"text-sm text-text-secondary mb-4\">Add your first expense to get started</p>\n                        <button\n                          onClick={() => setShowAddForm(true)}\n                          className={componentStyles.button.primary}\n                        >\n                          ADD FIRST EXPENSE\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </div>\n        </Card>\n          </div>\n      )}\n\n      {activeTab === 'subscriptions' && (\n          <div className=\"md:col-span-2 lg:col-span-3 xl:col-span-4\">\n        <Card \n          variant=\"base\"\n              className=\"h-full\"\n          title=\"ACTIVE SUBSCRIPTIONS\"\n          subtitle=\"Manage your recurring payments and subscriptions\"\n          icon={<Target className=\"h-5 w-5 text-[#1E49C9]\" />}\n        >\n          {(() => {\n            const subscriptionExpenses = expenses.filter(expense => \n              expense.tags && expense.tags.includes('subscription')\n            );\n            \n            return subscriptionExpenses.length > 0 ? (\n              <div className=\"space-y-4\">\n                {subscriptionExpenses.map((subscription) => (\n                  <div key={subscription._id} className=\"flex items-center justify-between p-4 bg-[rgba(0,0,0,0.2)] border border-[rgba(255,255,255,0.1)] rounded-lg backdrop-blur-sm hover:border-[#1E49C9]/30 transition-all duration-300\">\n                    {/* Left side - Subscription info */}\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"w-12 h-12 bg-[rgba(30,73,201,0.2)] border border-[#1E49C9]/30 rounded-full flex items-center justify-center backdrop-blur-sm\">\n                        <Target className=\"h-6 w-6 text-[#1E49C9]\" />\n                      </div>\n                      <div>\n                        <h3 className=\"text-lg font-semibold text-text-primary font-jakarta tracking-wide\">\n                          {subscription.description}\n                        </h3>\n                        <div className=\"flex items-center space-x-3 text-sm text-text-secondary font-jakarta\">\n                          <span>{subscription.recurringPattern || 'monthly'}</span>\n                          <span>â€¢</span>\n                          <span>{subscription.tags && subscription.tags[1] ? expenseGoalCategories[subscription.tags[1]] : subscription.category}</span>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Right side - Amount and actions */}\n                    <div className=\"text-right\">\n                      <p className=\"text-lg font-bold text-[#1E49C9] font-mono\">\n                        {formatCurrency(subscription.amount)}\n                      </p>\n                      <p className=\"text-sm text-text-secondary font-jakarta\">\n                        per {subscription.recurringPattern || 'month'}\n                      </p>\n                      <div className=\"flex justify-end space-x-2 mt-2\">\n                        <button\n                          onClick={() => {\n                            // Handle edit subscription\n                            setEditingSubscription(subscription);\n                            setSubscriptionForm({\n                              name: subscription.description,\n                              category: subscription.tags && subscription.tags[1] ? subscription.tags[1] : 'other',\n                              amount: subscription.amount,\n                              frequency: subscription.recurringPattern || 'monthly',\n                              notes: subscription.notes ? subscription.notes.split(' | ')[2] || '' : '',\n                              color: '#1E49C9'\n                            });\n                            setShowSubscriptionForm(true);\n                          }}\n                          className=\"text-[#1E49C9] hover:text-[#1E49C9]/80 transition-colors p-2 rounded-lg hover:bg-[rgba(30,73,201,0.1)]\"\n                          title=\"Edit subscription\"\n                        >\n                          <Edit3 size={16} />\n                        </button>\n                        <button\n                          onClick={() => handleDelete(subscription._id, 'expense')}\n                          className=\"text-red-500 hover:text-red-400 transition-colors p-2 rounded-lg hover:bg-red-500/10\"\n                          title=\"Delete subscription\"\n                        >\n                          <Trash2 size={16} />\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                \n                <div className=\"flex justify-center pt-4\">\n                  <button\n                    onClick={() => setShowSubscriptionForm(true)}\n                    className={componentStyles.button.primary + \" flex items-center gap-2\"}\n                  >\n                    <Plus size={16} />\n                    ADD SUBSCRIPTION\n                  </button>\n                </div>\n              </div>\n            ) : (\n          <div className=\"text-center py-12\">\n            <Target className=\"h-16 w-16 text-text-secondary mx-auto mb-4\" />\n            <p className=\"text-lg font-semibold text-text-primary font-jakarta mb-2\">No subscriptions yet</p>\n            <p className=\"text-sm text-text-secondary font-jakarta mb-6\">Track your recurring payments and manage subscriptions</p>\n            <button\n                  onClick={() => setShowSubscriptionForm(true)}\n              className={componentStyles.button.primary}\n            >\n              ADD SUBSCRIPTION\n            </button>\n          </div>\n            );\n          })()}\n        </Card>\n          </div>\n      )}\n\n      {activeTab === 'email-expenses' && (\n        <div className=\"md:col-span-2 lg:col-span-3 xl:col-span-4\">\n          <div className=\"space-y-6\">\n            {/* Info Section */}\n            <Card \n              variant=\"base\"\n              className=\"h-full\"\n              title=\"EMAIL EXPENSE FUNCTIONALITY\"\n              subtitle=\"Automatically log expenses by forwarding receipts to a unique email address\"\n              icon={<Mail className=\"h-5 w-5 text-[#1E49C9]\" />}\n            >\n              <div className=\"space-y-6\">\n                <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                  <h3 className=\"font-semibold text-gray-900 mb-3\">How It Works:</h3>\n                  <ol className=\"list-decimal list-inside space-y-2 text-sm text-gray-700\">\n                    <li>Get your unique forwarding email address</li>\n                    <li>Forward receipts, invoices, or expense emails to this address</li>\n                    <li>Our AI automatically extracts expense details</li>\n                    <li>Review and confirm the parsed information</li>\n                  </ol>\n                </div>\n                \n                <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                  <div className=\"flex items-center space-x-2 mb-3\">\n                    <CheckCircle className=\"h-5 w-5 text-[#1E49C9]\" />\n                    <h3 className=\"font-semibold text-gray-900\">Supported Formats</h3>\n                  </div>\n                  <p className=\"text-sm text-gray-700\">\n                    PDF receipts, image attachments, and text-based invoices are all supported.\n                  </p>\n                </div>\n              </div>\n            </Card>\n\n            {/* Email Settings */}\n            <Card \n              variant=\"base\"\n              className=\"h-full\"\n              title=\"EMAIL FORWARDING SETTINGS\"\n              subtitle=\"Configure your unique email address for automatic expense logging\"\n              icon={<Mail className=\"h-5 w-5 text-[#1E49C9]\" />}\n            >\n              <EmailExpenseSettings />\n            </Card>\n\n            {/* Email-Created Expenses */}\n            <Card \n              variant=\"base\"\n              className=\"h-full\"\n              title=\"EMAIL-CREATED EXPENSES\"\n              subtitle=\"Expenses automatically created from forwarded emails\"\n              icon={<Mail className=\"h-5 w-5 text-[#1E49C9]\" />}\n            >\n              <EmailExpensesList />\n            </Card>\n          </div>\n        </div>\n      )}\n\n      </div>\n\n      {/* Add/Edit Form Modal */}\n      {showAddForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4\">\n          <motion.div \n            className=\"bg-[rgba(0,0,0,0.8)] border border-[rgba(255,255,255,0.2)] rounded-2xl p-6 w-full max-w-md max-h-[85vh] overflow-y-auto shadow-2xl backdrop-blur-[32px]\"\n            initial={{ opacity: 0, scale: 0.9, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.9, y: 20 }}\n            transition={{ duration: 0.3, ease: \"easeOut\" }}\n          >\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-semibold text-text-primary font-jakarta tracking-wide\">\n                {editingItem ? 'EDIT EXPENSE' : 'ADD NEW EXPENSE'}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowAddForm(false);\n                  setEditingItem(null);\n                  setFormData({\n                    amount: '',\n                    category: '',\n                    description: '',\n                    vendor: '',\n                    date: new Date().toISOString().split('T')[0],\n                    notes: '',\n                    billImage: null,\n                    billImageUrl: '',\n                    impulseBuy: false\n                  });\n                }}\n                className=\"text-text-secondary hover:text-text-primary transition-colors p-1\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            \n            {ocrSuccess && (\n              <div className=\"mb-4 p-3 bg-[#1E49C9]/20 border border-[#1E49C9]/50 rounded-lg\">\n                <p className=\"text-sm text-[#1E49C9] font-jakarta\">\n                  âœ¨ OCR Analysis Complete! Form fields have been auto-populated.\n                </p>\n                <p className=\"text-xs text-[#1E49C9] font-jakarta mt-1\">\n                  Amount: â‚¹{formData.amount} | Vendor: {formData.vendor || 'N/A'} | Category: {formData.category || 'N/A'}\n                </p>\n              </div>\n            )}\n            \n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">\n                  AMOUNT {isAnalyzingImage && <span className=\"text-[#1E49C9]\">(Analyzing...)</span>}\n                </label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  required\n                  value={formData.amount}\n                  onChange={(e) => setFormData({...formData, amount: parseFloat(e.target.value)})}\n                  className={componentStyles.input.base + ` ${\n                    isAnalyzingImage ? 'border-[#1E49C9]' : ''\n                  }`}\n                  placeholder=\"0.00\"\n                  disabled={isAnalyzingImage}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">EXPENSE GOAL</label>\n                <select\n                  value={formData.category}\n                  onChange={(e) => setFormData({...formData, category: e.target.value})}\n                  className={componentStyles.input.base}\n                >\n                  <option value=\"\">Select Expense Goal</option>\n                  {expenseGoals && expenseGoals.length > 0 ? (\n                    expenseGoals.map((goal) => (\n                      <option key={goal._id} value={goal.category}>\n                        {mapBackendCategoryToDisplayName(goal.category)}\n                      </option>\n                    ))\n                  ) : (\n                    <>\n                      <option value=\"food\">Nourishing food</option>\n                      <option value=\"transportation\">Safe, convenient travel</option>\n                      <option value=\"housing\">Safe, comfortable and peaceful home</option>\n                      <option value=\"utilities\">Maintain living essentials</option>\n                      <option value=\"healthcare\">Long term wellbeing and protective healthcare</option>\n                      <option value=\"entertainment\">Enjoy life, have fun</option>\n                      <option value=\"shopping\">Value, comfort or joyful shopping</option>\n                      <option value=\"education\">Learning, growing and investing in my future</option>\n                      <option value=\"travel\">Exploring new places</option>\n                      <option value=\"other\">Other</option>\n                    </>\n                  )}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">VENDOR</label>\n                <input\n                  type=\"text\"\n                  value={formData.vendor}\n                  onChange={(e) => setFormData({...formData, vendor: e.target.value})}\n                  className={componentStyles.input.base}\n                  placeholder=\"Where did you spend?\"\n                />\n              </div>\n\n              <div>\n                <label className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.impulseBuy}\n                    onChange={(e) => setFormData({...formData, impulseBuy: e.target.checked})}\n                    className=\"w-4 h-4 text-[#1E49C9] bg-[rgba(0,0,0,0.2)] border-[rgba(255,255,255,0.2)] rounded focus:ring-[#1E49C9] focus:ring-2\"\n                  />\n                  <span className=\"text-sm font-medium text-text-secondary font-jakarta tracking-wider\">\n                    IMPULSE BUY\n                  </span>\n                </label>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">DESCRIPTION</label>\n                <input\n                  type=\"text\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({...formData, description: e.target.value})}\n                  className={componentStyles.input.base}\n                  placeholder=\"What was this for?\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">DATE</label>\n                <input\n                  type=\"date\"\n                  value={formData.date}\n                  onChange={(e) => setFormData({...formData, date: e.target.value})}\n                  className={componentStyles.input.base}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">NOTES</label>\n                <textarea\n                  value={formData.notes}\n                  onChange={(e) => setFormData({...formData, notes: e.target.value})}\n                  className={componentStyles.input.base}\n                  rows=\"3\"\n                  placeholder=\"Additional notes...\"\n                />\n              </div>\n\n              {/* Bill Image Upload */}\n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">BILL IMAGE</label>\n                <div className=\"space-y-3\">\n                  {formData.billImageUrl ? (\n                    <div className=\"relative\">\n                      <img \n                        src={formData.billImageUrl} \n                        alt=\"Bill preview\" \n                        className=\"w-full h-32 object-cover rounded-lg border border-[rgba(255,255,255,0.2)]\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={removeBillImage}\n                        className=\"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 transition-colors\"\n                        title=\"Remove image\"\n                      >\n                        <Trash2 className=\"h-3 w-3\" />\n                      </button>\n                      {isAnalyzingImage && (\n                        <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center rounded-lg\">\n                          <div className=\"text-center\">\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1E49C9] mx-auto mb-2\"></div>\n                            <p className=\"text-xs text-white font-jakarta\">Analyzing bill...</p>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"border-2 border-dashed border-[rgba(255,255,255,0.2)] rounded-lg p-6 text-center hover:border-[#1E49C9] transition-colors\">\n                      <label className=\"cursor-pointer\">\n                        <input\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={handleBillImageUpload}\n                          className=\"hidden\"\n                        />\n                        <div className=\"space-y-3\">\n                          <Upload className=\"h-8 w-8 text-text-secondary mx-auto\" />\n                          <p className=\"text-sm text-text-secondary font-jakarta\">\n                            Click to upload bill image\n                          </p>\n                          <p className=\"text-xs text-text-secondary font-jakarta\">\n                            JPG, PNG, GIF up to 5MB\n                          </p>\n                          <p className=\"text-xs text-[#1E49C9] font-jakarta\">\n                            âœ¨ Auto-extract expense details\n                          </p>\n                        </div>\n                      </label>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowAddForm(false);\n                    setEditingItem(null);\n                    setFormData({\n                      amount: '',\n                      category: '',\n                      description: '',\n                      vendor: '',\n                      date: new Date().toISOString().split('T')[0],\n                      notes: '',\n                      billImage: null,\n                      billImageUrl: '',\n                      impulseBuy: false\n                    });\n                  }}\n                  className={componentStyles.button.outline + \" flex-1\"}\n                >\n                  CANCEL\n                </button>\n                <button\n                  type=\"submit\"\n                  className={componentStyles.button.primary + \" flex-1\"}\n                >\n                  {editingItem ? 'UPDATE' : 'ADD'} EXPENSE\n                </button>\n              </div>\n            </form>\n          </motion.div>\n        </div>\n      )}\n\n      {/* Pantry Update Dialog */}\n      {showPantryUpdateDialog.show && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] p-4\" onClick={closePantryDialog}>\n          <div className=\"bg-[#11151A] border-2 border-[#2A313A] rounded-lg p-6 w-full max-w-md shadow-2xl relative overflow-hidden\" style={{ clipPath: 'polygon(0 0, calc(100% - 6px) 0, 100% 6px, 100% 100%, 6px 100%, 0 calc(100% - 6px))' }} onClick={(e) => e.stopPropagation()}>\n            {/* Film grain overlay */}\n            <div className=\"absolute inset-0 opacity-5 bg-noise-pattern pointer-events-none\"></div>\n            \n            {/* Reason Strip */}\n            <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-[#1E49C9] to-[#FFD200]\"></div>\n            \n            <h3 className=\"text-lg font-semibold text-[#E8EEF2] mb-4 font-oswald tracking-wide\">\n              ðŸ›’ Update Pantry Inventory?\n            </h3>\n            \n            <div className=\"space-y-4\">\n              <p className=\"text-sm text-[#C9D1D9] font-inter\">\n                We detected food items in your receipt. Would you like to add them to your pantry inventory?\n              </p>\n              \n              {selectedPantryItems.length === 0 && (\n                <div className=\"bg-[#FFD200]/20 border border-[#FFD200]/50 text-[#FFD200] rounded-md p-2 text-xs font-inter\">\n                  âš ï¸ Please select at least one item to add to your pantry\n                </div>\n              )}\n              \n              <div className=\"bg-[#0A0C0F] border border-[#2A313A] rounded-md p-3\">\n                <div className=\"flex justify-between items-center mb-3\">\n                  <h4 className=\"text-sm font-medium text-[#E8EEF2] font-oswald tracking-wide\">\n                    Detected Items ({selectedPantryItems.length}/{showPantryUpdateDialog.items.length})\n                  </h4>\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={selectAllPantryItems}\n                      className=\"px-2 py-1 text-xs bg-[#1E49C9]/20 border border-[#1E49C9]/50 text-[#1E49C9] rounded hover:bg-[#1E49C9]/30 transition-colors\"\n                    >\n                      Select All\n                    </button>\n                    <button\n                      onClick={deselectAllPantryItems}\n                      className=\"px-2 py-1 text-xs bg-[#2A313A] border border-[#2A313A] text-[#C9D1D9] rounded hover:bg-[#2A313A]/80 transition-colors\"\n                    >\n                      Deselect All\n                    </button>\n                  </div>\n                </div>\n                <div className=\"space-y-2 max-h-32 overflow-y-auto\">\n                  {showPantryUpdateDialog.items.map((item, index) => (\n                    <label key={index} className=\"flex items-center gap-3 cursor-pointer hover:bg-[#2A313A]/50 p-2 rounded transition-colors\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedPantryItems.includes(item)}\n                        onChange={() => togglePantryItem(item)}\n                        className=\"w-4 h-4 text-[#1E49C9] bg-[#0A0C0F] border-[#2A313A] rounded focus:ring-[#1E49C9] focus:ring-2\"\n                      />\n                      <span className={`text-sm font-inter ${selectedPantryItems.includes(item) ? 'text-[#E8EEF2]' : 'text-[#8B949E]'}`}>\n                        {item}\n                      </span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n              \n              <div className=\"flex space-x-3 pt-2\">\n                <button\n                  onClick={closePantryDialog}\n                  className=\"flex-1 px-4 py-2 border-2 border-[#2A313A] text-[#C9D1D9] rounded-md hover:bg-[#2A313A] font-oswald tracking-wide transition-colors text-sm\"\n                >\n                  Skip\n                </button>\n                <button\n                  onClick={() => {\n                    console.log('ðŸ” Update Pantry button clicked!');\n                    console.log('ðŸ” Selected items:', selectedPantryItems);\n                    handlePantryUpdate();\n                  }}\n                  disabled={selectedPantryItems.length === 0}\n                  className={`flex-1 px-4 py-2 rounded-md font-oswald tracking-wide transition-colors text-sm ${\n                    selectedPantryItems.length === 0\n                      ? 'bg-[#2A313A] text-[#8B949E] cursor-not-allowed'\n                      : 'bg-[#1E49C9] text-white hover:bg-[#1E49C9]/80'\n                  }`}\n                >\n                  Update Pantry ({selectedPantryItems.length})\n                </button>\n                \n\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add Goal Form Modal */}\n      {showAddGoalForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4\">\n          <motion.div \n            className=\"bg-[rgba(0,0,0,0.8)] border border-[rgba(255,255,255,0.2)] rounded-2xl p-6 w-full max-w-md max-h-[85vh] overflow-y-auto shadow-2xl backdrop-blur-[32px]\"\n            initial={{ opacity: 0, scale: 0.9, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.9, y: 20 }}\n            transition={{ duration: 0.3, ease: \"easeOut\" }}\n          >\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-semibold text-text-primary font-jakarta tracking-wide\">\n                {editingGoal ? 'EDIT EXPENSE GOAL' : 'ADD EXPENSE GOAL'}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowAddGoalForm(false);\n                  resetGoalForm();\n                }}\n                className=\"text-text-secondary hover:text-text-primary transition-colors p-1\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            \n            <form onSubmit={handleAddGoal} className=\"space-y-4\">\n              <div className=\"relative\">\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">EXPENSE GOALS *</label>\n                <select\n                  value={newGoalForm.category}\n                  onChange={(e) => setNewGoalForm({...newGoalForm, category: e.target.value})}\n                  className={`${componentStyles.input.base} w-full appearance-none cursor-pointer pr-10`}\n                  required\n                >\n                  <option value=\"\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Select an expense goal</option>\n                  <option value=\"nourishing_food\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Nourishing food</option>\n                  <option value=\"safe_convenient_travel\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Safe, convenient travel</option>\n                  <option value=\"safe_comfortable_home\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Safe, comfortable and peaceful home</option>\n                  <option value=\"living_essentials\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Maintain living essentials</option>\n                  <option value=\"healthcare_wellbeing\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Long term wellbeing and protective healthcare</option>\n                  <option value=\"enjoy_life\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Enjoy life, have fun</option>\n                  <option value=\"value_shopping\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Value, comfort or joyful shopping</option>\n                  <option value=\"learning_growing\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Learning, growing and investing in my future</option>\n                  <option value=\"exploring_places\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Exploring new places</option>\n                  <option value=\"prepare_unexpected\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Prepare for the unexpected</option>\n                  <option value=\"other\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Other</option>\n                </select>\n                <div className=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n                  <svg className=\"w-5 h-5 text-text-secondary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">AMOUNT *</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={newGoalForm.amount}\n                  onChange={(e) => setNewGoalForm({...newGoalForm, amount: parseFloat(e.target.value) || ''})}\n                  className={`${componentStyles.input.base} w-full`}\n                  placeholder=\"0.00\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">COLOR</label>\n                <input\n                  type=\"color\"\n                  value={newGoalForm.color}\n                  onChange={(e) => setNewGoalForm({...newGoalForm, color: e.target.value})}\n                  className={`${componentStyles.input.base} w-full h-10`}\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">NOTES</label>\n                <textarea\n                  value={newGoalForm.notes}\n                  onChange={(e) => setNewGoalForm({...newGoalForm, notes: e.target.value})}\n                  className={`${componentStyles.input.base} w-full`}\n                  rows=\"3\"\n                  placeholder=\"Optional notes about this goal...\"\n                />\n              </div>\n              \n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowAddGoalForm(false);\n                    resetGoalForm();\n                  }}\n                  className={componentStyles.button.outline + \" flex-1\"}\n                >\n                  CANCEL\n                </button>\n                <button\n                  type=\"submit\"\n                  onClick={() => console.log('ðŸŽ¯ Submit button clicked')}\n                  className={componentStyles.button.primary + \" flex-1\"}\n                >\n                  {editingGoal ? 'UPDATE GOAL' : 'ADD GOAL'}\n                </button>\n              </div>\n            </form>\n          </motion.div>\n          </div>\n      )}\n\n      {/* Category Goals Form Modal */}\n      {showCategoryGoalsForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4\">\n          <motion.div \n            className=\"bg-[rgba(0,0,0,0.8)] border border-[rgba(255,255,255,0.2)] rounded-2xl p-6 w-full max-w-md max-h-[85vh] overflow-y-auto shadow-2xl backdrop-blur-[32px]\"\n            initial={{ opacity: 0, scale: 0.9, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.9, y: 20 }}\n            transition={{ duration: 0.3, ease: \"easeOut\" }}\n          >\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-semibold text-text-primary font-jakarta tracking-wide\">EDIT EXPENSE GOALS</h3>\n              <button\n                onClick={() => setShowCategoryGoalsForm(false)}\n                className=\"text-text-secondary hover:text-text-primary transition-colors p-1\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n        </div>\n            \n            <div className=\"space-y-4\">\n              {expenseGoals.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <Target className=\"h-12 w-12 text-text-secondary mx-auto mb-4\" />\n                  <p className=\"text-lg font-semibold text-text-primary font-jakarta mb-2\">No expense goals set</p>\n                  <p className=\"text-sm text-text-secondary font-jakarta mb-4\">Add your first expense goal to get started</p>\n                  <button\n                    onClick={() => {\n                      setShowCategoryGoalsForm(false);\n                      setShowAddGoalForm(true);\n                    }}\n                    className={componentStyles.button.primary}\n                  >\n                    ADD FIRST GOAL\n                  </button>\n                </div>\n              ) : (\n                expenseGoals.map((goal) => (\n                  <div key={goal._id}>\n                    <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">\n                      {mapBackendCategoryToDisplayName(goal.category)}\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      value={goal.amount}\n                      onChange={(e) => {\n                        const newAmount = parseFloat(e.target.value) || 0;\n                        setExpenseGoals(prev => \n                          prev.map(g => \n                            g._id === goal._id ? { ...g, amount: newAmount } : g\n                          )\n                        );\n                      }}\n                      className={`${componentStyles.input.base} w-full`}\n                      placeholder=\"0.00\"\n                    />\n                  </div>\n                ))\n              )}\n            </div>\n\n            <div className=\"flex space-x-3 pt-4\">\n              <button\n                type=\"button\"\n                onClick={() => setShowCategoryGoalsForm(false)}\n                className={componentStyles.button.outline + \" flex-1\"}\n              >\n                CANCEL\n              </button>\n              <button\n                type=\"button\"\n                onClick={async () => {\n                  try {\n                    const token = localStorage.getItem('token');\n                    \n                    // Update each goal individually\n                    const updatePromises = expenseGoals.map(goal => \n                      axios.put(\n                        buildApiUrl(`/api/finance/goals/${goal._id}`),\n                        { amount: goal.amount },\n                        { headers: { Authorization: `Bearer ${token}` } }\n                      )\n                    );\n                    \n                    await Promise.all(updatePromises);\n                    \n                    // Refresh the data to get updated goals\n                    await fetchFinancialData();\n                    setShowCategoryGoalsForm(false);\n                    toast.success('Goals updated successfully!');\n                  } catch (error) {\n                    console.error('Error updating goals:', error);\n                    toast.error('Error updating goals');\n                  }\n                }}\n                className={componentStyles.button.primary + \" flex-1\"}\n                disabled={expenseGoals.length === 0}\n              >\n                SAVE GOALS\n              </button>\n            </div>\n          </motion.div>\n        </div>\n      )}\n\n      {/* Subscription Form Modal */}\n      {showSubscriptionForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4\">\n          <motion.div \n            className=\"bg-[rgba(0,0,0,0.8)] border border-[rgba(255,255,255,0.2)] rounded-2xl p-6 w-full max-w-md max-h-[85vh] overflow-y-auto shadow-2xl backdrop-blur-[32px]\"\n            initial={{ opacity: 0, scale: 0.9, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.9, y: 20 }}\n            transition={{ duration: 0.3, ease: \"easeOut\" }}\n          >\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-semibold text-text-primary font-jakarta tracking-wide\">\n                {editingSubscription ? 'EDIT SUBSCRIPTION' : 'ADD NEW SUBSCRIPTION'}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowSubscriptionForm(false);\n                  setEditingSubscription(null);\n                  setSubscriptionForm({\n                    name: '',\n                    category: '',\n                    amount: '',\n                    frequency: 'monthly',\n                    notes: '',\n                    color: '#1E49C9'\n                  });\n                }}\n                className=\"text-text-secondary hover:text-text-primary transition-colors p-1\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            \n            <form onSubmit={handleSubscriptionSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">SUBSCRIPTION NAME *</label>\n                <input\n                  type=\"text\"\n                  required\n                  value={subscriptionForm.name}\n                  onChange={(e) => setSubscriptionForm({...subscriptionForm, name: e.target.value})}\n                  className={componentStyles.input.base + \" w-full\"}\n                  placeholder=\"e.g., Netflix, Spotify, Gym Membership\"\n                />\n              </div>\n\n              <div className=\"relative\">\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">EXPENSE GOAL CATEGORY *</label>\n                <select\n                  value={subscriptionForm.category}\n                  onChange={(e) => setSubscriptionForm({...subscriptionForm, category: e.target.value})}\n                  className={componentStyles.input.base + \" w-full appearance-none cursor-pointer pr-10\"}\n                  required\n                >\n                  <option value=\"\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Select expense goal category</option>\n                  <option value=\"nourishing_food\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Nourishing food</option>\n                  <option value=\"safe_convenient_travel\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Safe, convenient travel</option>\n                  <option value=\"safe_comfortable_home\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Safe, comfortable and peaceful home</option>\n                  <option value=\"living_essentials\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Maintain living essentials</option>\n                  <option value=\"healthcare_wellbeing\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Long term wellbeing and protective healthcare</option>\n                  <option value=\"enjoy_life\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Enjoy life, have fun</option>\n                  <option value=\"value_shopping\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Value, comfort or joyful shopping</option>\n                  <option value=\"learning_growing\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Learning, growing and investing in my future</option>\n                  <option value=\"exploring_places\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Exploring new places</option>\n                  <option value=\"prepare_unexpected\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Prepare for the unexpected</option>\n                  <option value=\"other\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Other</option>\n                </select>\n                <div className=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n                  <svg className=\"w-5 h-5 text-text-secondary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">AMOUNT *</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  required\n                  value={subscriptionForm.amount}\n                  onChange={(e) => setSubscriptionForm({...subscriptionForm, amount: parseFloat(e.target.value)})}\n                  className={componentStyles.input.base + \" w-full\"}\n                  placeholder=\"0.00\"\n                />\n              </div>\n              \n              <div className=\"relative\">\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">REPEAT FREQUENCY *</label>\n                <select\n                  value={subscriptionForm.frequency}\n                  onChange={(e) => setSubscriptionForm({...subscriptionForm, frequency: e.target.value})}\n                  className={componentStyles.input.base + \" w-full appearance-none cursor-pointer pr-10\"}\n                  required\n                >\n                  <option value=\"weekly\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Weekly</option>\n                  <option value=\"monthly\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Monthly</option>\n                  <option value=\"quarterly\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Quarterly</option>\n                  <option value=\"yearly\" className=\"bg-[rgba(0,0,0,0.8)] text-text-primary\">Yearly</option>\n                </select>\n                <div className=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n                  <svg className=\"w-5 h-5 text-text-secondary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </div>\n              </div>\n              \n              \n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">NOTES</label>\n                <textarea\n                  value={subscriptionForm.notes}\n                  onChange={(e) => setSubscriptionForm({...subscriptionForm, notes: e.target.value})}\n                  className={componentStyles.input.base + \" w-full\"}\n                  rows=\"3\"\n                  placeholder=\"Additional notes about this subscription...\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2 font-jakarta tracking-wider\">COLOR</label>\n                  <input\n                  type=\"color\"\n                  value={subscriptionForm.color}\n                  onChange={(e) => setSubscriptionForm({...subscriptionForm, color: e.target.value})}\n                  className={componentStyles.input.base + \" w-full h-10\"}\n                />\n              </div>\n              \n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowSubscriptionForm(false);\n                    setEditingSubscription(null);\n                    setSubscriptionForm({\n                      name: '',\n                      category: '',\n                      amount: '',\n                      frequency: 'monthly',\n                      notes: '',\n                      color: '#1E49C9'\n                    });\n                  }}\n                  className={componentStyles.button.outline + \" flex-1\"}\n              >\n                CANCEL\n              </button>\n              <button\n                  type=\"submit\"\n                  className={componentStyles.button.primary + \" flex-1\"}\n                >\n                  {editingSubscription ? 'UPDATE' : 'ADD'} SUBSCRIPTION\n              </button>\n            </div>\n            </form>\n          </motion.div>\n        </div>\n      )}\n    </motion.div>\n  );\n};\n\nexport default Finance;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}